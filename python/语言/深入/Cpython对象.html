<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.51" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://igarashi-g.github.io/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html"><meta property="og:site_name" content="äº”åå²š â–ª å¯„"><meta property="og:title" content="Cpython å¯¹è±¡"><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-10-09T12:42:17.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:modified_time" content="2022-10-09T12:42:17.000Z"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_3654399_e6xix4avjkd.css"><title>Cpython å¯¹è±¡ | äº”åå²š â–ª å¯„</title><meta name="description" content="äº”åå²šã®åšå®¢">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.cea4933c.css">
    <link rel="modulepreload" href="/assets/app.5e415dd8.js"><link rel="modulepreload" href="/assets/Cpythonå¯¹è±¡.html.a306344b.js"><link rel="modulepreload" href="/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/assets/Cpythonå¯¹è±¡.html.e63dd9d4.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/" class="brand"><img class="logo" src="/avatar.jpg" alt="äº”åå²š â–ª å¯„"><!----><span class="site-name hide-in-pad">äº”åå²š â–ª å¯„</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="ä¸»é¡µ"><span class="icon iconfont icon-home"></span>ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Python"><span class="title"><span class="icon iconfont icon-python"></span>Python</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>è¯­è¨€</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/python/%E8%AF%AD%E8%A8%80/%E5%9F%BA%E7%A1%80/%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85.html" class="nav-link" aria-label="åŸºç¡€"><!---->åŸºç¡€<!----></a></li><li class="dropdown-subitem"><a href="/python/%E8%AF%AD%E8%A8%80/%E8%BF%9B%E9%98%B6/%E5%8F%98%E9%87%8F%E6%9C%BA%E5%88%B6.html" class="nav-link" aria-label="è¿›é˜¶"><!---->è¿›é˜¶<!----></a></li><li class="dropdown-subitem"><a href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6.html" class="nav-link" aria-label="æ·±å…¥"><!---->æ·±å…¥<!----></a></li><li class="dropdown-subitem"><a href="/python/%E8%AF%AD%E8%A8%80/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/Socket.html" class="nav-link" aria-label="ç½‘ç»œç¼–ç¨‹"><!---->ç½‘ç»œç¼–ç¨‹<!----></a></li><li class="dropdown-subitem"><a href="/python/%E8%AF%AD%E8%A8%80/%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%BC%96%E7%A8%8B/%E8%BF%9B%E7%A8%8B.html" class="nav-link" aria-label="å¤šä»»åŠ¡ç¼–ç¨‹"><!---->å¤šä»»åŠ¡ç¼–ç¨‹<!----></a></li><li class="dropdown-subitem"><a href="/python/%E8%AF%AD%E8%A8%80/asyncio/asyncio%E5%9F%BA%E7%A1%80.html" class="nav-link" aria-label="asyncio"><!---->asyncio<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>ç”Ÿæ€</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/python/%E7%94%9F%E6%80%81/%E8%BF%9C%E7%A8%8B%E8%B0%83%E7%94%A8/gRPC.html" class="nav-link" aria-label="è¿œç¨‹è°ƒç”¨"><span class="icon iconfont icon-rpc"></span>è¿œç¨‹è°ƒç”¨<!----></a></li><li class="dropdown-subitem"><a href="/python/%E7%94%9F%E6%80%81/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka.html" class="nav-link" aria-label="æ¶ˆæ¯é˜Ÿåˆ—"><span class="icon iconfont icon-kafka"></span>æ¶ˆæ¯é˜Ÿåˆ—<!----></a></li><li class="dropdown-subitem"><a href="/python/%E7%94%9F%E6%80%81/%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/Celery.html" class="nav-link" aria-label="å¼‚æ­¥ä»»åŠ¡"><span class="icon iconfont icon-tasks"></span>å¼‚æ­¥ä»»åŠ¡<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="æ•°æ®åº“"><span class="title"><span class="icon iconfont icon-database"></span>æ•°æ®åº“</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/database/etcd/etcd.html" class="nav-link" aria-label="etcd"><span class="icon iconfont icon-etcd"></span>etcd<!----></a></li><li class="dropdown-item"><a href="/database/MySQL/MySQL.html" class="nav-link" aria-label="MySQL"><span class="icon iconfont icon-mysql"></span>MySQL<!----></a></li><li class="dropdown-item"><a href="/database/Redis/redis.html" class="nav-link" aria-label="Redis"><span class="icon iconfont icon-redis"></span>Redis<!----></a></li><li class="dropdown-item"><a href="/database/PostgreSQL/PostgreSQL.html" class="nav-link" aria-label="PostgreSQL"><span class="icon iconfont icon-postgresql"></span>PostgreSQL<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="æ“ä½œç³»ç»Ÿ"><span class="title"><span class="icon iconfont icon-os"></span>æ“ä½œç³»ç»Ÿ</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/unix/Linux/Linux%E5%9F%BA%E7%A1%80%E6%8C%87%E5%BC%95/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%A6%82%E8%AE%BA.html" class="nav-link" aria-label="Linux"><span class="icon iconfont icon-linux"></span>Linux<!----></a></li><li class="dropdown-item"><a href="/unix/CentOS/%E5%AE%89%E8%A3%85/CentOS%E7%9A%84%E5%AE%89%E8%A3%85.html" class="nav-link" aria-label="CentOS"><span class="icon iconfont icon-centos"></span>CentOS<!----></a></li><li class="dropdown-item"><a href="/unix/Ubuntu/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/Ubuntu%E7%B3%BB%E5%88%97%E6%93%8D%E4%BD%9C.html" class="nav-link" aria-label="Ubuntu"><span class="icon iconfont icon-ubuntu"></span>Ubuntu<!----></a></li><li class="dropdown-item"><a href="/unix/%E8%99%9A%E6%8B%9F%E6%9C%BA/PVE/PVE.html" class="nav-link" aria-label="è™šæ‹Ÿæœº"><span class="icon iconfont icon-pve"></span>è™šæ‹Ÿæœº<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="è¿ç»´å·¥å…·"><span class="title"><span class="icon iconfont icon-devops"></span>è¿ç»´å·¥å…·</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/tool/Git/Git.html" class="nav-link" aria-label="Git"><span class="icon iconfont icon-git"></span>Git<!----></a></li><li class="dropdown-item"><a href="/tool/Nginx/Nginx%E5%9F%BA%E7%A1%80.html" class="nav-link" aria-label="Nginx"><span class="icon iconfont icon-nginx"></span>Nginx<!----></a></li><li class="dropdown-item"><a href="/tool/Docker/docker%E5%AE%B9%E5%99%A8.html" class="nav-link" aria-label="Docker"><span class="icon iconfont icon-docker"></span>Docker<!----></a></li><li class="dropdown-item"><a href="/tool/Kubernetes/k8s%E8%B5%84%E6%BA%90Pod.html" class="nav-link" aria-label="Kubernetes"><span class="icon iconfont icon-kubernetes"></span>Kubernetes<!----></a></li><li class="dropdown-item"><a href="/tool/Other/%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86.html" class="nav-link" aria-label="å·¥å…·"><span class="icon iconfont icon-other"></span>å·¥å…·<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="æ¼«æ¼«å…¨å¹²å·çš„è‹¦"><span class="title"><!---->æ¼«æ¼«å…¨å¹²å·çš„è‹¦</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="https://draveness.me/golang/" rel="noopener noreferrer" target="_blank" aria-label="GO" class="nav-link"><span class="icon iconfont icon-go"></span>GO<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://notes.fe-mm.com/interview/base/types.html" rel="noopener noreferrer" target="_blank" aria-label="å‰ç«¯å†…å·ä¸å½’è·¯" class="nav-link"><span class="icon iconfont icon-javascript"></span>å‰ç«¯å†…å·ä¸å½’è·¯<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li></ul></button></div></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/Igarashi-G" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!----><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><p class="sidebar-heading clickable active"><span class="icon iconfont icon-python"></span><a href="/python/" class="title">python</a><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-guide"></span><span class="title">è¯­è¨€</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">åŸºç¡€</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">è¿›é˜¶</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">æ·±å…¥</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6.html" class="nav-link sidebar-link sidebar-page" aria-label="åƒåœ¾å›æ”¶"><!---->åƒåœ¾å›æ”¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/%E5%BA%8F%E5%88%97%E8%BF%9B%E9%98%B6.html" class="nav-link sidebar-link sidebar-page" aria-label="åºåˆ—è¿›é˜¶"><!---->åºåˆ—è¿›é˜¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/%E6%98%A0%E5%B0%84%E8%BF%9B%E9%98%B6.html" class="nav-link sidebar-link sidebar-page" aria-label="æ˜ å°„è¿›é˜¶"><!---->æ˜ å°„è¿›é˜¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" class="nav-link sidebar-link sidebar-page" aria-label="è®¾è®¡æ¨¡å¼"><!---->è®¾è®¡æ¨¡å¼<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Cpython å¯¹è±¡"><!---->Cpython å¯¹è±¡<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#_1-python-å¯¹è±¡å®ç°æœºåˆ¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1. python å¯¹è±¡å®ç°æœºåˆ¶"><!---->1. python å¯¹è±¡å®ç°æœºåˆ¶<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#python-to-c-ç»“æ„ä½“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="python to C ç»“æ„ä½“"><!---->python to C ç»“æ„ä½“<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#è§£å†³é—®é¢˜" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è§£å†³é—®é¢˜"><!---->è§£å†³é—®é¢˜<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#_1-ç»“æ„ä½“ç©ºé—´é—®é¢˜" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.ç»“æ„ä½“ç©ºé—´é—®é¢˜"><!---->1.ç»“æ„ä½“ç©ºé—´é—®é¢˜<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#_2-python-æ•°æ®å¯¹è±¡çš„æ ¸å¿ƒåŸºçŸ³" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.python æ•°æ®å¯¹è±¡çš„æ ¸å¿ƒåŸºçŸ³"><!---->2.python æ•°æ®å¯¹è±¡çš„æ ¸å¿ƒåŸºçŸ³<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#æˆ‘ä»¬æ¥è°ˆè°ˆæŒ‡é’ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æˆ‘ä»¬æ¥è°ˆè°ˆæŒ‡é’ˆï¼š"><!---->æˆ‘ä»¬æ¥è°ˆè°ˆæŒ‡é’ˆï¼š<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#è¿åˆƒè€Œè§£" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è¿åˆƒè€Œè§£"><!---->è¿åˆƒè€Œè§£<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#_1ã€ä¸ºä»€ä¹ˆ-python-è¯­è¨€æ˜æ˜æ²¡æœ‰å˜é‡å£°æ˜-å´æ˜¯å¼ºç±»å‹è¯­è¨€-python-æ˜¯å¦‚ä½•æ£€æŸ¥ç±»å‹çš„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1ã€ä¸ºä»€ä¹ˆ python è¯­è¨€æ˜æ˜æ²¡æœ‰å˜é‡å£°æ˜ï¼Œå´æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Ÿpython æ˜¯å¦‚ä½•æ£€æŸ¥ç±»å‹çš„ï¼Ÿ"><!---->1ã€ä¸ºä»€ä¹ˆ python è¯­è¨€æ˜æ˜æ²¡æœ‰å˜é‡å£°æ˜ï¼Œå´æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Ÿpython æ˜¯å¦‚ä½•æ£€æŸ¥ç±»å‹çš„ï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#_2ã€ä¸ºä»€ä¹ˆ-list-dict-ç­‰å®¹å™¨å¯ä»¥éšæ„åµŒå¥—-å¦‚æ­¤çµæ´»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2ã€ä¸ºä»€ä¹ˆ listï¼Œdict ç­‰å®¹å™¨å¯ä»¥éšæ„åµŒå¥—ï¼Œå¦‚æ­¤çµæ´»ï¼Ÿ"><!---->2ã€ä¸ºä»€ä¹ˆ listï¼Œdict ç­‰å®¹å™¨å¯ä»¥éšæ„åµŒå¥—ï¼Œå¦‚æ­¤çµæ´»ï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#_3ã€ç±»çš„æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å®ƒè‡ªèº«-å¦‚ä½•å®ç°" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3ã€ç±»çš„æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å®ƒè‡ªèº«ï¼Œå¦‚ä½•å®ç°ï¼Ÿ"><!---->3ã€ç±»çš„æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å®ƒè‡ªèº«ï¼Œå¦‚ä½•å®ç°ï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#å…³äº-python-çš„ä¸€è‡´æ€§ã€‚" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å…³äº python çš„ä¸€è‡´æ€§ã€‚"><!---->å…³äº python çš„ä¸€è‡´æ€§ã€‚<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#ç„¶è€Œå°±å…¶æœ¬è´¨è€Œè¨€-è¿™äº›æ‰€è°“çš„ç‰¹æ®Šæ–¹æ³•å®é™…ä¸Šå¹¶æ²¡æœ‰ä»€ä¹ˆçœŸæ­£ç‰¹æ®Šçš„åœ°æ–¹ã€‚" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç„¶è€Œå°±å…¶æœ¬è´¨è€Œè¨€ï¼Œè¿™äº›æ‰€è°“çš„ç‰¹æ®Šæ–¹æ³•å®é™…ä¸Šå¹¶æ²¡æœ‰ä»€ä¹ˆçœŸæ­£ç‰¹æ®Šçš„åœ°æ–¹ã€‚"><!---->ç„¶è€Œå°±å…¶æœ¬è´¨è€Œè¨€ï¼Œè¿™äº›æ‰€è°“çš„ç‰¹æ®Šæ–¹æ³•å®é™…ä¸Šå¹¶æ²¡æœ‰ä»€ä¹ˆçœŸæ­£ç‰¹æ®Šçš„åœ°æ–¹ã€‚<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">ç½‘ç»œç¼–ç¨‹</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">å¤šä»»åŠ¡ç¼–ç¨‹</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">asyncio</span><span class="arrow right"></span></button><!----></section><!--]--></li></ul></section><!--]--></li></ul></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Cpython å¯¹è±¡</h1><div class="page-info"><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down" localizeddate="2022å¹´10æœˆ9æ—¥" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://github.com/Igarashi-G" target="_blank" rel="noopener noreferrer">äº”åå²š</a></span><span property="author" content="äº”åå²š"></span></span><!----><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022å¹´10æœˆ9æ—¥</span><meta property="datePublished" content="2022-10-09T12:42:17.000Z"></span><!----><!----><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down" localizeddate="2022å¹´10æœˆ9æ—¥" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 11 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT11M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#_1-python-å¯¹è±¡å®ç°æœºåˆ¶" class="router-link-active router-link-exact-active toc-link level2">1. python å¯¹è±¡å®ç°æœºåˆ¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#python-to-c-ç»“æ„ä½“" class="router-link-active router-link-exact-active toc-link level2">python to C ç»“æ„ä½“</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#è§£å†³é—®é¢˜" class="router-link-active router-link-exact-active toc-link level2">è§£å†³é—®é¢˜</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#_1-ç»“æ„ä½“ç©ºé—´é—®é¢˜" class="router-link-active router-link-exact-active toc-link level3">1.ç»“æ„ä½“ç©ºé—´é—®é¢˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#_2-python-æ•°æ®å¯¹è±¡çš„æ ¸å¿ƒåŸºçŸ³" class="router-link-active router-link-exact-active toc-link level3">2.python æ•°æ®å¯¹è±¡çš„æ ¸å¿ƒåŸºçŸ³</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#æˆ‘ä»¬æ¥è°ˆè°ˆæŒ‡é’ˆ" class="router-link-active router-link-exact-active toc-link level3">æˆ‘ä»¬æ¥è°ˆè°ˆæŒ‡é’ˆï¼š</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#è¿åˆƒè€Œè§£" class="router-link-active router-link-exact-active toc-link level2">è¿åˆƒè€Œè§£</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#_1ã€ä¸ºä»€ä¹ˆ-python-è¯­è¨€æ˜æ˜æ²¡æœ‰å˜é‡å£°æ˜-å´æ˜¯å¼ºç±»å‹è¯­è¨€-python-æ˜¯å¦‚ä½•æ£€æŸ¥ç±»å‹çš„" class="router-link-active router-link-exact-active toc-link level3">1ã€ä¸ºä»€ä¹ˆ python è¯­è¨€æ˜æ˜æ²¡æœ‰å˜é‡å£°æ˜ï¼Œå´æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Ÿpython æ˜¯å¦‚ä½•æ£€æŸ¥ç±»å‹çš„ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#_2ã€ä¸ºä»€ä¹ˆ-list-dict-ç­‰å®¹å™¨å¯ä»¥éšæ„åµŒå¥—-å¦‚æ­¤çµæ´»" class="router-link-active router-link-exact-active toc-link level3">2ã€ä¸ºä»€ä¹ˆ listï¼Œdict ç­‰å®¹å™¨å¯ä»¥éšæ„åµŒå¥—ï¼Œå¦‚æ­¤çµæ´»ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#_3ã€ç±»çš„æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å®ƒè‡ªèº«-å¦‚ä½•å®ç°" class="router-link-active router-link-exact-active toc-link level3">3ã€ç±»çš„æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å®ƒè‡ªèº«ï¼Œå¦‚ä½•å®ç°ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#å…³äº-python-çš„ä¸€è‡´æ€§ã€‚" class="router-link-active router-link-exact-active toc-link level3">å…³äº python çš„ä¸€è‡´æ€§ã€‚</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/Cpython%E5%AF%B9%E8%B1%A1.html#ç„¶è€Œå°±å…¶æœ¬è´¨è€Œè¨€-è¿™äº›æ‰€è°“çš„ç‰¹æ®Šæ–¹æ³•å®é™…ä¸Šå¹¶æ²¡æœ‰ä»€ä¹ˆçœŸæ­£ç‰¹æ®Šçš„åœ°æ–¹ã€‚" class="router-link-active router-link-exact-active toc-link level3">ç„¶è€Œå°±å…¶æœ¬è´¨è€Œè¨€ï¼Œè¿™äº›æ‰€è°“çš„ç‰¹æ®Šæ–¹æ³•å®é™…ä¸Šå¹¶æ²¡æœ‰ä»€ä¹ˆçœŸæ­£ç‰¹æ®Šçš„åœ°æ–¹ã€‚</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="cpython-å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#cpython-å¯¹è±¡" aria-hidden="true">#</a> Cpython å¯¹è±¡</h1><h2 id="_1-python-å¯¹è±¡å®ç°æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_1-python-å¯¹è±¡å®ç°æœºåˆ¶" aria-hidden="true">#</a> 1. python å¯¹è±¡å®ç°æœºåˆ¶</h2><p>åˆæ­¥ä»‹ç» python å¯¹è±¡çš„å®ç°æœºåˆ¶ã€‚</p><p>åœ¨é¡¶å±‚æŠ½è±¡ä¸Šï¼Œpython å¯¹è±¡æ˜¯å±æ€§ã€æ–¹æ³•ã€ä½œç”¨åŸŸçš„é›†åˆã€‚</p><p>åœ¨åº•å±‚å®ç°ä¸Šï¼Œpython å¯¹è±¡ä¸è¿‡å°±æ˜¯å¯¹ c è¯­è¨€ struct ç»“æ„çš„å°è£…ã€‚</p><h2 id="python-to-c-ç»“æ„ä½“" tabindex="-1"><a class="header-anchor" href="#python-to-c-ç»“æ„ä½“" aria-hidden="true">#</a> python to C ç»“æ„ä½“</h2><p>ä¸€ä¸ª python çš„ int ç±»å‹å¯å†™æˆå¦‚ä¸‹å½¢å¼</p><pre><code>class python_int(object):

    def __init__(self, value):
        self.value = value

    def add_fun(self, num):
        return self.value + num

    def mul_fun(self, num):
        return self.value * num

    def equal_fun(num):
        pass
</code></pre><p>å¯¹åº” C è¯­è¨€çš„ç»“æ„ä½“åº”è¯¥å¦‚ä¸‹ï¼š</p><pre><code>typedef struct _int {
    long value;
    long (*add_fun)(long a, long b);
    long (*mul_fun)(long a, long b);
    ```
}Int_object;
</code></pre><p>ä¸Šè¿°ä¾‹å­ï¼Œå¯ä»¥çœ‹å‡º C è¯­è¨€é€šè¿‡åˆ©ç”¨ç»“æ„ä½“ struct å’Œå‡½æ•°æŒ‡é’ˆå®Œæˆå¯¹è±¡çš„æ¨¡æ‹Ÿã€‚ å°½ç®¡åŠæ³•å¾ˆâ€˜åœŸâ€™ï¼Œä½†æˆ‘ä»¬å·²ç»åˆæ­¥æ­å¼€äº† python å¯¹è±¡è„¸ä¸Šçš„ä¸€å±‚é¢çº±ã€‚ å¯¹è±¡å°±æ˜¯ struct çš„å°è£…ï¼Œè¿™æ ·çš„æ€æƒ³å¯ä»¥å¸®ä½ ç†è§£å¾ˆå¤š python ä¸­éš¾ä»¥ç†è§£çš„é—®é¢˜ã€‚</p><h2 id="è§£å†³é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#è§£å†³é—®é¢˜" aria-hidden="true">#</a> è§£å†³é—®é¢˜</h2><p>å½“ç„¶ï¼Œè¿™æ ·è¿˜è¿œè¿œä¸å¤Ÿã€‚ä¾‹å¦‚ï¼š</p><p>1ã€æŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•ï¼Œå®ç°ä¸€ä¸ª python ä¸­çš„ int ç±»å‹å¯¹è±¡ï¼Œéœ€è¦ä¸€ä¸ªéå¸¸å¤§çš„ struct æ¥è£…ä¸‹ int çš„å€¼å’Œå¯ä»¥ä½œç”¨äºè¯¥å¯¹è±¡çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¤ªæµªè´¹ç©ºé—´äº†ã€‚ ï¼ˆè¿™é‡ŒæŒ‡ä¸€ä¸ªå¯¹è±¡å°±è¦å®ç°ä¸€ä¸ªç»“æ„ä½“ï¼Œæµªè´¹ç©ºé—´ï¼Œæ˜¯å¯¹è±¡ä¸æ˜¯ç±»ï¼‰</p><p>2ã€åœ¨ c è¯­è¨€ä¸­ï¼Œå‡½æ•°æŒ‡é’ˆçš„è¿”å›å€¼ç±»å‹ã€å‚æ•°ç±»å‹éƒ½éœ€è¦äº‹å…ˆå£°æ˜ã€‚åœ¨ python ä¸­æ— è®ºä¼ å…¥ä»€ä¹ˆç±»å‹éƒ½ä¸éœ€è¦å£°æ˜ï¼Œæ¯”å¦‚ str(3)ä¸ str(&#39;3&#39;)çš„ç»“æœå®Œå…¨ä¸€è‡´ã€‚</p><h3 id="_1-ç»“æ„ä½“ç©ºé—´é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_1-ç»“æ„ä½“ç©ºé—´é—®é¢˜" aria-hidden="true">#</a> 1.ç»“æ„ä½“ç©ºé—´é—®é¢˜</h3><p>python ç›¸åŒçš„ å†…å»ºç±»å‹ å¯¹åº”çš„æ–¹æ³•éƒ½æ˜¯ä¸€æ ·çš„ã€‚å€Ÿé‰´è®¾è®¡æ¨¡å¼çš„æ€æƒ³ï¼ŒæŠŠç±»å‹çš„å€¼ä¸ç±»å‹æ‰€æ‹¥æœ‰çš„æ–¹æ³•åˆ†å¼€ç»´æŠ¤ï¼Œæ‰€æœ‰ ç›¸åŒçš„ç±»å‹å¯¹è±¡ æŒ‡å‘ä¸€ä¸ª å…±åŒçš„æ–¹æ³• struct ç»“æ„ï¼Œè¿™æ ·ä¸€ä¸ªå¯¹è±¡å°±å¯ä»¥è¢«å‹ç¼©åˆ°å¾ˆå°äº†ã€‚</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>typedef struct _int{    # ä»£è¡¨ä¸‹æ–‡æ¯ä¸ªå¯¹è±¡
long value;
strcut _int_methods *methods;
} PyInt_Object;

typedef struct _int_methods{    # ä»£è¡¨ä¸‹æ–‡æ–¹æ³•æ—
    long (*add_fun)(long a, long b);
    long (*mul_fun)(long a, long b);
    ```
}Int_methods;
</code></pre><p>å› æ­¤å…³ç³»å˜ä¸ºï¼š</p><pre><code>intå¯¹è±¡1 â€”â€”â€”â€”
            |â€”â€”â€”â€”â€”â€”intå¯¹è±¡æ–¹æ³•æ—
intå¯¹è±¡2 â€”â€”â€”â€”
</code></pre><h3 id="_2-python-æ•°æ®å¯¹è±¡çš„æ ¸å¿ƒåŸºçŸ³" tabindex="-1"><a class="header-anchor" href="#_2-python-æ•°æ®å¯¹è±¡çš„æ ¸å¿ƒåŸºçŸ³" aria-hidden="true">#</a> 2.python æ•°æ®å¯¹è±¡çš„æ ¸å¿ƒåŸºçŸ³</h3><p>æ–¹æ¡ˆæ˜¯ï¼Œåœ¨ python çš„æ‰€æœ‰çš„ç±»å‹å¯¹è±¡ä¸­éƒ½æœ‰ç±»å‹ä¸€ä¸ªç±»å‹å±æ€§ type ï¼Œpython æ­£æ˜¯é ç€è¿™ä¸ªå±æ€§æ­£ç¡®åœ°åŒºåˆ†å®ƒä»¬ï¼Œåœ¨ python ä¸­ï¼Œå¯ä»¥ç”¨ type å‡½æ•°æ‰“å° ä»–ä»¬ã€‚</p><pre><code>print(type(1))
print(type(type(1)))
&lt;class &#39;int&#39;&gt;
&lt;class &#39;type&#39;&gt;
</code></pre><p>ä½ çŒœçš„æ²¡é”™ï¼Œtype æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ª python å¯¹è±¡ï¼Œæˆ–è€…è¯´ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå°è£…çš„ structã€‚ æ—¢ç„¶æ‰€æœ‰ç›¸åŒç±»å‹çš„å¯¹è±¡éƒ½å…·æœ‰å…±åŒçš„æ–¹æ³•ï¼Œé‚£ä¹ˆæŠŠ type å±æ€§ ä¸æ–¹æ³•ä»¬å°è£…åˆ°ä¸€ä¸ª struct ä¸­ä¹Ÿå°±æ˜¯ä¸€ä¸ªå¾ˆè‡ªç„¶çš„æƒ³æ³•äº†ã€‚ äº‹å®ä¸Šï¼Œpython ä¹Ÿæ­£æ˜¯è¿™ä¹ˆåšçš„ã€‚</p><p>è€Œåœ¨ python ä¸–ç•Œä¸­ï¼Œå¯¹è±¡ä»¬é™¤äº†â€˜æˆ‘æ˜¯è°â€™ï¼ˆtypeï¼‰è¿™ä¸ªé—®é¢˜ä¹‹å¤–ï¼Œè¿˜æœ‰å¦ä¸€ä¸ªæ›´é‡è¦çš„é—®é¢˜ç­‰ç€ä»–ä»¬ã€‚</p><p>â€˜æˆ‘è¿˜æ´»ç€å—ï¼Ÿâ€™</p><h4 id="è¡ç”Ÿ-åƒåœ¾å›æ”¶" tabindex="-1"><a class="header-anchor" href="#è¡ç”Ÿ-åƒåœ¾å›æ”¶" aria-hidden="true">#</a> è¡ç”Ÿï¼šåƒåœ¾å›æ”¶</h4><p>è¿™ä¸æ˜¯æç¬‘ï¼Œä¼—æ‰€å‘¨çŸ¥ï¼Œpython åƒåœ¾å›æ”¶é‡‡ç”¨äº†ä¸€ä¸ªç»å…¸çš„ï¼ˆè€åœŸçš„ï¼‰è®¾è®¡æ–¹æ³•--å¼•ç”¨è®¡æ•°ã€‚(è§ 3.2 åƒåœ¾å›æ”¶ï¼Œå¾ˆè€åœŸçš„æœºåˆ¶)</p><p>æ‰€æœ‰çš„ python å¯¹è±¡éƒ½è¦æœ‰ä¸€ä¸ªè®°å½•è‡ªå·±å¼•ç”¨è®¡æ•°çš„å±æ€§ï¼Œrefcntï¼Œ å½“ refcnt == 0 æ—¶ï¼Œæ„å‘³ç€æ²¡æœ‰ä»»ä½• python å˜é‡å¼•ç”¨è¯¥å¯¹è±¡ã€‚python ä¼šå°†è¯¥ å¯¹è±¡é”€æ¯ï¼Œä»¥å…ä»–ä»¬æˆä¸ºæ— ä¸»å¹½é­‚ï¼ˆå†…å­˜æ³„æ¼ï¼‰ã€‚</p><p>python ä¸­æ‰€æœ‰çš„å¯¹è±¡éƒ½å®ç°äº†è¿™ä¸¤ä¸ªå±æ€§ refcnt ä¸ typeï¼Œæ¢å¥è¯è¯´ï¼Œå®ç°äº†è¿™ä¸¤ä¸ªæˆå‘˜çš„ struct å˜é‡éƒ½æ˜¯ python ä¸­çš„å¯¹è±¡ã€‚ä»£ç å¦‚ä¸‹:</p><pre><code>typedef struct _object{
    int ob_refcnt;                        //å¼•ç”¨è®¡æ•°
    struct _typeobject *ob_type;         // ç±»å‹å¯¹è±¡
}PyObject;
</code></pre><p>è€Œä¹‹å‰æåˆ°çš„æ•´æ•°ç±»å‹ PyIntObject å®ç°å¦‚ä¸‹:</p><pre><code>typedef struct{
    int ob_refcnt;                        //å¼•ç”¨è®¡æ•°
    struct _typeobject *ob_type;         // ç±»å‹å¯¹è±¡
    long ob_ivalï¼›                        //intå¯¹è±¡ç»´æŠ¤çš„å€¼
} PyIntObjectï¼›
</code></pre><p>å¯ä»¥çœ‹åˆ° python ä¸­æ•´æ•°å¯¹è±¡ã€PyIntObject å°±æ˜¯åœ¨ PyObject çš„åŸºç¡€ä¸Šç»´æŠ¤äº†ä¸€ä¸ª long çš„å€¼ã€‚ï¼ˆå°±å¤šäº†ä¸ª int å¯¹è±¡ç»´æŠ¤çš„å€¼ï¼‰</p><p>è€Œè¿™ä¸ª PyObject æ˜¯ python å¯¹è±¡çš„æ ¸å¿ƒåŸºçŸ³ï¼Œä¹Ÿæ˜¯ python æœ€å¼ºå¤§çš„é­”æ³•æ¥æºä¹‹ä¸€ã€‚</p><p>python ä¸­æ‰€æœ‰çš„å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªè¿™æ ·çš„ PyObject å¤´ã€‚è¿™æ ·æˆ‘ä»¬å°±å¾ˆå¥½ç†è§£ï¼Œåœ¨ python ä¸­ï¼Œæ‰€æœ‰çš„å˜é‡ï¼Œæ‰€æœ‰çš„å‡½æ•°ï¼Œæ‰€æœ‰çš„ç±»ï¼Œå…¶å®éƒ½æ˜¯ PyObject å¯¹è±¡ã€‚</p><p>è€Œå‡½æ•°æ‰€æœ‰çš„è¾“å…¥ã€è¾“å‡ºï¼Œéƒ½æ˜¯ PyObject å¯¹è±¡Â·Â·Â·Â·Â·Â·Â·Â·Â·çš„æŒ‡é’ˆã€‚</p><h3 id="æˆ‘ä»¬æ¥è°ˆè°ˆæŒ‡é’ˆ" tabindex="-1"><a class="header-anchor" href="#æˆ‘ä»¬æ¥è°ˆè°ˆæŒ‡é’ˆ" aria-hidden="true">#</a> æˆ‘ä»¬æ¥è°ˆè°ˆæŒ‡é’ˆï¼š</h3><p>ä¸ºä»€ä¹ˆå¯¹è±¡çš„ struct æœ‰äº†å…±åŒçš„å¤´ï¼Œå°±å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªæŒ‡é’ˆï¼Ÿå¯¹ c è¯­è¨€äº†è§£ä¸æ·±çš„åŒå­¦å¯ä»¥çœ‹çœ‹æˆ‘çš„è§£é‡Šã€‚ åœ¨ c è¯­è¨€ä¸­ï¼ŒæŒ‡é’ˆæœ‰ç€ä¸‰ä¸ªä½œç”¨</p><ul><li><p>æŒ‡é’ˆæ‰€æŒ‡å¯¹è±¡çš„ä½ç½®</p></li><li><p>æŒ‡é’ˆæ‰€æŒ‡å¯¹è±¡çš„å¤§å°</p></li><li><p>æŒ‡é’ˆæ‰€æŒ‡å¯¹è±¡çš„è§£é‡Šæ–¹æ³•</p></li></ul><p>åˆ©ç”¨ä»»ä½• python å¯¹è±¡çš„ PyObject çš„æŒ‡é’ˆ *p, éƒ½å¯ä»¥é€šè¿‡ p-&gt;ob_type è·å¾—å¯¹è±¡çš„ç±»å‹ä¿¡æ¯ï¼Œpython å¯ä»¥æ ¹æ®è¿™ä¸ªæ›´æ¢æˆç›¸åº”çš„æŒ‡é’ˆï¼Œæ¯”å¦‚ *PyIntObjectã€‚</p><p>python çš„ type ç±»å‹åœ¨æºç ä¸­çš„å®šä¹‰ï¼ˆstruct ç»“æ„å£°æ˜ï¼‰å¦‚ä¸‹:</p><p>å¤ªé•¿äº†ï¼Œä½ ä»¬ä¸ç”¨å…¨éƒ¨éƒ½çœ‹(ËŠoÌ´Ì¶Ì·Ì¤âŒ„oÌ´Ì¶Ì·Ì¤Ë‹)ã€‚</p><pre><code>typedef struct _typeobject {
    int ob_refcnt;                        //å¼•ç”¨è®¡æ•°
    struct _typeobject *ob_type;          //ç±»å‹å¯¹è±¡
    int ob_size;                          //å˜é•¿å¯¹è±¡çš„é•¿åº¦ï¼Œå¦‚lenï¼ˆlistï¼‰ï¼Œ len(str), len(dict)ï¼Œintç±»å‹æ²¡æœ‰è¯¥å±æ€§
    const char *tp_name; /* For printing, in format &quot;&lt;module&gt;.&lt;name&gt;&quot; */   // å˜é‡çš„ç±»å‹åå­— å¦‚&lt;class &#39;int&#39;&gt;    &lt;class &#39;type&#39;&gt;
    Py_ssize_t tp_basicsize, tp_itemsize; /* For allocation */

    /* Methods to implement standard operations */

    destructor tp_dealloc;
    printfunc tp_print;
    getattrfunc tp_getattr;
    setattrfunc tp_setattr;
    cmpfunc tp_compare;
    reprfunc tp_repr;

    /* Method suites for standard classes */

    PyNumberMethods *tp_as_number;       //æ•°å­—ç±»å‹æ–¹æ³•æ—
    PySequenceMethods *tp_as_sequence;   //åºåˆ—ç±»å‹æ–¹æ³•æ—
    PyMappingMethods *tp_as_mapping;     //æ˜ å°„ç±»å‹æ–¹æ³•æ—

    /* More standard operations (here for binary compatibility) */

    hashfunc tp_hash;
    ternaryfunc tp_call;
    reprfunc tp_str;
    getattrofunc tp_getattro;
    setattrofunc tp_setattro;

    /* Functions to access object as input/output buffer */
    PyBufferProcs *tp_as_buffer;

    /* Flags to define presence of optional/expanded features */
    long tp_flags;

    const char *tp_doc; /* Documentation string */

    /* Assigned meaning in release 2.0 */
    /* call function for all accessible objects */
    traverseproc tp_traverse;

    /* delete references to contained objects */
    inquiry tp_clear;

    /* Assigned meaning in release 2.1 */
    /* rich comparisons */
    richcmpfunc tp_richcompare;

    /* weak reference enabler */
    Py_ssize_t tp_weaklistoffset;

    /* Added in release 2.2 */
    /* Iterators */
    getiterfunc tp_iter;
    iternextfunc tp_iternext;

    /* Attribute descriptor and subclassing stuff */
    struct PyMethodDef *tp_methods;
    struct PyMemberDef *tp_members;
    struct PyGetSetDef *tp_getset;
    struct _typeobject *tp_base;
    PyObject *tp_dict;
    descrgetfunc tp_descr_get;
    descrsetfunc tp_descr_set;
    Py_ssize_t tp_dictoffset;
    initproc tp_init;
    allocfunc tp_alloc;
    newfunc tp_new;
    freefunc tp_free; /* Low-level free-memory routine */
    inquiry tp_is_gc; /* For PyObject_IS_GC */
    PyObject *tp_bases;
    PyObject *tp_mro; /* method resolution order */
    PyObject *tp_cache;
    PyObject *tp_subclasses;
    PyObject *tp_weaklist;
    destructor tp_del;

    /* Type attribute cache version tag. Added in version 2.6 */
    unsigned int tp_version_tag;

#ifdef COUNT_ALLOCS
    /* these must be last and never explicitly initialized */
    Py_ssize_t tp_allocs;
    Py_ssize_t tp_frees;
    Py_ssize_t tp_maxalloc;
    struct _typeobject *tp_prev;
    struct _typeobject *tp_next;
#endif
} PyTypeObject;
</code></pre><p>è¿™ä¸ª PyTypeObject é‡Œå£°æ˜äº†æ‰€æœ‰ python å†…ç½®ç±»å‹çš„æ–¹æ³•ï¼Œæ‰€æœ‰çš„å†…ç½®ç±»å‹å®ç°çš„æ–¹æ³•éƒ½åªæ˜¯è¯¥å£°æ˜çš„ä¸€ä¸ªå­é›†ã€‚</p><p>å…¶ä¸­å°¤å…¶å€¼å¾—æ³¨æ„çš„æ˜¯å…¶ä¸­å£°æ˜çš„ä¸‰ä¸ªæ–¹æ³•æ—æŒ‡é’ˆ</p><pre><code>PyNumberMethods *tp_as_number;       //æ•°å­—ç±»å‹æ–¹æ³•æ—
PySequenceMethods *tp_as_sequence;   //åºåˆ—ç±»å‹æ–¹æ³•æ—
PyMappingMethods *tp_as_mapping;     //æ˜ å°„ç±»å‹æ–¹æ³•æ—
</code></pre><p>ä»–ä»¬æ¯ä¸€ä¸ªéƒ½ä»£è¡¨äº†è¯¥ç±»å‹çš„ä¸€ç³»åˆ—æ–¹æ³•ã€‚ è¿™ä¸‰ç±»ä¸åŒçš„æ–¹æ³•æ—å°±æ˜¯ python çš„å†…ç½®å¯¹è±¡è¢«åˆ’ä¸ºä¸‰å¤§ç±»çš„æ ¹æœ¬åŸå› ï¼Œæ•°å€¼ç±»å‹ã€åºåˆ—ç±»å‹ã€æ˜ å°„ç±»å‹ã€‚</p><p>æ¯”å¦‚ PyNumberMethods çš„ä»£ç å¦‚ä¸‹: (ä¹Ÿæ˜¯å¾ˆé•¿å¾ˆé•¿Â·Â·Â·)</p><pre><code>typedef struct {
    /* For numbers without flag bit Py_TPFLAGS_CHECKTYPES set, all
       arguments are guaranteed to be of the object&#39;s type (modulo
       coercion hacks -- i.e. if the type&#39;s coercion function
       returns other types, then these are allowed as well).  Numbers that
       have the Py_TPFLAGS_CHECKTYPES flag bit set should check *both*
       arguments for proper type and implement the necessary conversions
       in the slot functions themselves. */

    binaryfunc nb_add;            //åŠ æ³•
    binaryfunc nb_subtract;       //å‡æ³•
    binaryfunc nb_multiply;       //ä¹˜æ³•
    binaryfunc nb_divide;         //é™¤æ³•
    binaryfunc nb_remainder;      //æ±‚ä½™
    binaryfunc nb_divmod;
    ternaryfunc nb_power;
    unaryfunc nb_negative;
    unaryfunc nb_positive;
    unaryfunc nb_absolute;
    inquiry nb_nonzero;
    unaryfunc nb_invert;
    binaryfunc nb_lshift;
    binaryfunc nb_rshift;
    binaryfunc nb_and;
    binaryfunc nb_xor;
    binaryfunc nb_or;
    coercion nb_coerce;
    unaryfunc nb_int;
    unaryfunc nb_long;
    unaryfunc nb_float;
    unaryfunc nb_oct;
    unaryfunc nb_hex;
    /* Added in release 2.0 */
    binaryfunc nb_inplace_add;
    binaryfunc nb_inplace_subtract;
    binaryfunc nb_inplace_multiply;
    binaryfunc nb_inplace_divide;
    binaryfunc nb_inplace_remainder;
    ternaryfunc nb_inplace_power;
    binaryfunc nb_inplace_lshift;
    binaryfunc nb_inplace_rshift;
    binaryfunc nb_inplace_and;
    binaryfunc nb_inplace_xor;
    binaryfunc nb_inplace_or;

    /* Added in release 2.2 */
    /* The following require the Py_TPFLAGS_HAVE_CLASS flag */
    binaryfunc nb_floor_divide;
    binaryfunc nb_true_divide;
    binaryfunc nb_inplace_floor_divide;
    binaryfunc nb_inplace_true_divide;

    /* Added in release 2.5 */
    unaryfunc nb_index;
} PyNumberMethods;
</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼ŒPyNumberMethods æ²¡æœ‰ PyObject å¤´ï¼Œå®ƒæ²¡æœ‰å›ç­” python å¯¹è±¡çš„ä¸¤ä¸ªå…³é”®é—®é¢˜ï¼Œæ‰€ä»¥å°½ç®¡ä»–ä¹Ÿæ˜¯ struct ç»“æ„ä½“ï¼Œä½†å®ƒä¸æ˜¯ python å¯¹è±¡ã€‚</p><p>é‚£ä¹ˆåœ¨æˆ‘ä»¬çš„ python ä¸­ï¼Œæ•´æ•°ç±»å‹å¯¹è±¡å®ç°å¦‚ä¸‹ PyInt_Typeï¼š</p><pre><code>PyTypeObject PyInt_Type = {
    1ï¼›             //å¼•ç”¨è®¡æ•°
    typeï¼›          //ç±»å‹
    &quot;int&quot;,
    sizeof(PyIntObject),
    0,
    (destructor)int_dealloc,                    /* tp_dealloc */
    (printfunc)int_print,                       /* tp_print */
    0,                                          /* tp_getattr */
    0,                                          /* tp_setattr */
    (cmpfunc)int_compare,                       /* tp_compare */
    (reprfunc)int_to_decimal_string,
    &amp;int_as_number,                             //æ•°å­—ç±»å‹æ–¹æ³•æ—
    0,                                          //åºåˆ—ç±»å‹æ–¹æ³•æ—
    0,                                          /* tp_as_mapping */æ˜ å°„ç±»å‹æ–¹æ³•æ—
    (hashfunc)int_hash,                         /* tp_hash */
    0,                                          /* tp_call */
    (reprfunc)int_to_decimal_string,            /* tp_str */
    PyObject_GenericGetAttr,                    /* tp_getattro */
    0,                                          /* tp_setattro */
    0,                                          /* tp_as_buffer */
    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_CHECKTYPES |
        Py_TPFLAGS_BASETYPE | Py_TPFLAGS_INT_SUBCLASS,          /* tp_flags */
    int_doc,                                    /* tp_doc */
    0,                                          /* tp_traverse */
    0,                                          /* tp_clear */
    0,                                          /* tp_richcompare */
    0,                                          /* tp_weaklistoffset */
    0,                                          /* tp_iter */
    0,                                          /* tp_iternext */
    int_methods,                                /* tp_methods */
    0,                                          /* tp_members */
    int_getset,                                 /* tp_getset */
    0,                                          /* tp_base */
    0,                                          /* tp_dict */
    0,                                          /* tp_descr_get */
    0,                                          /* tp_descr_set */
    0,                                          /* tp_dictoffset */
    0,                                          /* tp_init */
    0,                                          /* tp_alloc */
    int_new,                                    /* tp_new */
};
</code></pre><p>ä¹Ÿä¸éœ€è¦å…¨éƒ¨çœ‹ï¼Œåªè¦çœ‹åˆ°é‚£äº›ä¸€å¤§å † 0ï¼Œæˆ‘æƒ³ä½ å°±åº”è¯¥å·®ä¸å¤šæ˜ç™½äº†ï¼ŒPyInt_Type æ˜¯ PyTypeObject ç»“æ„ä½“å£°æ˜å®ç°ä¸€ä¸ªç»“æ„å˜é‡ï¼Œåªå®ç°äº†æ‰€æœ‰ æ–¹æ³•çš„ä¸€éƒ¨åˆ†ï¼Œè¿™ä¹Ÿç¬¦åˆæˆ‘ä»¬å¯¹ python çš„è®¤çŸ¥ï¼Œä½ å½“ç„¶ä¸åº”è¯¥è¿™æ ·å†™ä»£ç </p><p>5[6]</p><p>å› ä¸º PyInt_Type æ²¡æœ‰å®ç°åºåˆ—æ–¹æ³•æ—ã€‚ï¼ˆåœ¨åºåˆ—æ–¹æ³•æ—ä¸æ˜ å°„æ–¹æ³•æ—çš„ä¸¤è¡Œä¸Šï¼Œå…¨éƒ½æ˜¯ 0ï¼Œä»£ç ä¸­æˆ‘å·²ç»ä½¿ç”¨ä¸­æ–‡æ ‡æ³¨å‡ºæ¥äº†ï¼‰</p><p>åè€Œè¨€ä¹‹ï¼Œå¦‚æœ PyInt_Type å®ç°äº†åºåˆ—æ–¹æ³•æ—ï¼Œä»£ç å°±å¯ä»¥è¿™æ ·å†™äº†ã€‚</p><p>5[6]</p><p>è‡³äºç»“æœå¦‚ä½•ï¼Œå…¨çœ‹ä½ è‡ªå·±å–œæ¬¢å¦‚ä½•å®šä¹‰å’¯ã€‚</p><h2 id="è¿åˆƒè€Œè§£" tabindex="-1"><a class="header-anchor" href="#è¿åˆƒè€Œè§£" aria-hidden="true">#</a> è¿åˆƒè€Œè§£</h2><p>ç†è§£äº† python å¯¹è±¡åœ¨ c è¯­è¨€æºç ä¸­çš„å®ç°æ–¹å¼ï¼Œè®¸å¤šé—®é¢˜éƒ½å°†è¿åˆƒè€Œè§£ã€‚</p><h3 id="_1ã€ä¸ºä»€ä¹ˆ-python-è¯­è¨€æ˜æ˜æ²¡æœ‰å˜é‡å£°æ˜-å´æ˜¯å¼ºç±»å‹è¯­è¨€-python-æ˜¯å¦‚ä½•æ£€æŸ¥ç±»å‹çš„" tabindex="-1"><a class="header-anchor" href="#_1ã€ä¸ºä»€ä¹ˆ-python-è¯­è¨€æ˜æ˜æ²¡æœ‰å˜é‡å£°æ˜-å´æ˜¯å¼ºç±»å‹è¯­è¨€-python-æ˜¯å¦‚ä½•æ£€æŸ¥ç±»å‹çš„" aria-hidden="true">#</a> 1ã€ä¸ºä»€ä¹ˆ python è¯­è¨€æ˜æ˜æ²¡æœ‰å˜é‡å£°æ˜ï¼Œå´æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Ÿpython æ˜¯å¦‚ä½•æ£€æŸ¥ç±»å‹çš„ï¼Ÿ</h3><p>å› ä¸º python è¯­è¨€å¯ä»¥é€šè¿‡å¯¹è±¡çš„ PyObject æŒ‡é’ˆè·å¾—ä»–ä»¬ç±»å‹ä¿¡æ¯ï¼Œä»è€Œæ£€æŸ¥ä»–ä»¬çš„ç±»å‹ã€‚åè§‚ c è¯­è¨€ï¼Œå°½ç®¡æœ‰ç±»å‹å£°æ˜ï¼Œç„¶è€Œ c è¯­è¨€å¹¶æ²¡æœ‰æ£€æŸ¥ä»–ä»¬ å˜é‡ç±»å‹çš„æ‰‹æ®µï¼Œæˆ–è€…æ¢å¥è¯è¯´ï¼Œc è¯­è¨€ä¸­å­˜å‚¨çš„å€¼ä¸è®°å½•ä»–ä»¬è‡ªèº«çš„ç±»å‹ä¿¡æ¯ã€‚</p><h3 id="_2ã€ä¸ºä»€ä¹ˆ-list-dict-ç­‰å®¹å™¨å¯ä»¥éšæ„åµŒå¥—-å¦‚æ­¤çµæ´»" tabindex="-1"><a class="header-anchor" href="#_2ã€ä¸ºä»€ä¹ˆ-list-dict-ç­‰å®¹å™¨å¯ä»¥éšæ„åµŒå¥—-å¦‚æ­¤çµæ´»" aria-hidden="true">#</a> 2ã€ä¸ºä»€ä¹ˆ listï¼Œdict ç­‰å®¹å™¨å¯ä»¥éšæ„åµŒå¥—ï¼Œå¦‚æ­¤çµæ´»ï¼Ÿ</h3><p>å› ä¸ºå¯¹äºè¿™äº›å®¹å™¨æ¥è¯´ï¼Œä»–ä»¬å­˜æ”¾çš„åªæ˜¯å¯¹è±¡å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯ PyObject æŒ‡é’ˆï¼Œæ— è®ºå­˜æ”¾ä»€ä¹ˆå¯¹è±¡å¯¹å®¹å™¨æ¥è¯´æ¯«æ— åŒºåˆ«ã€‚ä¸éš¾çŒœæƒ³ï¼Œç®€å•åœ°åˆ©ç”¨ c è¯­è¨€ä¸­çš„ æ•°ç»„ï¼Œå°±å¯ä»¥å®ç° python ä¸­çš„ listã€‚</p><h3 id="_3ã€ç±»çš„æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å®ƒè‡ªèº«-å¦‚ä½•å®ç°" tabindex="-1"><a class="header-anchor" href="#_3ã€ç±»çš„æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å®ƒè‡ªèº«-å¦‚ä½•å®ç°" aria-hidden="true">#</a> 3ã€ç±»çš„æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å®ƒè‡ªèº«ï¼Œå¦‚ä½•å®ç°ï¼Ÿ</h3><p>ç®€å•å•Šï¼Œåœ¨æ–¹æ³•çš„ struct ä¸­åŠ ä¸€ä¸ªè®°å½• è‡ªå·±æ‰€å±ç±» çš„ æˆå‘˜å˜é‡ å°±å¯ä»¥äº†ã€‚</p><h3 id="å…³äº-python-çš„ä¸€è‡´æ€§ã€‚" tabindex="-1"><a class="header-anchor" href="#å…³äº-python-çš„ä¸€è‡´æ€§ã€‚" aria-hidden="true">#</a> å…³äº python çš„ä¸€è‡´æ€§ã€‚</h3><p>åœ¨ã€Šæµç•…çš„ pythonã€‹ä¸€ä¹¦ä¸­ï¼Œä½œè€…å¼€ç¯‡å°±æ˜¯</p><pre><code>â€œpythonæœ€å¥½çš„å“è´¨ä¹‹ä¸€å°±æ˜¯ä¸€è‡´æ€§ã€‚â€
</code></pre><p>è€Œåœ¨è¯¥ä¹¦çš„å°åº•åˆ™å†™ç€</p><pre><code>â€œç†è§£ä¸ºä»€ä¹ˆç‰¹æ®Šæ–¹æ³•æ˜¯å¯¹è±¡è¡Œä¸ºçš„ä¸€ç›´çš„å…³é”®â€ã€‚
</code></pre><p>è¯»å®Œæ­¤æ–‡ä¹‹åï¼Œç›¸ä¿¡ä½ å·²ç»ç†è§£äº†è¿™å¥è¯çš„å«ä¹‰äº†ï¼Œå¹¶ä¸”äº†è§£äº†æ‰€è°“çš„ä¸€è‡´æ€§æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p><p>æ‰€è°“çš„ç‰¹æ®Šæ–¹æ³•ï¼Œå°±æ˜¯ PyTypeObject ä¸­æ‰€ç»™å‡ºçš„é‚£ä¸€å¤§ä¸²é•¿é•¿çš„æ–¹æ³•ã€‚</p><p>ä»–ä»¬å°±åƒæ˜¯ python èµ ä¸ä½¿ç”¨è€…çš„æ­¦å™¨åº“ï¼Œpython ä¸æŠŠå®ƒä»¬é›ªè—èµ·æ¥ï¼Œè€Œæ˜¯å¤§å¤§æ–¹æ–¹å‘æˆ‘ä»¬åœ°æ•å¼€ï¼Œä½ å¯ä»¥éšæ„æŒ‘é€‰åˆé€‚çš„æ­¦å™¨æ­¦è£…è‡ªå·±ã€‚è·å¾—ä¸ python å†…ç½®ç±»å‹ååˆ†ç›¸ä¼¼çš„å±æ€§ã€‚</p><h3 id="ç„¶è€Œå°±å…¶æœ¬è´¨è€Œè¨€-è¿™äº›æ‰€è°“çš„ç‰¹æ®Šæ–¹æ³•å®é™…ä¸Šå¹¶æ²¡æœ‰ä»€ä¹ˆçœŸæ­£ç‰¹æ®Šçš„åœ°æ–¹ã€‚" tabindex="-1"><a class="header-anchor" href="#ç„¶è€Œå°±å…¶æœ¬è´¨è€Œè¨€-è¿™äº›æ‰€è°“çš„ç‰¹æ®Šæ–¹æ³•å®é™…ä¸Šå¹¶æ²¡æœ‰ä»€ä¹ˆçœŸæ­£ç‰¹æ®Šçš„åœ°æ–¹ã€‚" aria-hidden="true">#</a> ç„¶è€Œå°±å…¶æœ¬è´¨è€Œè¨€ï¼Œè¿™äº›æ‰€è°“çš„ç‰¹æ®Šæ–¹æ³•å®é™…ä¸Šå¹¶æ²¡æœ‰ä»€ä¹ˆçœŸæ­£ç‰¹æ®Šçš„åœ°æ–¹ã€‚</h3><p>ä¸€ä¸ªç±»ï¼Œåªè¦ä½ å®ç°äº†<strong>getitem</strong>æ–¹æ³•ï¼Œå°±å¯ä»¥ä½¿ç”¨[]æ“ä½œç¬¦ï¼Œæ¢å¥è¯è¯´ A[b]ä¸ A.<strong>getitem</strong>(b)æ™®é€šå‡½æ•°è°ƒç”¨åˆ«æ— äºŒè‡´,åªæ˜¯ python æä¾›ç»™ä½¿ç”¨ è€…çš„è¯­æ³•ç³–è€Œå·²ã€‚</p><pre><code>class A(object):
    def __init__(self, value):
        self.value = value

    def __getitem__(self, item):
        return self.value + item

a = A(5)
print(&quot;a[6] = &quot;, a[6])

for i in a:
    if i &gt; 10:
        break;
    print(i)

if 1000 in a:   # è¿™é‡Œ in çš„å®è´¨ä¼šè¿›è¡Œéå†ï¼Œä¼šå»è°ƒç”¨ a[0]ã€a[1]ã€a[2]ã€a[3]ã€a[4] ... a[995] ç›´åˆ°å åŠ åˆ°1000ï¼Œæ‰©å¤§æ•°å­—è¯•è¯•
    print(&quot;1000å­˜å‚¨åœ¨å¯¹è±¡aä¸­&quot;)
</code></pre><p>ã€æ³¨ã€‘ï¼š.<strong>getitem</strong>() ä¸»è¦å®ç°äº†å¯¹è±¡è¿­ä»£åŠŸèƒ½, è‹¥æœ‰ li = [2, 3, 4] å½“ li[key] æ—¶ åˆ™è°ƒç”¨<strong>getitem</strong>(self,item) item å°±æ˜¯ä¼ å…¥çš„ key</p><p>a æ˜æ˜ä¸æ˜¯ä¸€ä¸ªåºåˆ—ï¼Œä»–å……å…¶é‡å­˜å‚¨äº†ä¸€ä¸ªæ•´æ•°å€¼è€Œå·²ï¼Œç„¶è€Œåªè¦æˆ‘ä»¬å®ç°äº†<strong>getitem</strong>æ–¹æ³•å°±å¯ä»¥è½»æ¾éª—è¿‡ pythonï¼Œå®ƒç”šè‡³è¿˜å‚»ä¹ä¹åœ°è®¤ä¸º a ä¸­å­˜å‚¨äº† 1000 å‘¢ã€‚</p><p>äº†è§£è¿™äº›å¹¶ä¸æ˜¯ä¸ºäº†é¼“åŠ±ä½ ä»¬å†™å‡ºè¿™æ ·çš„ä»£ç ï¼Œè€Œæ˜¯è®©ä½ ä»¬äº†è§£æ‰€è°“çš„ç‰¹æ®Šæ–¹æ³•åªä¸è¿‡æ˜¯ python çš„è¯­æ³•ç³–è€Œå·²ï¼Œå¹¶ä¸ç‰¹æ®Šã€‚</p><p>é™¤äº†è¯­æ³•ç³–ä¹‹å¤–ï¼Œæˆ‘è®¤ä¸ºç‰¹æ®Šæ–¹æ³•çš„å¦ä¸€é‡æ›´é‡è¦å«ä¹‰æ˜¯ç¨‹åºå‘˜ä¹‹é—´çš„çº¦å®šä¿—æˆã€‚</p><p>ã€æ³¨æ„ã€‘ï¼šå½“ä½ ä¸ºä¸€ä¸ªç±»å®ç°äº† <strong>getitem</strong> æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒå°±åº”è¯¥æ˜¯ä¸€ä¸ªåºåˆ—ï¼Œæˆ–è€…è¯´è‡³å°‘å¯ä»¥è¢«å½“ä½œåºåˆ—æ¥çœ‹å¾…(å‚è€ƒä»€ä¹ˆæ˜¯é¸­å­ç±»å‹)ï¼Œé‚£ä½ ä¹Ÿ åº”è¯¥å®ç°å®ƒ <strong>len</strong> æ–¹æ³•ã€‚ä¸Šé¢è¿™ä¸ªç±»æ˜¯ä¸èƒ½ä½¿ç”¨ len(a)çš„ï¼Œè¿™ä¸ç¬¦åˆæˆ‘ä»¬å¯¹åºåˆ—çš„æœŸå¾…ã€‚</p><p>python çš„ä¸€è‡´æ€§æ˜¯ç”±ç¨‹åºå‘˜ä¹‹é—´çš„çº¦å®šä¿—æˆå…±åŒç»´æŠ¤çš„ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæœ‰äººè¯´ï¼š</p><pre><code>â€œåœ¨pythoné‡Œç§è‡ªå–å__ï¼ˆåŒä¸‹åˆ’çº¿ï¼‰å¼€å¤´çš„å‡½æ•°æ˜¯éå¸¸è‡ªç§çš„è¡Œä¸º.â€
</code></pre><p>äº†è§£è§„åˆ™çš„è¾¹ç•Œï¼Œæ˜¯ä¸ºäº†æ›´å¥½åœ°åˆ©ç”¨å®ƒï¼Œè€Œä¸æ˜¯ç ´åå®ƒã€‚</p><p>ps: çœŸæ­£çš„ PyObject å¯¹è±¡å·²ç»å˜æˆäº†è¿™æ ·ï¼š</p><pre><code>typedef struct _object{
    struct _object *_ob_next;
    struct _object *_ob_prev;
    int ob_refcnt;                        //å¼•ç”¨è®¡æ•°
    struct _typeobject *ob_type;         // ç±»å‹å¯¹è±¡
}PyObject;
</code></pre><p>æ–°åŠ å…¥çš„ä¸¤ä¸ªæŒ‡é’ˆæ˜¯åœ¨å­˜æ´»çš„å¯¹è±¡ä¹‹é—´æ„æˆä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œæ–¹ä¾¿è°ƒè¯•ï¼Œä¸æœ¬æ–‡ä¸»é¢˜æ— å…³ï¼Œæ•…çœå»ã€‚</p><p>è¿™ç¯‡æ–‡ç« æ˜¯å¼•ç”¨äº <a href="https://zhuanlan.zhihu.com/p/34410799" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/34410799<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> åœ¨ä¸‹å—æ•™ le</p><p>ç»­ï¼š æºç è¯» pythonï¼ˆäºŒï¼‰ï¼šå†…å­˜ä¸­çš„ python å¯¹è±¡ï¼š <a href="https://zhuanlan.zhihu.com/p/34498622" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/34498622<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æºç è¯» pythonï¼ˆä¸‰ï¼‰â€”Int æ•´æ•°ç±»å‹æ¢ç§˜ï¼š <a href="https://zhuanlan.zhihu.com/p/34593593" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/34593593<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><!----><footer class="page-meta"><!----><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="info">2022/10/9 12:42:17</span></div><!----></footer><nav class="page-nav"><a href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" class="nav-link prev" aria-label="è®¾è®¡æ¨¡å¼"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->è®¾è®¡æ¨¡å¼</div></a><!----></nav><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">é»˜è®¤é¡µè„š</div><div class="copyright">Copyright Â© 2022 äº”åå²š</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.5e415dd8.js" defer></script>
  </body>
</html>
