<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.21" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.82" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"å¼‚æ­¥ç¼–ç¨‹å²å›æº¯","image":[""],"dateModified":"2022-10-08T01:58:06.000Z","author":[{"@type":"Person","name":"æ‚¦Â·å®å®","url":"https://github.com/Igarashi-G"}]}</script><meta property="og:url" content="https://igarashi-g.github.io/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html"><meta property="og:site_name" content="æ‚¦ â–ª å®å®"><meta property="og:title" content="å¼‚æ­¥ç¼–ç¨‹å²å›æº¯"><meta property="og:description" content="å¼‚æ­¥ç¼–ç¨‹å²å›æº¯ å›æº¯ ä¸€ã€ç¨‹åºæ‰§è¡ŒåŸºç¡€æ¦‚å¿µï¼š 1.1 é˜»å¡ ç¨‹åºæœªå¾—åˆ°æ‰€éœ€è®¡ç®—èµ„æºæ—¶è¢«æŒ‚èµ·çš„çŠ¶æ€ã€‚ ç¨‹åºåœ¨ç­‰å¾…æŸä¸ªæ“ä½œå®ŒæˆæœŸé—´ï¼Œè‡ªèº«æ— æ³•ç»§ç»­å¹²åˆ«çš„äº‹æƒ…ï¼Œåˆ™ç§°è¯¥ç¨‹åºåœ¨è¯¥æ“ä½œä¸Šæ˜¯é˜»å¡çš„ã€‚ å¸¸è§çš„é˜»å¡å½¢å¼æœ‰ï¼šç½‘ç»œ I/O é˜»å¡ã€ç£ç›˜ I/O é˜»å¡ã€ç”¨æˆ·è¾“å…¥é˜»å¡ç­‰ã€‚ é˜»å¡æ˜¯æ— å¤„ä¸åœ¨çš„ï¼ŒåŒ…æ‹¬ CPU åˆ‡æ¢ä¸Šä¸‹æ–‡æ—¶ï¼Œæ‰€æœ‰çš„è¿›ç¨‹éƒ½æ— æ³•çœŸæ­£å¹²äº‹æƒ…ï¼Œå®ƒä»¬ä¹Ÿä¼šè¢«é˜»å¡ã€‚ï¼ˆå¦‚..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2022-10-08T01:58:06.000Z"><meta property="article:modified_time" content="2022-10-08T01:58:06.000Z"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_3654399_e6xix4avjkd.css"><title>å¼‚æ­¥ç¼–ç¨‹å²å›æº¯ | æ‚¦ â–ª å®å®</title><meta name="description" content="å¼‚æ­¥ç¼–ç¨‹å²å›æº¯ å›æº¯ ä¸€ã€ç¨‹åºæ‰§è¡ŒåŸºç¡€æ¦‚å¿µï¼š 1.1 é˜»å¡ ç¨‹åºæœªå¾—åˆ°æ‰€éœ€è®¡ç®—èµ„æºæ—¶è¢«æŒ‚èµ·çš„çŠ¶æ€ã€‚ ç¨‹åºåœ¨ç­‰å¾…æŸä¸ªæ“ä½œå®ŒæˆæœŸé—´ï¼Œè‡ªèº«æ— æ³•ç»§ç»­å¹²åˆ«çš„äº‹æƒ…ï¼Œåˆ™ç§°è¯¥ç¨‹åºåœ¨è¯¥æ“ä½œä¸Šæ˜¯é˜»å¡çš„ã€‚ å¸¸è§çš„é˜»å¡å½¢å¼æœ‰ï¼šç½‘ç»œ I/O é˜»å¡ã€ç£ç›˜ I/O é˜»å¡ã€ç”¨æˆ·è¾“å…¥é˜»å¡ç­‰ã€‚ é˜»å¡æ˜¯æ— å¤„ä¸åœ¨çš„ï¼ŒåŒ…æ‹¬ CPU åˆ‡æ¢ä¸Šä¸‹æ–‡æ—¶ï¼Œæ‰€æœ‰çš„è¿›ç¨‹éƒ½æ— æ³•çœŸæ­£å¹²äº‹æƒ…ï¼Œå®ƒä»¬ä¹Ÿä¼šè¢«é˜»å¡ã€‚ï¼ˆå¦‚...">
    <link rel="preload" href="/assets/style-DCFqVXmA.css" as="style"><link rel="stylesheet" href="/assets/style-DCFqVXmA.css">
    <link rel="modulepreload" href="/assets/app-DS5-vXX9.js"><link rel="modulepreload" href="/assets/å¼‚æ­¥å›æº¯.html-CLRfZ-4L.js"><link rel="modulepreload" href="/assets/plugin-vueexport-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-BGEKk2IQ.js" as="script"><link rel="prefetch" href="/assets/home.html-C7ndluGY.js" as="script"><link rel="prefetch" href="/assets/intro.html-sLQiTkny.js" as="script"><link rel="prefetch" href="/assets/slides.html-5FmQYLDf.js" as="script"><link rel="prefetch" href="/assets/index.html-BMrgbtky.js" as="script"><link rel="prefetch" href="/assets/index.html-DXTmtnGT.js" as="script"><link rel="prefetch" href="/assets/disable.html-DMNol6Ls.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-KMtNDAdY.js" as="script"><link rel="prefetch" href="/assets/markdown.html-VmLnXiTf.js" as="script"><link rel="prefetch" href="/assets/page.html-CKMErTIS.js" as="script"><link rel="prefetch" href="/assets/PSæ“ä½œåŸºç¡€.html-Bd-vt1IP.js" as="script"><link rel="prefetch" href="/assets/index.html-DcUqxoSL.js" as="script"><link rel="prefetch" href="/assets/SAIæ“ä½œåŸºç¡€.html-CD_butIK.js" as="script"><link rel="prefetch" href="/assets/index.html-D4Apa8cS.js" as="script"><link rel="prefetch" href="/assets/index.html-Bu85Abic.js" as="script"><link rel="prefetch" href="/assets/asyncio_recipes.html-2C4JrxSh.js" as="script"><link rel="prefetch" href="/assets/devops_in_python.html-CYel8uj_.js" as="script"><link rel="prefetch" href="/assets/fluent_python.html-rT5DY1l_.js" as="script"><link rel="prefetch" href="/assets/index.html-B7cjZgub.js" as="script"><link rel="prefetch" href="/assets/python_cookbook.html-CLasWZW-.js" as="script"><link rel="prefetch" href="/assets/pythonæºç å‰–æ.html-7nld-Ggb.js" as="script"><link rel="prefetch" href="/assets/use_asyncio.html-BE4Bp_7W.js" as="script"><link rel="prefetch" href="/assets/index.html-DCl2B43Y.js" as="script"><link rel="prefetch" href="/assets/äºšåŠ¨æœºä¸äººæ ¼.html-BZ15s9ne.js" as="script"><link rel="prefetch" href="/assets/äººçš„æ½œèƒ½å’Œä»·å€¼.html-DmUQq3bN.js" as="script"><link rel="prefetch" href="/assets/å¥½äººæ˜¯å¦‚ä½•å˜æˆæ¶é­”çš„.html-CRDdzJTQ.js" as="script"><link rel="prefetch" href="/assets/å½±å“åŠ›.html-CYJiSXMD.js" as="script"><link rel="prefetch" href="/assets/æ€§å¿ƒç†å­¦.html-CnJMt_Dj.js" as="script"><link rel="prefetch" href="/assets/æ´—è„‘å¿ƒç†å­¦.html-WVGiPcV9.js" as="script"><link rel="prefetch" href="/assets/è¿›åŒ–å¿ƒç†å­¦.html-CLSz92ad.js" as="script"><link rel="prefetch" href="/assets/CODE.html-BurO0TaH.js" as="script"><link rel="prefetch" href="/assets/index.html-Cfm5AnuO.js" as="script"><link rel="prefetch" href="/assets/æˆä¸ºæŠ€æœ¯é¢†å¯¼è€….html-BeievVOl.js" as="script"><link rel="prefetch" href="/assets/é¸Ÿå“¥çš„Linuxç§æˆ¿èœ.html-BT9ZaoBp.js" as="script"><link rel="prefetch" href="/assets/é¸Ÿå“¥çš„Linuxç§æˆ¿èœæœåŠ¡å™¨æ¶è®¾ç¯‡.html-BQ8dRHFL.js" as="script"><link rel="prefetch" href="/assets/é»‘å®¢ä¸ç”»å®¶.html-BUl7mIAM.js" as="script"><link rel="prefetch" href="/assets/index.html-DWycXbHl.js" as="script"><link rel="prefetch" href="/assets/ä¸­å›½äººçš„æ€§æ ¼.html-BPUWUyLj.js" as="script"><link rel="prefetch" href="/assets/ä¹Œåˆä¹‹ä¼—.html-BY2MH7CI.js" as="script"><link rel="prefetch" href="/assets/å¨±ä¹è‡³æ­».html-DWgY0sRL.js" as="script"><link rel="prefetch" href="/assets/index.html-C2P0kvna.js" as="script"><link rel="prefetch" href="/assets/æ¸…é†’æ€è€ƒçš„è‰ºæœ¯.html-DoOeJKMz.js" as="script"><link rel="prefetch" href="/assets/index.html-BJ6qtr2B.js" as="script"><link rel="prefetch" href="/assets/åšå¼ˆè®ºä¸ç»æµè¡Œä¸º.html-B0waizBQ.js" as="script"><link rel="prefetch" href="/assets/å°±ä¸š_åˆ©æ¯å’Œè´§å¸é€šè®º.html-GbYSBcEv.js" as="script"><link rel="prefetch" href="/assets/èªæ˜çš„æŠ•èµ„è€….html-ClvMkkUM.js" as="script"><link rel="prefetch" href="/assets/è´§å¸é‡‘èå­¦.html-qXVX0TvC.js" as="script"><link rel="prefetch" href="/assets/éç†æ€§ç¹è£.html-v343vXI-.js" as="script"><link rel="prefetch" href="/assets/MySQL.html-C9lDYvNL.js" as="script"><link rel="prefetch" href="/assets/Mysqlè°ƒä¼˜.html-DhEBQYd0.js" as="script"><link rel="prefetch" href="/assets/Mysqlè¿›é˜¶.html-DXdsBoxU.js" as="script"><link rel="prefetch" href="/assets/Mysqlé«˜é˜¶.html-AC6rvGR3.js" as="script"><link rel="prefetch" href="/assets/Navicat.html-ByoWFRw-.js" as="script"><link rel="prefetch" href="/assets/SQLAlchemy.html-B_IqfnnF.js" as="script"><link rel="prefetch" href="/assets/PostgreSQL.html-DBDJpZk2.js" as="script"><link rel="prefetch" href="/assets/redis.html-DXVcjp2G.js" as="script"><link rel="prefetch" href="/assets/æ€§èƒ½åˆ†æ.html-rJ4oJttN.js" as="script"><link rel="prefetch" href="/assets/aioetcd3.html-CkwJ2nRT.js" as="script"><link rel="prefetch" href="/assets/etcd.html-LmebKQQ8.js" as="script"><link rel="prefetch" href="/assets/è¿›é˜¶.html-BXcfPDkL.js" as="script"><link rel="prefetch" href="/assets/H2Oå¼•å‘çš„ä¼˜åŒ–.html-AeWVprGT.js" as="script"><link rel="prefetch" href="/assets/å…³äºMapReduce.html-BVOWXbWC.js" as="script"><link rel="prefetch" href="/assets/goå·¥å…·é€Ÿç”¨.html-C40DHcoP.js" as="script"><link rel="prefetch" href="/assets/goè¯­è¨€é€Ÿè®°.html-P7aA3ihX.js" as="script"><link rel="prefetch" href="/assets/æ•°ç»„.html-CinEscn9.js" as="script"><link rel="prefetch" href="/assets/æ ˆä¸é˜Ÿåˆ—.html-CEkbxru7.js" as="script"><link rel="prefetch" href="/assets/æ ‘.html-0fn6hRV_.js" as="script"><link rel="prefetch" href="/assets/æ¦‚è¿°.html-Cik6v0bX.js" as="script"><link rel="prefetch" href="/assets/çº¿æ€§è¡¨.html-CTGlvQK3.js" as="script"><link rel="prefetch" href="/assets/dockerå®¹å™¨.html-DoSWD09O.js" as="script"><link rel="prefetch" href="/assets/ä½¿ç”¨åŸºç¡€.html-D0aHnPQE.js" as="script"><link rel="prefetch" href="/assets/å‘½ä»¤.html-538LRpgg.js" as="script"><link rel="prefetch" href="/assets/ç½‘ç»œ.html-D-SGI3Er.js" as="script"><link rel="prefetch" href="/assets/CICD.html-DsAXjsw_.js" as="script"><link rel="prefetch" href="/assets/GItæäº¤è§„åˆ™.html-5TzTXVFm.js" as="script"><link rel="prefetch" href="/assets/Git.html-PeMZEbCa.js" as="script"><link rel="prefetch" href="/assets/å®‰è£…GitLab.html-D2pNj1rO.js" as="script"><link rel="prefetch" href="/assets/Helmå®‰è£…ä½¿ç”¨.html-DVUyOtnT.js" as="script"><link rel="prefetch" href="/assets/k8så­˜å‚¨.html-x7mMhKCi.js" as="script"><link rel="prefetch" href="/assets/k8så®‰è£….html-Bra9Obu0.js" as="script"><link rel="prefetch" href="/assets/k8så·¥ä½œè´Ÿè½½.html-CjYSdtpM.js" as="script"><link rel="prefetch" href="/assets/k8sæœåŠ¡.html-BCApm3yo.js" as="script"><link rel="prefetch" href="/assets/k8sèµ„æºPod.html-DZy_F-fx.js" as="script"><link rel="prefetch" href="/assets/k8sè¿›é˜¶.html-CEe8k8nO.js" as="script"><link rel="prefetch" href="/assets/NginxåŸºç¡€.html-D0LL7pvN.js" as="script"><link rel="prefetch" href="/assets/åº”ç”¨éƒ¨ç½².html-x3vvNwNY.js" as="script"><link rel="prefetch" href="/assets/FiddleræŠ“åŒ…å·¥å…·.html-CmvVTpsM.js" as="script"><link rel="prefetch" href="/assets/Postman.html-CCcUWjZ1.js" as="script"><link rel="prefetch" href="/assets/Screen.html-BYpjegN6.js" as="script"><link rel="prefetch" href="/assets/rdesktop.html-C-a4JTIW.js" as="script"><link rel="prefetch" href="/assets/tmux.html-DpWOv6A5.js" as="script"><link rel="prefetch" href="/assets/ç½‘ç»œä»£ç†.html-BQFuNuYi.js" as="script"><link rel="prefetch" href="/assets/åŸºæœ¬ä½¿ç”¨.html-CAkwxVfS.js" as="script"><link rel="prefetch" href="/assets/å®‰è£….html-aVvrMnva.js" as="script"><link rel="prefetch" href="/assets/APScheduler.html-DYLdYAS8.js" as="script"><link rel="prefetch" href="/assets/Celery.html-C4hUc6Ta.js" as="script"><link rel="prefetch" href="/assets/Celeryä½¿ç”¨åŸºç¡€.html-aKV7UFh4.js" as="script"><link rel="prefetch" href="/assets/å¼‚æ­¥ä»»åŠ¡æ¦‚è¿°.html-CltwNFFp.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ.html-CT6CE_ip.js" as="script"><link rel="prefetch" href="/assets/kafka.html-pckCFgKD.js" as="script"><link rel="prefetch" href="/assets/kombu.html-ISTdbyWx.js" as="script"><link rel="prefetch" href="/assets/pika.html-DUvIJu0L.js" as="script"><link rel="prefetch" href="/assets/RPC.html-ByKS2iwm.js" as="script"><link rel="prefetch" href="/assets/gRPC.html-DKziNKCW.js" as="script"><link rel="prefetch" href="/assets/asyncio Recipes.html-D7wfPNWT.js" as="script"><link rel="prefetch" href="/assets/asyncioåŸºç¡€.html-1tIBQArj.js" as="script"><link rel="prefetch" href="/assets/asyncioè¿›é˜¶.html-C7YQCQYl.js" as="script"><link rel="prefetch" href="/assets/äº‹ä»¶å¾ªç¯.html-DUd8IuIo.js" as="script"><link rel="prefetch" href="/assets/åº•å±‚å®ç°.html-DKNEDgiL.js" as="script"><link rel="prefetch" href="/assets/Pythoné¡¹ç›®æ‰“åŒ….html-C2VyKbcS.js" as="script"><link rel="prefetch" href="/assets/pip.html-BqVDe18O.js" as="script"><link rel="prefetch" href="/assets/å­—ç¬¦ç¼–ç .html-H1yJsdfZ.js" as="script"><link rel="prefetch" href="/assets/æ•°æ®ç±»å‹.html-DUleCUFF.js" as="script"><link rel="prefetch" href="/assets/æ–‡ä»¶åŸºç¡€.html-DbXZ8nlV.js" as="script"><link rel="prefetch" href="/assets/æµç¨‹æ§åˆ¶.html-ByYvqybu.js" as="script"><link rel="prefetch" href="/assets/ç¯å¢ƒå®‰è£….html-BKICIDZG.js" as="script"><link rel="prefetch" href="/assets/Linuxæ–‡ä»¶é”.html-osr0U0mU.js" as="script"><link rel="prefetch" href="/assets/åç¨‹.html-DQLQID2F.js" as="script"><link rel="prefetch" href="/assets/åŒæ­¥é˜Ÿåˆ—.html-BrYTNoRN.js" as="script"><link rel="prefetch" href="/assets/å¤šçº¿ç¨‹ç¼–ç¨‹.html-DrTWjVn7.js" as="script"><link rel="prefetch" href="/assets/å¤šè¿›ç¨‹ç¼–ç¨‹.html-B5XeCHU_.js" as="script"><link rel="prefetch" href="/assets/çº¿ç¨‹.html-C5_wO8_B.js" as="script"><link rel="prefetch" href="/assets/çº¿ç¨‹è¿›ç¨‹è¾…åŠ©æœºåˆ¶.html-D4zYI9Lq.js" as="script"><link rel="prefetch" href="/assets/è¿›ç¨‹.html-dSlOk7Hk.js" as="script"><link rel="prefetch" href="/assets/é«˜æ€§èƒ½ç¼–ç¨‹.html-BcW2EIYO.js" as="script"><link rel="prefetch" href="/assets/æ ‡å‡†åº“é“¾æ¥.html-C9WJUinI.js" as="script"><link rel="prefetch" href="/assets/Cpythonå¯¹è±¡.html-DEe6rGJn.js" as="script"><link rel="prefetch" href="/assets/åƒåœ¾å›æ”¶.html-5Rqrp2e7.js" as="script"><link rel="prefetch" href="/assets/åºåˆ—è¿›é˜¶.html-DX8Drfbt.js" as="script"><link rel="prefetch" href="/assets/æ˜ å°„è¿›é˜¶.html-CHqenB1b.js" as="script"><link rel="prefetch" href="/assets/è®¾è®¡æ¨¡å¼.html-CVJqlxdl.js" as="script"><link rel="prefetch" href="/assets/Socket.html-Bbixe3wm.js" as="script"><link rel="prefetch" href="/assets/Websocket.html-DZ3FwVAK.js" as="script"><link rel="prefetch" href="/assets/äº‹ä»¶æ¨¡å‹.html-B1wcUO3c.js" as="script"><link rel="prefetch" href="/assets/å›è°ƒ.html-Cr7eJqHt.js" as="script"><link rel="prefetch" href="/assets/ä¿¡å·é‡.html-CVnG2xqt.js" as="script"><link rel="prefetch" href="/assets/å‡½æ•°.html-Cjw10ClZ.js" as="script"><link rel="prefetch" href="/assets/å˜é‡æœºåˆ¶.html-u-Ua799n.js" as="script"><link rel="prefetch" href="/assets/æ¨¡å—å’ŒåŒ….html-BCXXAS-T.js" as="script"><link rel="prefetch" href="/assets/ç”Ÿæˆå™¨.html-BiOQSFAm.js" as="script"><link rel="prefetch" href="/assets/è£…é¥°å™¨.html-jHbNCH8O.js" as="script"><link rel="prefetch" href="/assets/è¿­ä»£å™¨.html-DAQ33Isd.js" as="script"><link rel="prefetch" href="/assets/é”™è¯¯å’Œå¼‚å¸¸.html-6Nby4qt4.js" as="script"><link rel="prefetch" href="/assets/é¢å‘å¯¹è±¡.html-BC3N_sJ1.js" as="script"><link rel="prefetch" href="/assets/DNSæœåŠ¡.html-C30XBnrB.js" as="script"><link rel="prefetch" href="/assets/bind.html-CpPqR5E4.js" as="script"><link rel="prefetch" href="/assets/è„šæœ¬è¯´æ˜.html-wK9ZyqQ9.js" as="script"><link rel="prefetch" href="/assets/ADåŸŸ.html-CK8YjxcA.js" as="script"><link rel="prefetch" href="/assets/LDAP.html-DcgYX7Bg.js" as="script"><link rel="prefetch" href="/assets/Pythonå¯¹æ¥ADåŸŸ.html-B3rNJZ-K.js" as="script"><link rel="prefetch" href="/assets/NFSæœåŠ¡.html-C92rD8ib.js" as="script"><link rel="prefetch" href="/assets/NTPæœåŠ¡.html-BPwD08Sq.js" as="script"><link rel="prefetch" href="/assets/SNMPæœåŠ¡.html-DhtAa1As.js" as="script"><link rel="prefetch" href="/assets/SNMPè®¾è®¡æ–‡æ¡£.html-B_Ut3qF2.js" as="script"><link rel="prefetch" href="/assets/SambaæœåŠ¡.html-DxG8Q3RR.js" as="script"><link rel="prefetch" href="/assets/rsync.html-C33LXEXD.js" as="script"><link rel="prefetch" href="/assets/isoæ„å»ºä»¥åŠå‘å¸ƒ.html-C7fqkrdR.js" as="script"><link rel="prefetch" href="/assets/ufscliå·¥å…·.html-4mHjYaHN.js" as="script"><link rel="prefetch" href="/assets/ufsæ ¸å¿ƒç»„ä»¶.html-ruIcLfo7.js" as="script"><link rel="prefetch" href="/assets/ufsç®¡ç†å¹³å°.html-BJQ49wVF.js" as="script"><link rel="prefetch" href="/assets/uusè™šæ‹Ÿæœºæ’é”™.html-CidpNEsq.js" as="script"><link rel="prefetch" href="/assets/CentOSçš„å®‰è£….html-k5UzYaUh.js" as="script"><link rel="prefetch" href="/assets/RPMåŒ…ç®¡ç†.html-TvKCQGox.js" as="script"><link rel="prefetch" href="/assets/è´¦å·ç®¡ç†ä¸ACLæƒé™.html-DRz0Mn0d.js" as="script"><link rel="prefetch" href="/assets/Linuxæ˜¯ä»€ä¹ˆä¸å¦‚ä½•å­¦ä¹ .html-DgeU5mNV.js" as="script"><link rel="prefetch" href="/assets/ä¸»æœºè§„åˆ’ä¸ç£ç›˜åˆ†åŒº.html-Dqs5luwS.js" as="script"><link rel="prefetch" href="/assets/è®¡ç®—æœºæ¦‚è®º.html-DqSDdV4s.js" as="script"><link rel="prefetch" href="/assets/Linuxç£ç›˜ä¸æ–‡ä»¶ç³»ç»Ÿç®¡ç†.html-y3V8r0__.js" as="script"><link rel="prefetch" href="/assets/æ–‡ä»¶ä¸æ–‡ä»¶ç³»ç»Ÿå‹ç¼©.html-B23rNMF2.js" as="script"><link rel="prefetch" href="/assets/æ–‡ä»¶æƒé™ä¸ç›®å½•é…ç½®.html-Bxv5jY4X.js" as="script"><link rel="prefetch" href="/assets/è®¤è¯†ç³»ç»ŸæœåŠ¡.html-CdGzIsGD.js" as="script"><link rel="prefetch" href="/assets/shell.html-DD5bL6x7.js" as="script"><link rel="prefetch" href="/assets/vim å¿«æ·é”®.html-CuoqueZS.js" as="script"><link rel="prefetch" href="/assets/å¤‡å¿˜å‘½ä»¤.html-DVXPW7_h.js" as="script"><link rel="prefetch" href="/assets/æ•…éšœå¿«æŸ¥.html-5HpsCMTb.js" as="script"><link rel="prefetch" href="/assets/æ“ä½œç³»ç»Ÿ.html-ckVJO9T4.js" as="script"><link rel="prefetch" href="/assets/CURL.html-Ckm00qb5.js" as="script"><link rel="prefetch" href="/assets/P2P.html-h-U1mQqP.js" as="script"><link rel="prefetch" href="/assets/å‘½ä»¤.html-CtJC0ZWe.js" as="script"><link rel="prefetch" href="/assets/ç½‘ç»œåŸºç¡€.html-CMHRLTEu.js" as="script"><link rel="prefetch" href="/assets/Ubuntuç³»ç»Ÿ.html-D6hh5uD6.js" as="script"><link rel="prefetch" href="/assets/CPU.html-CBKxkJB5.js" as="script"><link rel="prefetch" href="/assets/ä¸»æ¿.html-Vcd3r925.js" as="script"><link rel="prefetch" href="/assets/å†…å­˜.html-D55tJUiW.js" as="script"><link rel="prefetch" href="/assets/å­˜å‚¨.html-BCvVX7up.js" as="script"><link rel="prefetch" href="/assets/æ‰©å±•å¡ä¸æ¥å£.html-DV7pOJ8X.js" as="script"><link rel="prefetch" href="/assets/æ˜¾å¡.html-CuTGLO27.js" as="script"><link rel="prefetch" href="/assets/PVE.html-Dt_5OIG-.js" as="script"><link rel="prefetch" href="/assets/æ·»åŠ ç£ç›˜.html-9-0s1GkK.js" as="script"><link rel="prefetch" href="/assets/ç½‘ç»œé…ç½®.html-B0kpZl6e.js" as="script"><link rel="prefetch" href="/assets/DjangoåŸºç¡€.html-BgyEkJjx.js" as="script"><link rel="prefetch" href="/assets/Djangoæ¦‚è¿°.html-Cfk5u2um.js" as="script"><link rel="prefetch" href="/assets/FastAPIåŸºç¡€.html-DvkiVZc2.js" as="script"><link rel="prefetch" href="/assets/FastAPIåŸºç¡€äºŒ.html-Du8FFG57.js" as="script"><link rel="prefetch" href="/assets/tornado.html-BK0K6aOL.js" as="script"><link rel="prefetch" href="/assets/WEBæ¡†æ¶æœ¬è´¨.html-DjBHHViU.js" as="script"><link rel="prefetch" href="/assets/çŠ¶æ€ç®¡ç†.html-D0q5G2s1.js" as="script"><link rel="prefetch" href="/assets/404.html-C2HZnmj_.js" as="script"><link rel="prefetch" href="/assets/index.html-DAe4DE5h.js" as="script"><link rel="prefetch" href="/assets/index.html-BFzxpuF3.js" as="script"><link rel="prefetch" href="/assets/index.html-DTQ2LK6I.js" as="script"><link rel="prefetch" href="/assets/index.html-Ci-GWT8O.js" as="script"><link rel="prefetch" href="/assets/index.html-qa16r42a.js" as="script"><link rel="prefetch" href="/assets/index.html-C6wJQyOR.js" as="script"><link rel="prefetch" href="/assets/index.html-BBjWPH1w.js" as="script"><link rel="prefetch" href="/assets/index.html-CUihH6J_.js" as="script"><link rel="prefetch" href="/assets/index.html-ua05DUOE.js" as="script"><link rel="prefetch" href="/assets/index.html-6MrA3wnR.js" as="script"><link rel="prefetch" href="/assets/index.html-T-WeLTAn.js" as="script"><link rel="prefetch" href="/assets/index.html-oiYJ3vsj.js" as="script"><link rel="prefetch" href="/assets/index.html-C_NCXyyP.js" as="script"><link rel="prefetch" href="/assets/index.html-jrQuWkE3.js" as="script"><link rel="prefetch" href="/assets/index.html-BAJtD1Os.js" as="script"><link rel="prefetch" href="/assets/index.html-Bpr9LDi-.js" as="script"><link rel="prefetch" href="/assets/index.html-BCNVulJc.js" as="script"><link rel="prefetch" href="/assets/index.html-DHZyBdrf.js" as="script"><link rel="prefetch" href="/assets/index.html-D-wFG0lD.js" as="script"><link rel="prefetch" href="/assets/index.html-BQKeEy27.js" as="script"><link rel="prefetch" href="/assets/index.html-DmgP9t1f.js" as="script"><link rel="prefetch" href="/assets/index.html-_dHB1_l4.js" as="script"><link rel="prefetch" href="/assets/index.html-DCNsvOD6.js" as="script"><link rel="prefetch" href="/assets/index.html-DHj14T2Y.js" as="script"><link rel="prefetch" href="/assets/index.html-Cl-7CFJU.js" as="script"><link rel="prefetch" href="/assets/index.html-iC0wvR-k.js" as="script"><link rel="prefetch" href="/assets/index.html-CCa_D4aU.js" as="script"><link rel="prefetch" href="/assets/index.html-DFpp0IX3.js" as="script"><link rel="prefetch" href="/assets/index.html-1wlCGMiP.js" as="script"><link rel="prefetch" href="/assets/index.html--hdbdaNQ.js" as="script"><link rel="prefetch" href="/assets/index.html-mgvKV_fr.js" as="script"><link rel="prefetch" href="/assets/index.html-dRikIPQQ.js" as="script"><link rel="prefetch" href="/assets/index.html-k83d1lC3.js" as="script"><link rel="prefetch" href="/assets/index.html-BxZexm7g.js" as="script"><link rel="prefetch" href="/assets/index.html-B9pM-ZLZ.js" as="script"><link rel="prefetch" href="/assets/index.html-DzkpH7ba.js" as="script"><link rel="prefetch" href="/assets/index.html-DaflKFfN.js" as="script"><link rel="prefetch" href="/assets/index.html-DhH5Fspn.js" as="script"><link rel="prefetch" href="/assets/index.html-CXF1E47B.js" as="script"><link rel="prefetch" href="/assets/index.html-C9pjrlg0.js" as="script"><link rel="prefetch" href="/assets/index.html-p7aigf9u.js" as="script"><link rel="prefetch" href="/assets/index.html-QrQaySQk.js" as="script"><link rel="prefetch" href="/assets/index.html-CziB2e2M.js" as="script"><link rel="prefetch" href="/assets/index.html-KtYpir7p.js" as="script"><link rel="prefetch" href="/assets/index.html-D3iQWu8b.js" as="script"><link rel="prefetch" href="/assets/index.html-Ke4sSh06.js" as="script"><link rel="prefetch" href="/assets/index.html-BlI-tf5I.js" as="script"><link rel="prefetch" href="/assets/index.html-DylLkGbx.js" as="script"><link rel="prefetch" href="/assets/index.html-BzUxKUxR.js" as="script"><link rel="prefetch" href="/assets/index.html-CODpQXp6.js" as="script"><link rel="prefetch" href="/assets/index.html-PX8em62H.js" as="script"><link rel="prefetch" href="/assets/index.html-n1cEkg_8.js" as="script"><link rel="prefetch" href="/assets/index.html-B9P7wj1b.js" as="script"><link rel="prefetch" href="/assets/index.html-e_eU3tgz.js" as="script"><link rel="prefetch" href="/assets/index.html-xfTEjkM7.js" as="script"><link rel="prefetch" href="/assets/index.html-hw9k0Jrd.js" as="script"><link rel="prefetch" href="/assets/index.html-D0-s7Uar.js" as="script"><link rel="prefetch" href="/assets/index.html-B9TYxa6q.js" as="script"><link rel="prefetch" href="/assets/index.html-CKBy9FqU.js" as="script"><link rel="prefetch" href="/assets/index.html-BXVosNKa.js" as="script"><link rel="prefetch" href="/assets/index.html-C0Oqbyfg.js" as="script"><link rel="prefetch" href="/assets/index.html-DkKhUahx.js" as="script"><link rel="prefetch" href="/assets/index.html-Cmk75Xxz.js" as="script"><link rel="prefetch" href="/assets/index.html-CT8XApp1.js" as="script"><link rel="prefetch" href="/assets/index.html-CKMtQBcp.js" as="script"><link rel="prefetch" href="/assets/index.html-JOCN8EiR.js" as="script"><link rel="prefetch" href="/assets/index.html-Gl9q7Y6p.js" as="script"><link rel="prefetch" href="/assets/index.html-CHkdYHJ9.js" as="script"><link rel="prefetch" href="/assets/index.html-CAmcZVmC.js" as="script"><link rel="prefetch" href="/assets/index.html-CHkdYHJ9.js" as="script"><link rel="prefetch" href="/assets/index.html-DV-ZIgJY.js" as="script"><link rel="prefetch" href="/assets/index.html-CjxXQQEg.js" as="script"><link rel="prefetch" href="/assets/index.html-8_8P8gRS.js" as="script"><link rel="prefetch" href="/assets/index.html-BLyynlp9.js" as="script"><link rel="prefetch" href="/assets/index.html-Cp4t6EZH.js" as="script"><link rel="prefetch" href="/assets/index.html-DWa3j9bA.js" as="script"><link rel="prefetch" href="/assets/index.html-BGACIhz2.js" as="script"><link rel="prefetch" href="/assets/index.html-4CWKnnON.js" as="script"><link rel="prefetch" href="/assets/index.html-BJlQrzfU.js" as="script"><link rel="prefetch" href="/assets/index.html-DZliOewz.js" as="script"><link rel="prefetch" href="/assets/index.html-QRr33-C4.js" as="script"><link rel="prefetch" href="/assets/index.html-DXbwJXEQ.js" as="script"><link rel="prefetch" href="/assets/index.html-fLTNxaOS.js" as="script"><link rel="prefetch" href="/assets/index.html-m97XmG5G.js" as="script"><link rel="prefetch" href="/assets/index.html-BQ9k6kSX.js" as="script"><link rel="prefetch" href="/assets/index.html-DG3hxqPk.js" as="script"><link rel="prefetch" href="/assets/index.html-DLCZFtRB.js" as="script"><link rel="prefetch" href="/assets/index.html-CB91l6lk.js" as="script"><link rel="prefetch" href="/assets/index.html-C9fRzeJN.js" as="script"><link rel="prefetch" href="/assets/index.html-BGml6wRo.js" as="script"><link rel="prefetch" href="/assets/index.html-D3QBD_V-.js" as="script"><link rel="prefetch" href="/assets/index.html-BHGohcCJ.js" as="script"><link rel="prefetch" href="/assets/index.html-C2OduppK.js" as="script"><link rel="prefetch" href="/assets/index.html-BGzxXkKO.js" as="script"><link rel="prefetch" href="/assets/index.html-Bww3UGNT.js" as="script"><link rel="prefetch" href="/assets/index.html-Dccg061K.js" as="script"><link rel="prefetch" href="/assets/index.html-TCeV8iXl.js" as="script"><link rel="prefetch" href="/assets/index.html-D8L2DTPf.js" as="script"><link rel="prefetch" href="/assets/index.html-BrP2SBn5.js" as="script"><link rel="prefetch" href="/assets/index.html-D5mt0s_w.js" as="script"><link rel="prefetch" href="/assets/index.html-B4jqrogX.js" as="script"><link rel="prefetch" href="/assets/index.html-stVOsdp1.js" as="script"><link rel="prefetch" href="/assets/index.html-D-ZVtseW.js" as="script"><link rel="prefetch" href="/assets/index.html-DoHwxn9Q.js" as="script"><link rel="prefetch" href="/assets/index.html-Cqdp8A1H.js" as="script"><link rel="prefetch" href="/assets/index.html-DVkPDc9F.js" as="script"><link rel="prefetch" href="/assets/index.html-BOcknPsa.js" as="script"><link rel="prefetch" href="/assets/index.html-DmpL82_l.js" as="script"><link rel="prefetch" href="/assets/index.html-BWgR-Lu5.js" as="script"><link rel="prefetch" href="/assets/index.html-C_VWpCT7.js" as="script"><link rel="prefetch" href="/assets/index.html-BKPu5CIy.js" as="script"><link rel="prefetch" href="/assets/index.html-DmpL82_l.js" as="script"><link rel="prefetch" href="/assets/index.html-D5zuMBc8.js" as="script"><link rel="prefetch" href="/assets/index.html-BuoCOjMb.js" as="script"><link rel="prefetch" href="/assets/index.html-DhmXW9Za.js" as="script"><link rel="prefetch" href="/assets/index.html-B8nbv7Rt.js" as="script"><link rel="prefetch" href="/assets/index.html-CMJ40_p2.js" as="script"><link rel="prefetch" href="/assets/index.html-B9RVzSKY.js" as="script"><link rel="prefetch" href="/assets/index.html-FE5BrP7W.js" as="script"><link rel="prefetch" href="/assets/index.html-BCDCcyUd.js" as="script"><link rel="prefetch" href="/assets/index.html-D5T4wl5v.js" as="script"><link rel="prefetch" href="/assets/index.html-BeabR3Rp.js" as="script"><link rel="prefetch" href="/assets/index.html-BjNrG-hf.js" as="script"><link rel="prefetch" href="/assets/index.html-B-9_PVC6.js" as="script"><link rel="prefetch" href="/assets/index.html-CU6nhlQL.js" as="script"><link rel="prefetch" href="/assets/index.html-BzgWLN85.js" as="script"><link rel="prefetch" href="/assets/index.html-D4SL_vPx.js" as="script"><link rel="prefetch" href="/assets/index.html-BQRn0D0V.js" as="script"><link rel="prefetch" href="/assets/index.html-BhYoACS9.js" as="script"><link rel="prefetch" href="/assets/index.html-CU6nhlQL.js" as="script"><link rel="prefetch" href="/assets/index.html-rInvlh6V.js" as="script"><link rel="prefetch" href="/assets/index.html-CE7qghjS.js" as="script"><link rel="prefetch" href="/assets/index.html-C9bnsZvy.js" as="script"><link rel="prefetch" href="/assets/index.html-Envaj5Zu.js" as="script"><link rel="prefetch" href="/assets/index.html-DdWrccpS.js" as="script"><link rel="prefetch" href="/assets/index.html-C2D3Uej3.js" as="script"><link rel="prefetch" href="/assets/index.html-zmsoz7_A.js" as="script"><link rel="prefetch" href="/assets/index.html-CVGGqqnZ.js" as="script"><link rel="prefetch" href="/assets/index.html-CZEX2yTZ.js" as="script"><link rel="prefetch" href="/assets/index.html-C790p8iI.js" as="script"><link rel="prefetch" href="/assets/index.html-BN2KyP7g.js" as="script"><link rel="prefetch" href="/assets/index.html-CPjGC29b.js" as="script"><link rel="prefetch" href="/assets/index.html-z2NFL9br.js" as="script"><link rel="prefetch" href="/assets/index.html--6LysoX6.js" as="script"><link rel="prefetch" href="/assets/index.html-BT1iX7It.js" as="script"><link rel="prefetch" href="/assets/index.html-DND7jwb9.js" as="script"><link rel="prefetch" href="/assets/index.html-By5RQnFz.js" as="script"><link rel="prefetch" href="/assets/index.html-CHH9DTeT.js" as="script"><link rel="prefetch" href="/assets/index.html-CoMqf26n.js" as="script"><link rel="prefetch" href="/assets/index.html-rNmX0a3w.js" as="script"><link rel="prefetch" href="/assets/index.html-BUiGXLvG.js" as="script"><link rel="prefetch" href="/assets/index.html-DkHecXUG.js" as="script"><link rel="prefetch" href="/assets/index.html-DoAKV4tL.js" as="script"><link rel="prefetch" href="/assets/index.html-BJS__WZ3.js" as="script"><link rel="prefetch" href="/assets/index.html-CMRXkFIc.js" as="script"><link rel="prefetch" href="/assets/index.html-BaPwLKzU.js" as="script"><link rel="prefetch" href="/assets/index.html-DO5faOKT.js" as="script"><link rel="prefetch" href="/assets/index.html-Cq8oHWRN.js" as="script"><link rel="prefetch" href="/assets/index.html-x9hqZPuj.js" as="script"><link rel="prefetch" href="/assets/index.html-DGBGL5DE.js" as="script"><link rel="prefetch" href="/assets/index.html-DhtyWh3k.js" as="script"><link rel="prefetch" href="/assets/index.html-INVkjO2E.js" as="script"><link rel="prefetch" href="/assets/index.html-C5pMFGAu.js" as="script"><link rel="prefetch" href="/assets/index.html-BKY5ZfC6.js" as="script"><link rel="prefetch" href="/assets/index.html-6K0NvDr4.js" as="script"><link rel="prefetch" href="/assets/index.html-BC8n_PIe.js" as="script"><link rel="prefetch" href="/assets/index.html-LnyQh6lI.js" as="script"><link rel="prefetch" href="/assets/index.html-ChzZDR3b.js" as="script"><link rel="prefetch" href="/assets/index.html-C7tFEYzB.js" as="script"><link rel="prefetch" href="/assets/index.html-CVQpOa52.js" as="script"><link rel="prefetch" href="/assets/index.html-m7jemE6Q.js" as="script"><link rel="prefetch" href="/assets/index.html-DhAFk5AS.js" as="script"><link rel="prefetch" href="/assets/index.html-Bn8WaRbE.js" as="script"><link rel="prefetch" href="/assets/index.html-Ciho4M2g.js" as="script"><link rel="prefetch" href="/assets/index.html-CW3C_7_o.js" as="script"><link rel="prefetch" href="/assets/index.html-Ck0Luq4c.js" as="script"><link rel="prefetch" href="/assets/index.html-C8jLxGPT.js" as="script"><link rel="prefetch" href="/assets/index.html-a1Xne1Wy.js" as="script"><link rel="prefetch" href="/assets/index.html-Bz97WrSR.js" as="script"><link rel="prefetch" href="/assets/index.html-4VJWFYjZ.js" as="script"><link rel="prefetch" href="/assets/index.html-j2sC5e-3.js" as="script"><link rel="prefetch" href="/assets/index.html-CsxivFHr.js" as="script"><link rel="prefetch" href="/assets/index.html-B0f39pgz.js" as="script"><link rel="prefetch" href="/assets/index.html-BqDmjsZs.js" as="script"><link rel="prefetch" href="/assets/index.html-nwmzx9rX.js" as="script"><link rel="prefetch" href="/assets/index.html-B0Icbdqe.js" as="script"><link rel="prefetch" href="/assets/index.html-VVQB7sFZ.js" as="script"><link rel="prefetch" href="/assets/index.html-BEF1lAkg.js" as="script"><link rel="prefetch" href="/assets/index.html-BlkoESuv.js" as="script"><link rel="prefetch" href="/assets/index.html-CKxOChQk.js" as="script"><link rel="prefetch" href="/assets/index.html-5El1mk-J.js" as="script"><link rel="prefetch" href="/assets/index.html-CIaBb4az.js" as="script"><link rel="prefetch" href="/assets/index.html-D8sD56KV.js" as="script"><link rel="prefetch" href="/assets/index.html-BWDmdhpK.js" as="script"><link rel="prefetch" href="/assets/index.html-D1Gmaqoi.js" as="script"><link rel="prefetch" href="/assets/index.html-Ff8311At.js" as="script"><link rel="prefetch" href="/assets/index.html-BG2Sf84q.js" as="script"><link rel="prefetch" href="/assets/index.html-BtVxNJye.js" as="script"><link rel="prefetch" href="/assets/index.html-C_Fp7jfm.js" as="script"><link rel="prefetch" href="/assets/index.html-C1CAyrmk.js" as="script"><link rel="prefetch" href="/assets/index.html-uSW3JxSi.js" as="script"><link rel="prefetch" href="/assets/index.html-DvalnvRo.js" as="script"><link rel="prefetch" href="/assets/index.html-C_Fp7jfm.js" as="script"><link rel="prefetch" href="/assets/index.html-B4-6C5uv.js" as="script"><link rel="prefetch" href="/assets/index.html-CesnLkVm.js" as="script"><link rel="prefetch" href="/assets/index.html-6EAg7ahZ.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-DXWKOczD.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="å¸¦æˆ‘å›å®¶"><img class="vp-nav-logo" src="/avatar.jpg" alt><!----><span class="vp-site-name hide-in-pad">æ‚¦ â–ª å®å®</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="ä¸»é¡µ" iconsizing="height"><!--[--><i class="vp-icon iconfont icon-home" sizing="height"></i><!--]-->ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Python"><!--[--><i class="vp-icon iconfont icon-python" sizing="height"></i>Python<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">è¯­è¨€</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/python/%E8%AF%AD%E8%A8%80/%E5%9F%BA%E7%A1%80/%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85.html" aria-label="åŸºç¡€" iconsizing="both"><!---->åŸºç¡€<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/python/%E8%AF%AD%E8%A8%80/%E8%BF%9B%E9%98%B6/%E5%8F%98%E9%87%8F%E6%9C%BA%E5%88%B6.html" aria-label="è¿›é˜¶" iconsizing="both"><!---->è¿›é˜¶<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/python/%E8%AF%AD%E8%A8%80/%E6%B7%B1%E5%85%A5/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6.html" aria-label="æ·±å…¥" iconsizing="both"><!---->æ·±å…¥<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/python/%E8%AF%AD%E8%A8%80/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/Socket.html" aria-label="ç½‘ç»œç¼–ç¨‹" iconsizing="both"><!---->ç½‘ç»œç¼–ç¨‹<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/python/%E8%AF%AD%E8%A8%80/%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%BC%96%E7%A8%8B/%E8%BF%9B%E7%A8%8B.html" aria-label="å¤šä»»åŠ¡ç¼–ç¨‹" iconsizing="both"><!---->å¤šä»»åŠ¡ç¼–ç¨‹<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/python/%E8%AF%AD%E8%A8%80/asyncio/asyncio%E5%9F%BA%E7%A1%80.html" aria-label="asyncio" iconsizing="both"><!---->asyncio<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/python/%E8%AF%AD%E8%A8%80/%E5%BA%93/%E6%A0%87%E5%87%86%E5%BA%93%E9%93%BE%E6%8E%A5.html" aria-label="åº“" iconsizing="both"><!---->åº“<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">ç”Ÿæ€</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/python/%E7%94%9F%E6%80%81/Web%E6%A1%86%E6%9E%B6/%E7%BD%91%E7%BB%9C%E6%A1%86%E6%9E%B6%E5%9F%BA%E7%A1%80/WEB%E6%A1%86%E6%9E%B6%E6%9C%AC%E8%B4%A8.html" aria-label="Webæ¡†æ¶" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-framework" sizing="both"></i><!--]-->Webæ¡†æ¶<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/python/%E7%94%9F%E6%80%81/%E8%BF%9C%E7%A8%8B%E8%B0%83%E7%94%A8/gRPC.html" aria-label="è¿œç¨‹è°ƒç”¨" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-rpc" sizing="both"></i><!--]-->è¿œç¨‹è°ƒç”¨<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/python/%E7%94%9F%E6%80%81/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka.html" aria-label="æ¶ˆæ¯é˜Ÿåˆ—" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-kafka" sizing="both"></i><!--]-->æ¶ˆæ¯é˜Ÿåˆ—<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/python/%E7%94%9F%E6%80%81/%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/Celery.html" aria-label="å¼‚æ­¥ä»»åŠ¡" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-tasks" sizing="both"></i><!--]-->å¼‚æ­¥ä»»åŠ¡<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Golang"><!--[--><i class="vp-icon iconfont icon-go" sizing="height"></i>Golang<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">åŸºç¡€</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/go/%E5%9F%BA%E7%A1%80/go%E8%AF%AD%E8%A8%80%E9%80%9F%E8%AE%B0.html" aria-label="goè¯­è¨€é€Ÿè®°" iconsizing="both"><!---->goè¯­è¨€é€Ÿè®°<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/go/%E5%9F%BA%E7%A1%80/go%E5%B7%A5%E5%85%B7%E9%80%9F%E7%94%A8.html" aria-label="goå·¥å…·é€Ÿç”¨" iconsizing="both"><!---->goå·¥å…·é€Ÿç”¨<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">ç®—æ³•ä¸æ•°æ®ç»“æ„</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/go/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A6%82%E8%BF%B0.html" aria-label="æ¦‚è¿°" iconsizing="both"><!---->æ¦‚è¿°<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">ä¼˜åŒ–</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/go/%E4%BC%98%E5%8C%96/%E5%85%B3%E4%BA%8EMapReduce.html" aria-label="ä¼˜åŒ–" iconsizing="both"><!---->ä¼˜åŒ–<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="æ•°æ®åº“"><!--[--><i class="vp-icon iconfont icon-database" sizing="height"></i>æ•°æ®åº“<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/etcd/etcd.html" aria-label="etcd" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-etcd" sizing="both"></i><!--]-->etcd<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/MySQL/MySQL.html" aria-label="MySQL" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-mysql" sizing="both"></i><!--]-->MySQL<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/Redis/redis.html" aria-label="Redis" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-redis" sizing="both"></i><!--]-->Redis<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/database/PostgreSQL/PostgreSQL.html" aria-label="PostgreSQL" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-postgresql" sizing="both"></i><!--]-->PostgreSQL<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="æ“ä½œç³»ç»Ÿ"><!--[--><i class="vp-icon iconfont icon-os" sizing="height"></i>æ“ä½œç³»ç»Ÿ<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/unix/Linux/Linux%E5%9F%BA%E7%A1%80%E6%8C%87%E5%BC%95/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%A6%82%E8%AE%BA.html" aria-label="Linux" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-linux" sizing="both"></i><!--]-->Linux<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/unix/CentOS/%E5%AE%89%E8%A3%85/CentOS%E7%9A%84%E5%AE%89%E8%A3%85.html" aria-label="CentOS" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-centos" sizing="both"></i><!--]-->CentOS<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/unix/Ubuntu/%E4%B8%8B%E8%BD%BD/Ubuntu%E7%B3%BB%E7%BB%9F.html" aria-label="Ubuntu" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-ubuntu" sizing="both"></i><!--]-->Ubuntu<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/unix/%E8%99%9A%E6%8B%9F%E6%9C%BA/PVE/PVE.html" aria-label="è™šæ‹Ÿæœº" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-pve" sizing="both"></i><!--]-->è™šæ‹Ÿæœº<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="è¿ç»´å·¥å…·"><!--[--><i class="vp-icon iconfont icon-devops" sizing="height"></i>è¿ç»´å·¥å…·<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/tool/Git/Git.html" aria-label="Git" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-git" sizing="both"></i><!--]-->Git<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/tool/Nginx/Nginx%E5%9F%BA%E7%A1%80.html" aria-label="Nginx" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-nginx" sizing="both"></i><!--]-->Nginx<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/tool/Docker/docker%E5%AE%B9%E5%99%A8.html" aria-label="Docker" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-docker" sizing="both"></i><!--]-->Docker<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/tool/Kubernetes/k8s%E8%B5%84%E6%BA%90Pod.html" aria-label="Kubernetes" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-kubernetes" sizing="both"></i><!--]-->Kubernetes<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/tool/Prometheus/%E5%AE%89%E8%A3%85.html" aria-label="Prometheus" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-prometheus" sizing="both"></i><!--]-->Prometheus<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/tool/Other/%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86.html" aria-label="å·¥å…·" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-other" sizing="both"></i><!--]-->å·¥å…·<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="æ¼«æ¼«å…¨å¹²å·çš„è‹¦"><!--[--><!---->æ¼«æ¼«å…¨å¹²å·çš„è‹¦<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://draveness.me/golang/" aria-label="GOè¯­è¨€è®¾è®¡ä¸å®ç°" rel="noopener noreferrer" target="_blank" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-go" sizing="both"></i><!--]-->GOè¯­è¨€è®¾è®¡ä¸å®ç°<!----></a></li><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://pegasuswang.github.io/LetsGo/basics/01_go_basic_types/basic_types/" aria-label="GOå¤‡å¿˜" rel="noopener noreferrer" target="_blank" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-go" sizing="both"></i><!--]-->GOå¤‡å¿˜<!----></a></li><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://notes.fe-mm.com/interview/base/types.html" aria-label="å‰ç«¯å†…å·ä¸å½’è·¯" rel="noopener noreferrer" target="_blank" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-javascript" sizing="both"></i><!--]-->å‰ç«¯å†…å·ä¸å½’è·¯<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/Igarashi-G" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-header clickable"><i class="vp-icon iconfont icon-python" sizing="both"></i><a class="route-link route-link-active auto-link vp-sidebar-title no-external-link-icon" href="/python/" aria-label="python" iconsizing="both"><!---->python<!----></a><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><i class="vp-icon iconfont icon-guide" sizing="both"></i><span class="vp-sidebar-title">è¯­è¨€</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><i class="vp-icon iconfont icon-guide" sizing="both"></i><span class="vp-sidebar-title">ç”Ÿæ€</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->å¼‚æ­¥ç¼–ç¨‹å²å›æº¯</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/Igarashi-G" target="_blank" rel="noopener noreferrer">æ‚¦Â·å®å®</a></span><span property="author" content="æ‚¦Â·å®å®"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2022/10/8</span><meta property="datePublished" content="2022-10-08T01:58:06.000Z"></span><!----><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 19 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT19M"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="å¼‚æ­¥ç¼–ç¨‹å²å›æº¯" tabindex="-1"><a class="header-anchor" href="#å¼‚æ­¥ç¼–ç¨‹å²å›æº¯"><span>å¼‚æ­¥ç¼–ç¨‹å²å›æº¯</span></a></h1><!----><p><a href="https://mp.weixin.qq.com/s/GgamzHPyZuSg45LoJKsofA" target="_blank" rel="noopener noreferrer">å›æº¯</a></p><h2 id="ä¸€ã€ç¨‹åºæ‰§è¡ŒåŸºç¡€æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€ç¨‹åºæ‰§è¡ŒåŸºç¡€æ¦‚å¿µ"><span>ä¸€ã€ç¨‹åºæ‰§è¡ŒåŸºç¡€æ¦‚å¿µï¼š</span></a></h2><h3 id="_1-1-é˜»å¡" tabindex="-1"><a class="header-anchor" href="#_1-1-é˜»å¡"><span><strong>1.1 é˜»å¡</strong></span></a></h3><ul><li>ç¨‹åºæœªå¾—åˆ°æ‰€éœ€è®¡ç®—èµ„æºæ—¶è¢«æŒ‚èµ·çš„çŠ¶æ€ã€‚</li><li><strong>ç¨‹åºåœ¨ç­‰å¾…æŸä¸ªæ“ä½œå®ŒæˆæœŸé—´ï¼Œè‡ªèº«æ— æ³•ç»§ç»­å¹²åˆ«çš„äº‹æƒ…ï¼Œåˆ™ç§°è¯¥ç¨‹åºåœ¨è¯¥æ“ä½œä¸Šæ˜¯é˜»å¡çš„ã€‚</strong></li><li>å¸¸è§çš„é˜»å¡å½¢å¼æœ‰ï¼šç½‘ç»œ I/O é˜»å¡ã€ç£ç›˜ I/O é˜»å¡ã€ç”¨æˆ·è¾“å…¥é˜»å¡ç­‰ã€‚</li></ul><p>é˜»å¡æ˜¯æ— å¤„ä¸åœ¨çš„ï¼ŒåŒ…æ‹¬ CPU åˆ‡æ¢ä¸Šä¸‹æ–‡æ—¶ï¼Œæ‰€æœ‰çš„è¿›ç¨‹éƒ½æ— æ³•çœŸæ­£å¹²äº‹æƒ…ï¼Œå®ƒä»¬ä¹Ÿä¼šè¢«é˜»å¡ã€‚ï¼ˆå¦‚æœæ˜¯å¤šæ ¸ CPU åˆ™æ­£åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢æ“ä½œçš„æ ¸ä¸å¯è¢«åˆ©ç”¨ï¼‰</p><h3 id="_1-2-éé˜»å¡" tabindex="-1"><a class="header-anchor" href="#_1-2-éé˜»å¡"><span>1.2 éé˜»å¡</span></a></h3><ul><li><p>ç¨‹åºåœ¨ç­‰å¾…æŸæ“ä½œè¿‡ç¨‹ä¸­ï¼Œè‡ªèº«ä¸è¢«é˜»å¡ï¼Œå¯ä»¥ç»§ç»­è¿è¡Œå¹²åˆ«çš„äº‹æƒ…ï¼Œåˆ™ç§°è¯¥ç¨‹åºåœ¨è¯¥æ“ä½œä¸Šæ˜¯éé˜»å¡çš„ã€‚</p></li><li><p>éé˜»å¡å¹¶ä¸æ˜¯åœ¨ä»»ä½•ç¨‹åºçº§åˆ«ã€ä»»ä½•æƒ…å†µä¸‹éƒ½å¯ä»¥å­˜åœ¨çš„ã€‚</p></li><li><p>ä»…å½“ç¨‹åºå°è£…çš„çº§åˆ«å¯ä»¥å›Šæ‹¬ç‹¬ç«‹çš„å­ç¨‹åºå•å…ƒæ—¶ï¼Œå®ƒæ‰å¯èƒ½å­˜åœ¨éé˜»å¡çŠ¶æ€ã€‚</p></li></ul><p>éé˜»å¡çš„å­˜åœ¨æ˜¯å› ä¸ºé˜»å¡å­˜åœ¨ï¼Œæ­£å› ä¸ºæŸä¸ªæ“ä½œé˜»å¡å¯¼è‡´çš„è€—æ—¶ä¸æ•ˆç‡ä½ä¸‹ï¼Œæˆ‘ä»¬æ‰è¦æŠŠå®ƒå˜æˆéé˜»å¡çš„ã€‚</p><h3 id="_1-3-åŒæ­¥" tabindex="-1"><a class="header-anchor" href="#_1-3-åŒæ­¥"><span>1.3 åŒæ­¥</span></a></h3><ul><li><p>ä¸åŒç¨‹åºå•å…ƒä¸ºäº†å®ŒæˆæŸä¸ªä»»åŠ¡ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­éœ€é æŸç§é€šä¿¡æ–¹å¼ä»¥åè°ƒä¸€è‡´ï¼Œç§°è¿™äº›ç¨‹åºå•å…ƒæ˜¯åŒæ­¥æ‰§è¡Œçš„ã€‚</p></li><li><p>ä¾‹å¦‚è´­ç‰©ç³»ç»Ÿä¸­æ›´æ–°å•†å“åº“å­˜ï¼Œéœ€è¦ç”¨â€œè¡Œé”â€ä½œä¸ºé€šä¿¡ä¿¡å·ï¼Œè®©ä¸åŒçš„æ›´æ–°è¯·æ±‚å¼ºåˆ¶æ’é˜Ÿé¡ºåºæ‰§è¡Œï¼Œé‚£æ›´æ–°åº“å­˜çš„æ“ä½œæ˜¯åŒæ­¥çš„ã€‚</p></li><li><p>ç®€è¨€ä¹‹ï¼ŒåŒæ­¥æ„å‘³ç€æœ‰åºã€‚</p></li></ul><h3 id="_1-4-å¼‚æ­¥" tabindex="-1"><a class="header-anchor" href="#_1-4-å¼‚æ­¥"><span>1.4 å¼‚æ­¥</span></a></h3><ul><li>ä¸ºå®ŒæˆæŸä¸ªä»»åŠ¡ï¼Œä¸åŒç¨‹åºå•å…ƒä¹‹é—´è¿‡ç¨‹ä¸­æ— éœ€é€šä¿¡åè°ƒï¼Œä¹Ÿèƒ½å®Œæˆä»»åŠ¡çš„æ–¹å¼ã€‚</li><li>ä¸ç›¸å…³çš„ç¨‹åºå•å…ƒä¹‹é—´å¯ä»¥æ˜¯å¼‚æ­¥çš„ã€‚<br> ä¾‹å¦‚ï¼Œçˆ¬è™«ä¸‹è½½ç½‘é¡µã€‚è°ƒåº¦ç¨‹åºè°ƒç”¨ä¸‹è½½ç¨‹åºåï¼Œå³å¯è°ƒåº¦å…¶ä»–ä»»åŠ¡ï¼Œè€Œæ— éœ€ä¸è¯¥ä¸‹è½½ä»»åŠ¡ä¿æŒé€šä¿¡ä»¥åè°ƒè¡Œä¸ºã€‚ä¸åŒç½‘é¡µçš„ä¸‹è½½ã€ä¿å­˜ç­‰æ“ä½œ<br> éƒ½æ˜¯æ— å…³çš„ï¼Œä¹Ÿæ— éœ€ç›¸äº’é€šçŸ¥åè°ƒã€‚è¿™äº›å¼‚æ­¥æ“ä½œçš„å®Œæˆæ—¶åˆ»å¹¶ä¸ç¡®å®šã€‚</li><li>ç®€è¨€ä¹‹ï¼Œå¼‚æ­¥æ„å‘³ç€æ— åºã€‚</li><li><span class="vp-badge queen" style="">åç¨‹</span>ã€<span class="vp-badge error" style="">è¿›ç¨‹æ± </span>ã€<span class="vp-badge info" style="">çº¿ç¨‹æ± </span> è¿™äº›æ–¹å¼éƒ½èƒ½å®ç°</li></ul><p>ä¸Šæ–‡æåˆ°çš„â€œé€šä¿¡æ–¹å¼â€é€šå¸¸æ˜¯æŒ‡å¼‚æ­¥å’Œå¹¶å‘ç¼–ç¨‹æä¾›çš„åŒæ­¥åŸè¯­ï¼Œå¦‚ä¿¡å·é‡ã€é”ã€åŒæ­¥é˜Ÿåˆ—ç­‰ç­‰ã€‚æˆ‘ä»¬éœ€çŸ¥é“ï¼Œè™½ç„¶è¿™äº›é€šä¿¡æ–¹å¼æ˜¯ä¸ºäº†è®©å¤šä¸ªç¨‹åº<br> åœ¨ä¸€å®šæ¡ä»¶ä¸‹åŒæ­¥æ‰§è¡Œï¼Œä½†æ­£å› ä¸ºæ˜¯å¼‚æ­¥çš„å­˜åœ¨ï¼Œæ‰éœ€è¦è¿™äº›é€šä¿¡æ–¹å¼ã€‚å¦‚æœæ‰€æœ‰ç¨‹åºéƒ½æ˜¯æŒ‰åºæ‰§è¡Œï¼Œå…¶æœ¬èº«å°±æ˜¯åŒæ­¥çš„ï¼Œåˆä½•éœ€è¿™äº›åŒæ­¥ä¿¡å·å‘¢ï¼Ÿ</p><h3 id="_1-5-å¹¶å‘" tabindex="-1"><a class="header-anchor" href="#_1-5-å¹¶å‘"><span>1.5 å¹¶å‘</span></a></h3><ul><li><p>å¹¶å‘æè¿°çš„æ˜¯ç¨‹åºçš„ç»„ç»‡ç»“æ„ã€‚æŒ‡ç¨‹åºè¦è¢«è®¾è®¡æˆå¤šä¸ªå¯ç‹¬ç«‹æ‰§è¡Œçš„å­ä»»åŠ¡ã€‚</p></li><li><p>ä»¥åˆ©ç”¨æœ‰é™çš„è®¡ç®—æœºèµ„æºä½¿å¤šä¸ªä»»åŠ¡å¯ä»¥è¢«å®æ—¶æˆ–è¿‘å®æ—¶æ‰§è¡Œä¸ºç›®çš„ã€‚</p></li></ul><h3 id="_1-6-å¹¶è¡Œ" tabindex="-1"><a class="header-anchor" href="#_1-6-å¹¶è¡Œ"><span>1.6 å¹¶è¡Œ</span></a></h3><ul><li><p>å¹¶è¡Œæè¿°çš„æ˜¯ç¨‹åºçš„æ‰§è¡ŒçŠ¶æ€ã€‚æŒ‡å¤šä¸ªä»»åŠ¡åŒæ—¶è¢«æ‰§è¡Œã€‚</p></li><li><p>ä»¥åˆ©ç”¨å¯Œä½™è®¡ç®—èµ„æºï¼ˆå¤šæ ¸ CPUï¼‰åŠ é€Ÿå®Œæˆå¤šä¸ªä»»åŠ¡ä¸ºç›®çš„ã€‚</p></li></ul><p>å¹¶å‘æä¾›äº†ä¸€ç§ç¨‹åºç»„ç»‡ç»“æ„æ–¹å¼ï¼Œè®©é—®é¢˜çš„è§£å†³æ–¹æ¡ˆå¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œä½†å¹¶è¡Œæ‰§è¡Œä¸æ˜¯å¿…é¡»çš„ã€‚</p><h3 id="_1-7-æ¦‚å¿µæ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_1-7-æ¦‚å¿µæ€»ç»“"><span>1.7 æ¦‚å¿µæ€»ç»“</span></a></h3><ul><li><p>[å¹¶è¡Œ]æ˜¯ä¸ºäº†åˆ©ç”¨å¤šæ ¸åŠ é€Ÿå¤šä»»åŠ¡å®Œæˆçš„è¿›åº¦</p></li><li><p>[å¹¶å‘]æ˜¯ä¸ºäº†è®©ç‹¬ç«‹çš„å­ä»»åŠ¡éƒ½æœ‰æœºä¼šè¢«å°½å¿«æ‰§è¡Œï¼Œä½†ä¸ä¸€å®šèƒ½åŠ é€Ÿæ•´ä½“è¿›åº¦</p></li><li><p>[éé˜»å¡]æ˜¯ä¸ºäº†æé«˜ç¨‹åºæ•´ä½“æ‰§è¡Œæ•ˆç‡</p></li><li><p>[å¼‚æ­¥]æ˜¯é«˜æ•ˆåœ°ç»„ç»‡éé˜»å¡ä»»åŠ¡çš„æ–¹å¼</p></li></ul><p>è¦æ”¯æŒå¹¶å‘ï¼Œå¿…é¡»æ‹†åˆ†ä¸ºå¤šä»»åŠ¡ï¼Œä¸åŒä»»åŠ¡ç›¸å¯¹è€Œè¨€æ‰æœ‰é˜»å¡/éé˜»å¡ã€åŒæ­¥/å¼‚æ­¥ã€‚æ‰€ä»¥ï¼Œå¹¶å‘ã€å¼‚æ­¥ã€éé˜»å¡ä¸‰ä¸ªè¯æ€»æ˜¯å¦‚å½±éšå½¢ã€‚</p><h3 id="_1-8-å¼‚æ­¥ç¼–ç¨‹" tabindex="-1"><a class="header-anchor" href="#_1-8-å¼‚æ­¥ç¼–ç¨‹"><span>1.8 å¼‚æ­¥ç¼–ç¨‹</span></a></h3><p>ä»¥è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹ã€å‡½æ•°/æ–¹æ³•ä½œä¸ºæ‰§è¡Œä»»åŠ¡ç¨‹åºçš„åŸºæœ¬å•ä½ï¼Œç»“åˆå›è°ƒã€äº‹ä»¶å¾ªç¯ã€ä¿¡å·é‡ç­‰æœºåˆ¶ï¼Œä»¥æé«˜ç¨‹åºæ•´ä½“æ‰§è¡Œæ•ˆç‡å’Œå¹¶å‘èƒ½åŠ›çš„ç¼–ç¨‹æ–¹å¼ã€‚</p><p>å¦‚æœåœ¨æŸç¨‹åºçš„è¿è¡Œæ—¶ï¼Œèƒ½æ ¹æ®å·²ç»æ‰§è¡Œçš„æŒ‡ä»¤å‡†ç¡®åˆ¤æ–­å®ƒæ¥ä¸‹æ¥è¦è¿›è¡Œå“ªä¸ªå…·ä½“æ“ä½œï¼Œé‚£å®ƒæ˜¯åŒæ­¥ç¨‹åºï¼Œåä¹‹åˆ™ä¸ºå¼‚æ­¥ç¨‹åºã€‚ï¼ˆæ— åºä¸æœ‰åºçš„åŒºåˆ«ï¼‰</p><p>åŒæ­¥/å¼‚æ­¥ã€é˜»å¡/éé˜»å¡å¹¶éæ°´ç«ä¸å®¹ï¼Œè¦çœ‹è®¨è®ºçš„ç¨‹åºæ‰€å¤„çš„å°è£…çº§åˆ«ã€‚ä¾‹å¦‚è´­ç‰©ç¨‹åºåœ¨å¤„ç†å¤šä¸ªç”¨æˆ·çš„æµè§ˆè¯·æ±‚å¯ä»¥æ˜¯å¼‚æ­¥çš„ï¼Œè€Œæ›´æ–°åº“å­˜æ—¶å¿…é¡»æ˜¯åŒæ­¥çš„ã€‚</p><h3 id="_1-9-å¼‚æ­¥ä¹‹nan" tabindex="-1"><a class="header-anchor" href="#_1-9-å¼‚æ­¥ä¹‹nan"><span>1.9 å¼‚æ­¥ä¹‹<code>nÃ¡n</code></span></a></h3><p>æ§åˆ¶ä¸ä½â€œå¯„å‡ â€å†™çš„ç¨‹åºï¼Œå› ä¸ºå…¶æ‰§è¡Œé¡ºåºä¸å¯é¢„æ–™ï¼Œå½“ä¸‹æ­£è¦å‘ç”Ÿä»€ä¹ˆäº‹ä»¶ä¸å¯é¢„æ–™ã€‚åœ¨å¹¶è¡Œæƒ…å†µä¸‹æ›´ä¸ºå¤æ‚å’Œè‰°éš¾ã€‚</p><p>æ‰€ä»¥ï¼Œå‡ ä¹æ‰€æœ‰çš„å¼‚æ­¥æ¡†æ¶éƒ½å°†å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ç®€åŒ–ï¼šä¸€æ¬¡åªå…è®¸å¤„ç†ä¸€ä¸ªäº‹ä»¶ã€‚æ•…è€Œæœ‰å…³å¼‚æ­¥çš„è®¨è®ºå‡ ä¹éƒ½é›†ä¸­åœ¨äº†å•çº¿ç¨‹å†…ã€‚</p><p>å¦‚æœæŸäº‹ä»¶å¤„ç†ç¨‹åºéœ€è¦é•¿æ—¶é—´æ‰§è¡Œï¼Œæ‰€æœ‰å…¶ä»–éƒ¨åˆ†éƒ½ä¼šè¢«é˜»å¡ã€‚</p><p>æ‰€ä»¥ï¼Œä¸€æ—¦é‡‡å–å¼‚æ­¥ç¼–ç¨‹ï¼Œæ¯ä¸ªå¼‚æ­¥è°ƒç”¨å¿…é¡»â€œè¶³å¤Ÿå°â€ï¼Œä¸èƒ½è€—æ—¶å¤ªä¹…ã€‚å¦‚ä½•æ‹†åˆ†å¼‚æ­¥ä»»åŠ¡æˆäº†éš¾é¢˜ã€‚</p><p>ç¨‹åºä¸‹ä¸€æ­¥è¡Œä¸ºå¾€å¾€ä¾èµ–ä¸Šä¸€æ­¥æ‰§è¡Œç»“æœï¼Œå¦‚ä½•çŸ¥æ™“ä¸Šæ¬¡å¼‚æ­¥è°ƒç”¨å·²å®Œæˆå¹¶è·å–ç»“æœï¼Ÿ</p><p>å›è°ƒï¼ˆCallbackï¼‰æˆäº†å¿…ç„¶é€‰æ‹©ã€‚é‚£åˆéœ€è¦é¢ä¸´â€œå›è°ƒåœ°ç‹±â€çš„æŠ˜ç£¨ã€‚</p><p>åŒæ­¥ä»£ç æ”¹ä¸ºå¼‚æ­¥ä»£ç ï¼Œå¿…ç„¶ç ´åä»£ç ç»“æ„ã€‚</p><p>è§£å†³é—®é¢˜çš„é€»è¾‘ä¹Ÿè¦è½¬å˜ï¼Œä¸å†æ˜¯ä¸€æ¡è·¯èµ°åˆ°é»‘ï¼Œéœ€è¦ç²¾å¿ƒå®‰æ’å¼‚æ­¥ä»»åŠ¡ã€‚</p><h2 id="_2-è‹¦å¿ƒå¼‚æ­¥ä¸ºå“ªèˆ¬" tabindex="-1"><a class="header-anchor" href="#_2-è‹¦å¿ƒå¼‚æ­¥ä¸ºå“ªèˆ¬"><span>2 è‹¦å¿ƒå¼‚æ­¥ä¸ºå“ªèˆ¬</span></a></h2><p>å¦‚ä¸Šæ–‡æ‰€è¿°ï¼Œå¼‚æ­¥ç¼–ç¨‹é¢ä¸´è¯¸å¤šéš¾ç‚¹ï¼ŒPython ä¹‹çˆ¶äº²è‡ªä¸Šé˜µæ‰“ç£¨ 4 å¹´æ‰ä½¿ asyncio æ¨¡å—åœ¨ Python 3.6 ä¸­â€œè½¬æ­£â€ï¼Œå¦‚æ­¤è‹¦å¿ƒä¸ºä»€ä¹ˆï¼Ÿç­”æ¡ˆåªæœ‰ä¸€ä¸ªï¼š<br> å®ƒå€¼å¾—ï¼ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹ä¸ºä½•è€Œå€¼å¾—ã€‚</p><h3 id="_2-1-cpu-çš„æ—¶é—´è§‚" tabindex="-1"><a class="header-anchor" href="#_2-1-cpu-çš„æ—¶é—´è§‚"><span>2.1 CPU çš„æ—¶é—´è§‚</span></a></h3><p>æˆ‘ä»¬å°†ä¸€ä¸ª 2.6GHz çš„ CPU æ‹ŸäººåŒ–ï¼Œå‡è®¾å®ƒæ‰§è¡Œä¸€æ¡å‘½ä»¤çš„æ—¶é—´ï¼Œä»–å®ƒæ„Ÿè§‰ä¸Šè¿‡äº†ä¸€ç§’é’Ÿã€‚CPU æ˜¯è®¡ç®—æœºçš„å¤„ç†æ ¸å¿ƒï¼Œä¹Ÿæ˜¯æœ€å®è´µçš„èµ„æºï¼Œå¦‚æœæœ‰<br> æµªè´¹ CPU çš„è¿è¡Œæ—¶é—´ï¼Œå¯¼è‡´å…¶åˆ©ç”¨ç‡ä¸è¶³ï¼Œé‚£ç¨‹åºæ•ˆç‡å¿…ç„¶ä½ä¸‹ï¼ˆå› ä¸ºå®é™…ä¸Šæœ‰èµ„æºå¯ä»¥ä½¿æ•ˆç‡æ›´é«˜ï¼‰ã€‚</p><pre><code>CPUçš„æ—¶é—´è§‚ï¼š
    æ“ä½œ          çœŸå®å»¶è¿Ÿ            CPUçš„æ„Ÿè§‰
    æ‰§æŒ‡          0.38çº³ç§’               1ç§’
   å†…å­˜å¯»å€        100çº³ç§’             4åˆ†20ç§’
ä¸Šä¸‹æ–‡åˆ‡æ¢/ç³»ç»Ÿè°ƒç”¨ 1.5å¾®å¦™             1å°æ—¶5åˆ†é’Ÿ
Pingé€šIDCä¸¤å°ä¸»æœº  0.5æ¯«ç§’               15å¤©
ç¡¬ç›˜è¯»å–1Mè¿ç»­æ•°æ®  20æ¯«ç§’               20ä¸ªæœˆ
pingé€šä¸åŒåŸå¸‚ä¸»æœº  150æ¯«ç§’              12.5å¹´
  è™šæ‹Ÿæœºé‡å¯         4ç§’                 200å¹´
  æœåŠ¡å™¨é‡å¯        5åˆ†é’Ÿ                2ä¸‡5åƒå¹´
</code></pre><p>å¦‚ä¸Šæ–‡æ‰€ç¤ºï¼Œåœ¨åƒå…†ç½‘ä¸Šä¼ è¾“ 2KB æ•°æ®ï¼ŒCPU æ„Ÿè§‰è¿‡äº† 14 ä¸ªå°æ—¶ï¼Œå¦‚æœæ˜¯åœ¨ 10M çš„å…¬ç½‘ä¸Šå‘¢ï¼Ÿé‚£æ•ˆç‡ä¼šä½ç™¾å€ï¼å¦‚æœåœ¨è¿™ä¹ˆé•¿çš„ä¸€æ®µæ—¶é—´å†…ï¼ŒCPU åªæ˜¯å‚»<br> ç­‰ç»“æœè€Œä¸èƒ½å»å¹²å…¶ä»–äº‹æƒ…ï¼Œæ˜¯ä¸æ˜¯åœ¨æµªè´¹ CPU çš„é’æ˜¥ï¼Ÿ</p><p>é²è¿…è¯´ï¼Œæµªè´¹â€œCPUâ€çš„æ—¶é—´ç­‰äºè°‹è´¢å®³å‘½ã€‚è€Œå‡¶æ‰‹å°±æ˜¯ç¨‹åºçŒ¿ã€‚</p><h3 id="_2-2-é¢ä¸´çš„é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_2-2-é¢ä¸´çš„é—®é¢˜"><span>2.2 é¢ä¸´çš„é—®é¢˜</span></a></h3><ul><li><p>æˆæœ¬é—®é¢˜:</p><pre><code>  å¦‚æœä¸€ä¸ªç¨‹åºä¸èƒ½æœ‰æ•ˆåˆ©ç”¨ä¸€å°è®¡ç®—æœºèµ„æºï¼Œé‚£å¿…ç„¶éœ€è¦æ›´å¤šçš„è®¡ç®—æœºé€šè¿‡è¿è¡Œæ›´å¤šçš„ç¨‹åºå®ä¾‹æ¥å¼¥è¡¥éœ€æ±‚ç¼ºå£ã€‚ä¾‹å¦‚æˆ‘å‰ä¸ä¹…ä¸»å¯¼é‡å†™
  çš„é¡¹ç›®ï¼Œä½¿ç”¨Pythonå¼‚æ­¥ç¼–ç¨‹ï¼Œæ”¹ç‰ˆåç”±åŸæ¥çš„7å°æœåŠ¡å™¨å‰Šå‡è‡³3å°ï¼Œæˆæœ¬éª¤é™57%ã€‚ä¸€å°AWS m4.xlarge å‹é€šç”¨æœåŠ¡å™¨æŒ‰éœ€ä»˜è´¹å®ä¾‹
  ä¸€å¹´ä»·æ ¼çº¦ 1.2 ä¸‡äººæ°‘å¸ã€‚
</code></pre></li><li><p>æ•ˆç‡é—®é¢˜:</p><pre><code>  å¦‚æœä¸åœ¨ä¹é’±çš„æ¶ˆè€—ï¼Œé‚£ä¹Ÿä¼šåœ¨æ„æ•ˆç‡é—®é¢˜ã€‚å½“æœåŠ¡å™¨æ•°é‡å †å åˆ°ä¸€å®šè§„æ¨¡åï¼Œå¦‚æœä¸æ”¹è¿›è½¯ä»¶æ¶æ„å’Œå®ç°ï¼ŒåŠ æœºå™¨æ˜¯å¾’åŠ³ï¼Œè€Œä¸”è¿ç»´æˆæœ¬
  ä¼šéª¤ç„¶å¢åŠ ã€‚æ¯”å¦‚åˆ«äººå®¶çš„ç”µå•†å¹³å°æ”¯æŒ6000å•/ç§’æ”¯ä»˜ï¼Œè€Œè‡ªå®¶åœ¨ä¸‹å•é‡æ‰æ”¯æ’‘2000å•/ç§’ï¼Œåœ¨åŒåä¸€è¿™ç§æ´»åŠ¨çš„æ—¶å€™ï¼Œé’±é€ä¸Šé—¨ä¹Ÿèµšä¸åˆ°ã€‚
</code></pre></li><li><p>C10k/C10M æŒ‘æˆ˜</p><pre><code>  C10kï¼ˆconcurrently handling 10k connectionsï¼‰æ˜¯ä¸€ä¸ªåœ¨1999å¹´è¢«æå‡ºæ¥çš„æŠ€æœ¯æŒ‘æˆ˜ï¼Œå¦‚ä½•åœ¨ä¸€é¢—1GHz CPUï¼Œ2Gå†…å­˜ï¼Œ1gbpsç½‘ç»œ
  ç¯å¢ƒä¸‹ï¼Œè®©å•å°æœåŠ¡å™¨åŒæ—¶ä¸º1ä¸‡ä¸ªå®¢æˆ·ç«¯æä¾›FTPæœåŠ¡ã€‚è€Œåˆ°äº†2010å¹´åï¼Œéšç€ç¡¬ä»¶æŠ€æœ¯çš„å‘å±•ï¼Œè¿™ä¸ªé—®é¢˜è¢«å»¶ä¼¸ä¸ºC10Mï¼Œå³å¦‚ä½•åˆ©ç”¨8æ ¸
  å¿ƒCPUï¼Œ64Gå†…å­˜ï¼Œåœ¨10gbpsçš„ç½‘ç»œä¸Šä¿æŒ1000ä¸‡å¹¶å‘è¿æ¥ï¼Œæˆ–æ˜¯æ¯ç§’é’Ÿå¤„ç†100ä¸‡çš„è¿æ¥ã€‚ï¼ˆä¸¤ç§ç±»å‹çš„è®¡ç®—æœºèµ„æºåœ¨å„è‡ªçš„æ—¶ä»£éƒ½çº¦ä¸º
  1200ç¾å…ƒï¼‰
</code></pre></li></ul><p>æˆæœ¬å’Œæ•ˆç‡é—®é¢˜æ˜¯ä»ä¼ä¸šç»è¥è§’åº¦è®²ï¼ŒC10k/C10M é—®é¢˜åˆ™æ˜¯ä»æŠ€æœ¯è§’åº¦å‡ºå‘æŒ‘æˆ˜è½¯ç¡¬ä»¶æé™ã€‚C10k/C10M é—®é¢˜å¾—è§£ï¼Œæˆæœ¬é—®é¢˜å’Œæ•ˆç‡é—®é¢˜è¿åˆƒè€Œè§£ã€‚</p><h3 id="_2-3-è§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_2-3-è§£å†³æ–¹æ¡ˆ"><span>2.3 è§£å†³æ–¹æ¡ˆ</span></a></h3><p>ã€Šçº¦æŸç†è®ºä¸ä¼ä¸šä¼˜åŒ–ã€‹ä¸­æŒ‡å‡ºï¼šâ€œé™¤äº†ç“¶é¢ˆä¹‹å¤–ï¼Œä»»ä½•æ”¹è¿›éƒ½æ˜¯å¹»è§‰ã€‚â€</p><p>CPU å‘Šè¯‰æˆ‘ä»¬ï¼Œå®ƒè‡ªå·±å¾ˆå¿«ï¼Œè€Œä¸Šä¸‹æ–‡åˆ‡æ¢æ…¢ã€å†…å­˜è¯»æ•°æ®æ…¢ã€ç£ç›˜å¯»å€ä¸å–æ•°æ®æ…¢ã€ç½‘ç»œä¼ è¾“æ…¢â€¦â€¦æ€»ä¹‹ï¼Œç¦»å¼€ CPU åçš„ä¸€åˆ‡ï¼Œé™¤äº†ä¸€çº§é«˜é€Ÿç¼“å­˜ï¼Œéƒ½å¾ˆæ…¢ã€‚æˆ‘ä»¬è§‚å¯Ÿè®¡ç®—æœºçš„ç»„æˆå¯ä»¥çŸ¥é“ï¼Œä¸»è¦ç”±è¿ç®—å™¨ã€æ§åˆ¶å™¨ã€å­˜å‚¨å™¨ã€è¾“å…¥è®¾å¤‡ã€è¾“å‡ºè®¾å¤‡äº”éƒ¨åˆ†ç»„æˆã€‚è¿ç®—å™¨å’Œæ§åˆ¶å™¨ä¸»è¦é›†æˆåœ¨ CPU ä¸­ï¼Œé™¤æ­¤ä¹‹å¤–å…¨æ˜¯ I/Oï¼ŒåŒ…æ‹¬è¯»å†™å†…å­˜ã€è¯»å†™ç£ç›˜ã€è¯»å†™ç½‘å¡å…¨éƒ½æ˜¯ I/Oã€‚I/O æˆäº†æœ€å¤§çš„ç“¶é¢ˆã€‚</p><p>å¼‚æ­¥ç¨‹åºå¯ä»¥æé«˜æ•ˆç‡ï¼Œè€Œæœ€å¤§çš„ç“¶é¢ˆåœ¨ I/Oï¼Œä¸šç•Œè¯ç”Ÿçš„è§£å†³æ–¹æ¡ˆæ²¡å‡ºæ„æ–™ï¼šå¼‚æ­¥ I/O å§ï¼Œå¼‚æ­¥ I/O å§ï¼Œå¼‚æ­¥ I/O å§å§ï¼</p><h2 id="_3-å¼‚æ­¥-i-o-è¿›åŒ–ä¹‹è·¯" tabindex="-1"><a class="header-anchor" href="#_3-å¼‚æ­¥-i-o-è¿›åŒ–ä¹‹è·¯"><span>3 å¼‚æ­¥ I/O è¿›åŒ–ä¹‹è·¯</span></a></h2><p>å¦‚ä»Šï¼Œåœ°çƒä¸Šæœ€å‘è¾¾ã€è§„æ¨¡æœ€åºå¤§çš„è®¡ç®—æœºç¨‹åºï¼Œè«è¿‡äºå› ç‰¹ç½‘ã€‚è€Œä» CPU çš„æ—¶é—´è§‚ä¸­å¯çŸ¥ï¼Œç½‘ç»œ I/O æ˜¯æœ€å¤§çš„ I/O ç“¶é¢ˆï¼Œé™¤äº†å®•æœºæ²¡æœ‰æ¯”å®ƒæ›´æ…¢çš„<br> ã€‚æ‰€ä»¥ï¼Œè¯¸å¤šå¼‚æ­¥æ¡†æ¶éƒ½å¯¹å‡†çš„æ˜¯ç½‘ç»œ I/Oã€‚</p><p>æˆ‘ä»¬ä»ä¸€ä¸ªçˆ¬è™«ä¾‹å­è¯´èµ·ï¼Œä»å› ç‰¹ç½‘ä¸Šä¸‹è½½ 10 ç¯‡ç½‘é¡µã€‚</p><h3 id="_3-1-åŒæ­¥é˜»å¡æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_3-1-åŒæ­¥é˜»å¡æ–¹å¼"><span>3.1 åŒæ­¥é˜»å¡æ–¹å¼</span></a></h3><p>æœ€å®¹æ˜“æƒ³åˆ°çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯ä¾æ¬¡ä¸‹è½½ï¼Œä»å»ºç«‹ socket è¿æ¥åˆ°å‘é€ç½‘ç»œè¯·æ±‚å†åˆ°è¯»å–å“åº”æ•°æ®ï¼Œé¡ºåºè¿›è¡Œã€‚</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> socket</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> blocking_way</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">():</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    sock </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> socket.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">socket</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # blocking</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    sock.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">connect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;example.com&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">80</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    request </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;GET HTTP:1.0/</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\r\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Host: example.com</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\r\n\r\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    sock.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">send</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(request.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">encode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ascii&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    response </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    chunk </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sock.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">recv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4096</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(chunk)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    while</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> chunk:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        response </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> chunk</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # blocking</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        chunk </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sock.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">recv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4096</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> response</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> sync_way</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">():</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    res </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> []</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> range</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        res.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">append</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">blocking_way</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> len</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(res)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> __name__</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;__main__&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> time</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    start </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> time.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">time</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">    sync_way</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(time.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">time</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> start)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>[æ³¨]ï¼šæ€»ä½“è€—æ—¶çº¦ä¸º 4.5 ç§’ã€‚ï¼ˆå› ç½‘ç»œæ³¢åŠ¨æ¯æ¬¡æµ‹è¯•ç»“æœæœ‰æ‰€å˜åŠ¨ï¼Œæœ¬æ–‡å–å¤šæ¬¡å¹³å‡å€¼ï¼‰</p><p>å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œblocking_way() çš„ä½œç”¨æ˜¯å»ºç«‹ socket è¿æ¥ï¼Œå‘é€ HTTP è¯·æ±‚ï¼Œç„¶åä» socket è¯»å– HTTP å“åº”å¹¶è¿”å›æ•°æ®ã€‚ç¤ºä¾‹ä¸­æˆ‘ä»¬è¯·æ±‚äº†<br><a href="http://example.com" target="_blank" rel="noopener noreferrer">example.com</a> çš„é¦–é¡µã€‚åœ¨ sync_way() æ‰§è¡Œäº† 10 æ¬¡ï¼Œå³ä¸‹è½½ <a href="http://example.com" target="_blank" rel="noopener noreferrer">example.com</a> é¦–é¡µ 10 æ¬¡ã€‚</p><p>åœ¨ç¤ºä¾‹ä»£ç ä¸­æœ‰ä¸¤ä¸ªå…³é”®ç‚¹ã€‚ä¸€æ˜¯ç¬¬ 10 è¡Œçš„ sock.connect((â€˜<a href="http://example.com" target="_blank" rel="noopener noreferrer">example.com</a>â€™, 80))ï¼Œè¯¥è°ƒç”¨çš„ä½œç”¨æ˜¯å‘ <a href="http://example.com" target="_blank" rel="noopener noreferrer">example.com</a> ä¸»æœºçš„ 80 ç«¯å£å‘èµ·ç½‘ç»œè¿æ¥<br> è¯·æ±‚ã€‚ äºŒæ˜¯ç¬¬ 14 è¡Œã€ç¬¬ 18 è¡Œçš„ sock.recv(4096)ï¼Œè¯¥è°ƒç”¨çš„ä½œç”¨æ˜¯ä» socket ä¸Šè¯»å– 4K å­—èŠ‚æ•°æ®ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œåˆ›å»ºç½‘ç»œè¿æ¥ï¼Œå¤šä¹…èƒ½åˆ›å»ºå®Œæˆä¸æ˜¯å®¢æˆ·ç«¯å†³å®šçš„ï¼Œè€Œæ˜¯ç”±ç½‘ç»œçŠ¶å†µå’ŒæœåŠ¡ç«¯å¤„ç†èƒ½åŠ›å…±åŒå†³å®šã€‚æœåŠ¡ç«¯ä»€ä¹ˆæ—¶å€™è¿”å›äº†å“åº”æ•°æ®å¹¶è¢«å®¢æˆ·<br> ç«¯æ¥æ”¶åˆ°å¯ä¾›ç¨‹åºè¯»å–ï¼Œä¹Ÿæ˜¯ä¸å¯é¢„æµ‹çš„ã€‚æ‰€ä»¥ sock.connect()å’Œ sock.recv()è¿™ä¸¤ä¸ªè°ƒç”¨åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯é˜»å¡çš„ã€‚</p><p>[æ³¨]ï¼šsock.send()å‡½æ•°å¹¶ä¸ä¼šé˜»å¡å¤ªä¹…ï¼Œå®ƒåªè´Ÿè´£å°†è¯·æ±‚æ•°æ®æ‹·è´åˆ° TCP/IP åè®®æ ˆçš„ç³»ç»Ÿç¼“å†²åŒºä¸­å°±è¿”å›ï¼Œå¹¶ä¸ç­‰å¾…æœåŠ¡ç«¯è¿”å›çš„åº”ç­”ç¡®è®¤ã€‚</p><p>å‡è®¾ç½‘ç»œç¯å¢ƒå¾ˆå·®ï¼Œåˆ›å»ºç½‘ç»œè¿æ¥éœ€è¦ 1 ç§’é’Ÿï¼Œé‚£ä¹ˆ sock.connect()å°±å¾—é˜»å¡ 1 ç§’é’Ÿï¼Œç­‰å¾…ç½‘ç»œè¿æ¥æˆåŠŸã€‚è¿™ 1 ç§’é’Ÿå¯¹ä¸€é¢— 2.6GHz çš„ CPU æ¥è®²ï¼Œä»¿ä½›è¿‡å»<br> äº† 83 å¹´ï¼Œç„¶è€Œå®ƒä¸èƒ½å¹²ä»»ä½•äº‹æƒ…ã€‚sock.recv()ä¹Ÿæ˜¯ä¸€æ ·çš„å¿…é¡»å¾—ç­‰åˆ°æœåŠ¡ç«¯çš„å“åº”æ•°æ®å·²ç»è¢«å®¢æˆ·ç«¯æ¥æ”¶ã€‚æˆ‘ä»¬ä¸‹è½½ 10 ç¯‡ç½‘é¡µï¼Œè¿™ä¸ªé˜»å¡è¿‡ç¨‹å°±å¾—<br> é‡å¤ 10 æ¬¡ã€‚å¦‚æœä¸€ä¸ªçˆ¬è™«ç³»ç»Ÿæ¯å¤©è¦ä¸‹è½½ 1000 ä¸‡ç¯‡ç½‘é¡µå‘¢ï¼Ÿï¼</p><p>ä¸Šé¢è¯´äº†å¾ˆå¤šï¼Œæˆ‘ä»¬åŠ›å›¾è¯´æ˜ä¸€ä»¶äº‹ï¼šåŒæ­¥é˜»å¡çš„ç½‘ç»œäº¤äº’æ–¹å¼ï¼Œæ•ˆç‡ä½ååˆ†ä½ä¸‹ã€‚ç‰¹åˆ«æ˜¯åœ¨ç½‘ç»œäº¤äº’é¢‘ç¹çš„ç¨‹åºä¸­ã€‚è¿™ç§æ–¹å¼æ ¹æœ¬ä¸å¯èƒ½æŒ‘<br> æˆ˜ C10K/C10Mã€‚</p><h3 id="_3-2-æ”¹è¿›æ–¹å¼-å¤šè¿›ç¨‹" tabindex="-1"><a class="header-anchor" href="#_3-2-æ”¹è¿›æ–¹å¼-å¤šè¿›ç¨‹"><span>3.2 æ”¹è¿›æ–¹å¼ï¼šå¤šè¿›ç¨‹</span></a></h3><p>åœ¨ä¸€ä¸ªç¨‹åºå†…ï¼Œä¾æ¬¡æ‰§è¡Œ 10 æ¬¡å¤ªè€—æ—¶ï¼Œé‚£å¼€ 10 ä¸ªä¸€æ ·çš„ç¨‹åºåŒæ—¶æ‰§è¡Œä¸å°±è¡Œäº†ã€‚äºæ˜¯æˆ‘ä»¬æƒ³åˆ°äº†å¤šè¿›ç¨‹ç¼–ç¨‹ã€‚ä¸ºä»€ä¹ˆä¼šå…ˆæƒ³åˆ°å¤šè¿›ç¨‹å‘¢ï¼Ÿå‘å±•è„‰ç»œ<br> å¦‚æ­¤ã€‚åœ¨æ›´æ—©çš„æ“ä½œç³»ç»Ÿï¼ˆLinux 2.4ï¼‰åŠå…¶ä»¥å‰ï¼Œè¿›ç¨‹æ˜¯ OS è°ƒåº¦ä»»åŠ¡çš„å®ä½“ï¼Œæ˜¯é¢å‘è¿›ç¨‹è®¾è®¡çš„ OSã€‚</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> socket</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> concurrent </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> futures</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> blocking_way</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">():</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    sock </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> socket.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">socket</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # blocking</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    sock.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">connect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;example.com&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">80</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    request </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;GET HTTP:1.0/</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\r\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Host: example.com</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\r\n\r\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    sock.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">send</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(request.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">encode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ascii&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    response </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    chunk </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sock.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">recv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4096</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(chunk)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    while</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> chunk:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        response </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> chunk</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # blocking</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        chunk </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sock.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">recv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4096</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> response</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> process_way</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">():</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    workers </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    with</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> futures.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">ProcessPoolExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(workers) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">as</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> executor:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        futs </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {executor.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">submit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(blocking_way) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> range</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> len</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">([fut.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> fut </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> futs])</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>[æ³¨]ï¼šæ€»ä½“è€—æ—¶çº¦ä¸º 0.6 ç§’ã€‚(è‡ªæµ‹ï¼Œwindows ä¸‹å¹¶æ²¡æœ‰ï¼Œä¹Ÿè¦ 2~3s)</p><p>æ”¹å–„æ•ˆæœç«‹ç«¿è§å½±ã€‚ä½†ä»ç„¶æœ‰é—®é¢˜ã€‚æ€»ä½“è€—æ—¶å¹¶æ²¡æœ‰ç¼©å‡åˆ°åŸæ¥çš„ååˆ†ä¹‹ä¸€ï¼Œè€Œæ˜¯ä¹åˆ†ä¹‹ä¸€å·¦å³ï¼Œè¿˜æœ‰ä¸€äº›æ—¶é—´è€—åˆ°å“ªé‡Œå»äº†ï¼Ÿè¿›ç¨‹åˆ‡æ¢å¼€é”€ã€‚</p><p>è¿›ç¨‹åˆ‡æ¢å¼€é”€ä¸æ­¢åƒâ€œCPU çš„æ—¶é—´è§‚â€æ‰€åˆ—çš„â€œä¸Šä¸‹æ–‡åˆ‡æ¢â€é‚£ä¹ˆä½ã€‚CPU ä»ä¸€ä¸ªè¿›ç¨‹åˆ‡æ¢åˆ°å¦ä¸€ä¸ªè¿›ç¨‹ï¼Œéœ€è¦æŠŠæ—§è¿›ç¨‹è¿è¡Œæ—¶çš„å¯„å­˜å™¨çŠ¶æ€ã€å†…å­˜çŠ¶æ€å…¨éƒ¨<br> ä¿å­˜å¥½ï¼Œå†å°†å¦ä¸€ä¸ªè¿›ç¨‹ä¹‹å‰ä¿å­˜çš„æ•°æ®æ¢å¤ã€‚å¯¹ CPU æ¥è®²ï¼Œå‡ ä¸ªå°æ—¶å°±å¹²ç­‰ç€ã€‚å½“è¿›ç¨‹æ•°é‡å¤§äº CPU æ ¸å¿ƒæ•°é‡æ—¶ï¼Œè¿›ç¨‹åˆ‡æ¢æ˜¯å¿…ç„¶éœ€è¦çš„ã€‚</p><p>é™¤äº†åˆ‡æ¢å¼€é”€ï¼Œå¤šè¿›ç¨‹è¿˜æœ‰å¦å¤–çš„ç¼ºç‚¹ã€‚ä¸€èˆ¬çš„æœåŠ¡å™¨åœ¨èƒ½å¤Ÿç¨³å®šè¿è¡Œçš„å‰æä¸‹ï¼Œå¯ä»¥åŒæ—¶å¤„ç†çš„è¿›ç¨‹æ•°åœ¨æ•°åä¸ªåˆ°æ•°ç™¾ä¸ªè§„æ¨¡ã€‚å¦‚æœè¿›ç¨‹æ•°é‡è§„æ¨¡<br> æ›´å¤§ï¼Œç³»ç»Ÿè¿è¡Œå°†ä¸ç¨³å®šï¼Œè€Œä¸”å¯ç”¨å†…å­˜èµ„æºå¾€å¾€ä¹Ÿä¼šä¸è¶³ã€‚</p><p>å¤šè¿›ç¨‹è§£å†³æ–¹æ¡ˆåœ¨é¢ä¸´æ¯å¤©éœ€è¦æˆç™¾ä¸Šåƒä¸‡æ¬¡ä¸‹è½½ä»»åŠ¡çš„çˆ¬è™«ç³»ç»Ÿï¼Œæˆ–è€…éœ€è¦åŒæ—¶æå®šæ•°ä¸‡å¹¶å‘çš„ç”µå•†ç³»ç»Ÿæ¥è¯´ï¼Œå¹¶ä¸é€‚åˆã€‚</p><p>é™¤äº†åˆ‡æ¢å¼€é”€å¤§ï¼Œä»¥åŠå¯æ”¯æŒçš„ä»»åŠ¡è§„æ¨¡å°ä¹‹å¤–ï¼Œå¤šè¿›ç¨‹è¿˜æœ‰å…¶ä»–ç¼ºç‚¹ï¼Œå¦‚çŠ¶æ€å…±äº«ç­‰é—®é¢˜ï¼Œåæ–‡ä¼šæœ‰æåŠï¼Œæ­¤å¤„ä¸å†ç»†ç©¶ã€‚</p><h3 id="_3-3-ç»§ç»­æ”¹è¿›-å¤šçº¿ç¨‹" tabindex="-1"><a class="header-anchor" href="#_3-3-ç»§ç»­æ”¹è¿›-å¤šçº¿ç¨‹"><span>3.3 ç»§ç»­æ”¹è¿›ï¼šå¤šçº¿ç¨‹</span></a></h3><p>ç”±äºçº¿ç¨‹çš„æ•°æ®ç»“æ„æ¯”è¿›ç¨‹æ›´è½»é‡çº§ï¼ŒåŒä¸€ä¸ªè¿›ç¨‹å¯ä»¥å®¹çº³å¤šä¸ªçº¿ç¨‹ï¼Œä»è¿›ç¨‹åˆ°çº¿ç¨‹çš„ä¼˜åŒ–ç”±æ­¤å±•å¼€ã€‚åæ¥çš„ OS ä¹ŸæŠŠè°ƒåº¦å•ä½ç”±è¿›ç¨‹è½¬ä¸ºçº¿ç¨‹ï¼Œè¿›<br> ç¨‹åªä½œä¸ºçº¿ç¨‹çš„å®¹å™¨ï¼Œç”¨äºç®¡ç†è¿›ç¨‹æ‰€éœ€çš„èµ„æºã€‚è€Œä¸” OS çº§åˆ«çš„çº¿ç¨‹æ˜¯å¯ä»¥è¢«åˆ†é…åˆ°ä¸åŒçš„ CPU æ ¸å¿ƒåŒæ—¶è¿è¡Œçš„ã€‚</p><pre><code>def thread_way():
    workers = 10
    with futures.ThreadPoolExecutor(workers) as executor:
        futs = {executor.submit(blocking_way) for i in range(10)}
    return len([fut.result() for fut in futs])
</code></pre><p>[æ³¨]ï¼šæ€»ä½“è¿è¡Œæ—¶é—´çº¦ 0.43 ç§’ã€‚(æˆ‘æ‰¿è®¤ï¼Œæ˜¯å¿«äº†ä¸å°‘)</p><p>ç»“æœç¬¦åˆé¢„æœŸï¼Œæ¯”å¤šè¿›ç¨‹è€—æ—¶è¦å°‘äº›ã€‚ä»è¿è¡Œæ—¶é—´ä¸Šçœ‹ï¼Œå¤šçº¿ç¨‹ä¼¼ä¹å·²ç»è§£å†³äº†åˆ‡æ¢å¼€é”€å¤§çš„é—®é¢˜ã€‚è€Œä¸”å¯æ”¯æŒçš„ä»»åŠ¡æ•°é‡è§„æ¨¡ï¼Œä¹Ÿå˜æˆäº†æ•°ç™¾ä¸ªåˆ°æ•°åƒä¸ªã€‚</p><p>ä½†æ˜¯ï¼Œå¤šçº¿ç¨‹ä»æœ‰é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯ Python é‡Œçš„å¤šçº¿ç¨‹ã€‚é¦–å…ˆï¼ŒPython ä¸­çš„å¤šçº¿ç¨‹å› ä¸º GIL çš„å­˜åœ¨ï¼Œå®ƒä»¬å¹¶ä¸èƒ½åˆ©ç”¨ CPU å¤šæ ¸ä¼˜åŠ¿ï¼Œä¸€ä¸ª Python è¿›ç¨‹ä¸­ï¼Œ<br> åªå…è®¸æœ‰ä¸€ä¸ªçº¿ç¨‹å¤„äºè¿è¡ŒçŠ¶æ€ã€‚é‚£ä¸ºä»€ä¹ˆç»“æœè¿˜æ˜¯å¦‚é¢„æœŸï¼Œè€—æ—¶ç¼©å‡åˆ°äº†ååˆ†ä¹‹ä¸€ï¼Ÿ</p><p>å› ä¸ºåœ¨åšé˜»å¡çš„ç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œä¾‹å¦‚ sock.connect(),sock.recv()æ—¶ï¼Œå½“å‰çº¿ç¨‹ä¼šé‡Šæ”¾ GILï¼Œè®©åˆ«çš„çº¿ç¨‹æœ‰æ‰§è¡Œæœºä¼šã€‚ä½†æ˜¯å•ä¸ªçº¿ç¨‹å†…ï¼Œåœ¨é˜»å¡è°ƒç”¨ä¸Š<br> è¿˜æ˜¯é˜»å¡çš„ã€‚</p><p>å°æç¤ºï¼šPython ä¸­ time.sleep æ˜¯é˜»å¡çš„ï¼Œéƒ½çŸ¥é“ä½¿ç”¨å®ƒè¦è°¨æ…ï¼Œä½†åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œtime.sleep å¹¶ä¸ä¼šé˜»å¡å…¶ä»–çº¿ç¨‹ã€‚</p><p>é™¤äº† GIL ä¹‹å¤–ï¼Œæ‰€æœ‰çš„å¤šçº¿ç¨‹è¿˜æœ‰é€šç—…ã€‚å®ƒä»¬æ˜¯è¢« OS è°ƒåº¦ï¼Œè°ƒåº¦ç­–ç•¥æ˜¯æŠ¢å å¼çš„ï¼Œä»¥ä¿è¯åŒç­‰ä¼˜å…ˆçº§çš„çº¿ç¨‹éƒ½æœ‰å‡ç­‰çš„æ‰§è¡Œæœºä¼šï¼Œé‚£å¸¦æ¥çš„é—®é¢˜æ˜¯ï¼šå¹¶<br> ä¸çŸ¥é“ä¸‹ä¸€æ—¶åˆ»æ˜¯å“ªä¸ªçº¿ç¨‹è¢«è¿è¡Œï¼Œä¹Ÿä¸çŸ¥é“å®ƒæ­£è¦æ‰§è¡Œçš„ä»£ç æ˜¯ä»€ä¹ˆã€‚æ‰€ä»¥å°±å¯èƒ½å­˜åœ¨ç«æ€æ¡ä»¶ã€‚</p><p>ä¾‹å¦‚çˆ¬è™«å·¥ä½œçº¿ç¨‹ä»ä»»åŠ¡é˜Ÿåˆ—æ‹¿å¾…æŠ“å– URL çš„æ—¶å€™ï¼Œå¦‚æœå¤šä¸ªçˆ¬è™«çº¿ç¨‹åŒæ—¶æ¥å–ï¼Œé‚£è¿™ä¸ªä»»åŠ¡åˆ°åº•è¯¥ç»™è°ï¼Ÿé‚£å°±éœ€è¦ç”¨åˆ°â€œé”â€æˆ–â€œåŒæ­¥é˜Ÿåˆ—â€æ¥ä¿è¯ä¸‹è½½<br> ä»»åŠ¡ä¸ä¼šè¢«é‡å¤æ‰§è¡Œã€‚</p><p>è€Œä¸”çº¿ç¨‹æ”¯æŒçš„å¤šä»»åŠ¡è§„æ¨¡ï¼Œåœ¨æ•°ç™¾åˆ°æ•°åƒçš„æ•°é‡è§„æ¨¡ã€‚åœ¨å¤§è§„æ¨¡çš„é«˜é¢‘ç½‘ç»œäº¤äº’ç³»ç»Ÿä¸­ï¼Œä»ç„¶æœ‰äº›åƒåŠ›ã€‚å½“ç„¶ï¼Œå¤šçº¿ç¨‹æœ€ä¸»è¦çš„é—®é¢˜è¿˜æ˜¯ç«æ€æ¡ä»¶ã€‚</p><h3 id="_3-4-éé˜»å¡æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_3-4-éé˜»å¡æ–¹å¼"><span>3.4 éé˜»å¡æ–¹å¼</span></a></h3><p>ç»ˆäºï¼Œæˆ‘ä»¬æ¥åˆ°äº†éé˜»å¡è§£å†³æ–¹æ¡ˆã€‚å…ˆæ¥çœ‹çœ‹æœ€åŸå§‹çš„éé˜»å¡å¦‚ä½•å·¥ä½œçš„ã€‚</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> nonblocking_way</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">():</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    sock </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> socket.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">socket</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    sock.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">setblocking</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">False</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        sock.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">connect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;example.com&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">80</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    except</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;"> BlockingIOError</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # éé˜»å¡è¿æ¥è¿‡ç¨‹ä¸­ ä¹Ÿä¼š æŠ›å‡ºå¼‚å¸¸</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        pass</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    request </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;GET HTTP:1.0/</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\r\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Host: example.com</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\r\n\r\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    data </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> request.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">encode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ascii&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # ä¸ç›´åˆ°socketä½•æ—¶å°±ç»ªï¼Œæ‰€ä»¥ä¸æ–­å°è¯•å‘é€</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    while</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            sock.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">send</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(data)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            # ç›´åˆ°sendä¸æŠ›å¼‚å¸¸ï¼Œåˆ™å‘é€å®Œæˆ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            break</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        except</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;"> OSError</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            pass</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    response </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    while</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            chunk </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sock.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">recv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4096</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            while</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> chunk:</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">                print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(chunk)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                response </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> chunk</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                chunk </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sock.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">recv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4096</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            break</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        except</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;"> OSError</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            pass</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> response</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> sync_way</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">():</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    res </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> []</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> range</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        res.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">append</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">nonblocking_way</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> len</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(res)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>[æ³¨]ï¼šæ€»ä½“è€—æ—¶çº¦ 4.3 ç§’ã€‚<br> é¦–å…ˆæ³¨æ„åˆ°ä¸¤ç‚¹ï¼Œå°±æ„Ÿè§‰è¢«éª—äº†ã€‚ä¸€æ˜¯è€—æ—¶ä¸åŒæ­¥é˜»å¡ç›¸å½“ï¼ŒäºŒæ˜¯ä»£ç æ›´å¤æ‚ã€‚è¦éé˜»å¡ä½•ç”¨ï¼Ÿä¸”æ…¢ã€‚</p><p>ä¸Šå›¾ç¬¬ 9 è¡Œä»£ç  sock.setblocking(False)å‘Šè¯‰ OSï¼Œè®© socket ä¸Šé˜»å¡è°ƒç”¨éƒ½æ”¹ä¸ºéé˜»å¡çš„æ–¹å¼ã€‚ä¹‹å‰æˆ‘ä»¬è¯´åˆ°ï¼Œéé˜»å¡å°±æ˜¯åœ¨åšä¸€ä»¶äº‹çš„æ—¶å€™ï¼Œä¸é˜»ç¢<br> è°ƒç”¨å®ƒçš„ç¨‹åºåšåˆ«çš„äº‹æƒ…ã€‚ä¸Šè¿°ä»£ç åœ¨æ‰§è¡Œå®Œ sock.connect() å’Œ sock.recv() åçš„ç¡®ä¸å†é˜»å¡ï¼Œå¯ä»¥ç»§ç»­å¾€ä¸‹æ‰§è¡Œè¯·æ±‚å‡†å¤‡çš„ä»£ç æˆ–è€…æ˜¯æ‰§è¡Œ<br> ä¸‹ä¸€æ¬¡è¯»å–ã€‚</p><p>ä»£ç å˜å¾—æ›´å¤æ‚ä¹Ÿæ˜¯ä¸Šè¿°åŸå› æ‰€è‡´ã€‚ç¬¬ 11 è¡Œè¦æ”¾åœ¨ try è¯­å¥å†…ï¼Œæ˜¯å› ä¸º socket åœ¨å‘é€éé˜»å¡è¿æ¥è¯·æ±‚è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿåº•å±‚ä¹Ÿä¼šæŠ›å‡ºå¼‚å¸¸ã€‚connect()è¢«<br> è°ƒç”¨ä¹‹åï¼Œç«‹å³å¯ä»¥å¾€ä¸‹æ‰§è¡Œç¬¬ 15 å’Œ 16 è¡Œçš„ä»£ç ã€‚</p><p>éœ€è¦ while å¾ªç¯ä¸æ–­å°è¯• send()ï¼Œæ˜¯å› ä¸º connect()å·²ç»éé˜»å¡ï¼Œåœ¨ send()ä¹‹æ—¶å¹¶ä¸çŸ¥é“ socket çš„è¿æ¥æ˜¯å¦å°±ç»ªï¼Œåªæœ‰ä¸æ–­å°è¯•ï¼Œå°è¯•æˆåŠŸä¸ºæ­¢ï¼Œ<br> å³å‘é€æ•°æ®æˆåŠŸäº†ã€‚recv()è°ƒç”¨ä¹Ÿæ˜¯åŒç†ã€‚</p><p>è™½ç„¶ connect() å’Œ recv() ä¸å†é˜»å¡ä¸»ç¨‹åºï¼Œç©ºå‡ºæ¥çš„æ—¶é—´æ®µ CPU æ²¡æœ‰ç©ºé—²ç€ï¼Œä½†å¹¶æ²¡æœ‰åˆ©ç”¨å¥½è¿™ç©ºé—²å»åšå…¶ä»–æœ‰æ„ä¹‰çš„äº‹æƒ…ï¼Œè€Œæ˜¯åœ¨å¾ªç¯å°è¯•è¯»å†™<br> socket ï¼ˆä¸åœåˆ¤æ–­éé˜»å¡è°ƒç”¨çš„çŠ¶æ€æ˜¯å¦å°±ç»ªï¼‰ã€‚è¿˜å¾—å¤„ç†æ¥è‡ªåº•å±‚çš„å¯å¿½ç•¥çš„å¼‚å¸¸ã€‚ä¹Ÿä¸èƒ½åŒæ—¶å¤„ç†å¤šä¸ª socket ã€‚</p><p>ç„¶å 10 æ¬¡ä¸‹è½½ä»»åŠ¡ä»ç„¶æŒ‰åºè¿›è¡Œã€‚æ‰€ä»¥æ€»ä½“æ‰§è¡Œæ—¶é—´å’ŒåŒæ­¥é˜»å¡ç›¸å½“ã€‚å¦‚æœéå¾—è¿™æ ·å­ï¼Œé‚£è¿˜ä¸å¦‚åŒæ­¥é˜»å¡ç®—äº†ã€‚</p><h5 id="é™„-ä½¿ç”¨ä¸Šå¤ç¥å™¨geventå¹¶å‘" tabindex="-1"><a class="header-anchor" href="#é™„-ä½¿ç”¨ä¸Šå¤ç¥å™¨geventå¹¶å‘"><span><strong>é™„ï¼šä½¿ç”¨ä¸Šå¤ç¥å™¨<code>gevent</code>å¹¶å‘</strong></span></a></h5><p>ä½¿ç”¨<code>gevent</code> åº“ï¼Œè¯¥åº“å€ŸåŠ©äº <code>greenlet</code> è·å¾—äº†è¿˜è¡Œçš„å¹¶å‘æ€§èƒ½ï¼Œä½† <code>gevent</code> åªèƒ½åœ¨ <code>Unix/Linux</code> ä¸‹æ­£å¸¸è¿è¡Œï¼Œ<code>windows </code> æ— æ³•ä¿è¯</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">å®‰è£…</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> geventï¼š</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gevent</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æœåŠ¡ç«¯ï¼š</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> gevent</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> gevent </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> socket, monkey</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">monkey.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">patch_all</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()	</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># monkeyè¡¥ä¸ï¼Œç”¨æ¥æœ€å¤§ç¨‹åº¦ç›‘å¬IOé˜»å¡</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> start_server</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;">port</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    sk </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> socket.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">socket</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    sk.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">bind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;127.0.0.1&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, port))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    sk.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">listen</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">500</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    while</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        conn, addr </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sk.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">accept</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">        print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;client accept address:&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, addr)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        gevent.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">spawn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(handle_request, conn)  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æ¯æ¬¡è¿æ¥æˆåŠŸéƒ½åˆ›å»ºä¸€ä¸ªGreenletå¯¹è±¡</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handle_request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;">conn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        while</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            data </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> conn.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">recv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1024</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">            print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Received:&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">repr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(data))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            conn.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">send</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(data)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    except</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;"> Exception</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> as</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> e:</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">        print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(e)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    finally</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        conn.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">close</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">start_server</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">8004</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å®¢æˆ·ç«¯ï¼š</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> threading</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> socket</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> sock_conn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">():</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    client </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> socket.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">socket</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    client.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">connect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;127.0.0.1&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">8004</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    count </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    while</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æ­»å¾ªç¯ï¼Œä¸æ–­å‘é€ hello + æ¬¡æ•°</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        client.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">send</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;hello </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> %</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> count).</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">encode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;utf-8&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        data </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> client.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">recv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1024</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">        print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">]recv from server:&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> %</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> threading.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">get_ident</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), data.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">decode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">())  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        count </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # client.close()</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> range</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># å¹¶å‘100ä¸ªsocketè¿æ¥</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    t </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> threading.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">target</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sock_conn)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    t.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-5-éé˜»å¡æ”¹è¿›" tabindex="-1"><a class="header-anchor" href="#_3-5-éé˜»å¡æ”¹è¿›"><span>3.5 éé˜»å¡æ”¹è¿›</span></a></h3><h4 id="_3-5-1-epoll" tabindex="-1"><a class="header-anchor" href="#_3-5-1-epoll"><span>3.5.1 epoll</span></a></h4><p>åˆ¤æ–­éé˜»å¡è°ƒç”¨æ˜¯å¦å°±ç»ªå¦‚æœ OS èƒ½åšï¼Œæ˜¯ä¸æ˜¯åº”ç”¨ç¨‹åºå°±å¯ä»¥ä¸ç”¨è‡ªå·±å»ç­‰å¾…å’Œåˆ¤æ–­äº†ï¼Œå°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªç©ºé—²å»åšå…¶ä»–äº‹æƒ…ä»¥æé«˜æ•ˆç‡ã€‚</p><p>æ‰€ä»¥ OS å°† I/O çŠ¶æ€çš„å˜åŒ–éƒ½å°è£…æˆäº†äº‹ä»¶ï¼Œå¦‚å¯è¯»äº‹ä»¶ã€å¯å†™äº‹ä»¶ã€‚å¹¶ä¸”æä¾›äº†ä¸“é—¨çš„ç³»ç»Ÿæ¨¡å—è®©åº”ç”¨ç¨‹åºå¯ä»¥æ¥æ”¶äº‹ä»¶é€šçŸ¥ã€‚è¿™ä¸ªæ¨¡å—å°±æ˜¯ selectã€‚<br> è®©åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ select æ³¨å†Œæ–‡ä»¶æè¿°ç¬¦å’Œå›è°ƒå‡½æ•°ã€‚å½“æ–‡ä»¶æè¿°ç¬¦çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œselect å°±è°ƒç”¨äº‹å…ˆæ³¨å†Œçš„å›è°ƒå‡½æ•°ã€‚</p><p>select å› å…¶ç®—æ³•æ•ˆç‡æ¯”è¾ƒä½ï¼Œåæ¥æ”¹è¿›æˆäº† pollï¼Œå†åæ¥åˆæœ‰è¿›ä¸€æ­¥æ”¹è¿›ï¼ŒBSD å†…æ ¸æ”¹è¿›æˆäº† kqueue æ¨¡å—ï¼Œè€Œ Linux å†…æ ¸æ”¹è¿›æˆäº† epoll æ¨¡å—ã€‚è¿™å››ä¸ª<br> æ¨¡å—çš„ä½œç”¨éƒ½ç›¸åŒï¼Œæš´éœ²ç»™ç¨‹åºå‘˜ä½¿ç”¨çš„ API ä¹Ÿå‡ ä¹ä¸€è‡´ï¼ŒåŒºåˆ«åœ¨äº kqueue å’Œ epoll åœ¨å¤„ç†å¤§é‡æ–‡ä»¶æè¿°ç¬¦æ—¶æ•ˆç‡æ›´é«˜ã€‚</p><p>é‰´äº Linux æœåŠ¡å™¨çš„æ™®éæ€§ï¼Œä»¥åŠä¸ºäº†è¿½æ±‚æ›´é«˜æ•ˆç‡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¸¸å¸¸å¬é—»è¢«æ¢è®¨çš„æ¨¡å—éƒ½æ˜¯ epoll ã€‚</p><h4 id="_3-5-2-å›è°ƒ-callback" tabindex="-1"><a class="header-anchor" href="#_3-5-2-å›è°ƒ-callback"><span>3.5.2 å›è°ƒ(Callback)</span></a></h4><p>æŠŠ I/O äº‹ä»¶çš„ç­‰å¾…å’Œç›‘å¬ä»»åŠ¡äº¤ç»™äº† OSï¼Œé‚£ OS åœ¨çŸ¥é“ I/O çŠ¶æ€å‘ç”Ÿæ”¹å˜åï¼ˆä¾‹å¦‚ socket è¿æ¥å·²å»ºç«‹æˆåŠŸå¯å‘é€æ•°æ®ï¼‰ï¼Œå®ƒåˆæ€ä¹ˆçŸ¥é“æ¥ä¸‹æ¥è¯¥å¹²å˜›<br> å‘¢ï¼Ÿåªèƒ½å›è°ƒã€‚</p><p>éœ€è¦æˆ‘ä»¬å°†å‘é€æ•°æ®ä¸è¯»å–æ•°æ®å°è£…æˆç‹¬ç«‹çš„å‡½æ•°ï¼Œè®© epoll ä»£æ›¿åº”ç”¨ç¨‹åºç›‘å¬ socket çŠ¶æ€æ—¶ï¼Œå¾—å‘Šè¯‰ epollï¼šâ€œå¦‚æœ socket çŠ¶æ€å˜ä¸ºå¯ä»¥å¾€é‡Œå†™æ•°æ®<br> ï¼ˆè¿æ¥å»ºç«‹æˆåŠŸäº†ï¼‰ï¼Œè¯·è°ƒç”¨ HTTP è¯·æ±‚å‘é€å‡½æ•°ã€‚å¦‚æœ socket å˜ä¸ºå¯ä»¥è¯»æ•°æ®äº†ï¼ˆå®¢æˆ·ç«¯å·²æ”¶åˆ°å“åº”ï¼‰ï¼Œè¯·è°ƒç”¨å“åº”å¤„ç†å‡½æ•°ã€‚â€</p><p>äºæ˜¯æˆ‘ä»¬åˆ©ç”¨ epoll ç»“åˆå›è°ƒæœºåˆ¶é‡æ„çˆ¬è™«ä»£ç ï¼š</p></div><!----><!----><!----></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">æœ€è¿‘æ›´æ–°ï¼š</span><time class="vp-meta-info" datetime="2022-10-08T01:58:06.000Z" data-allow-mismatch>2022/10/8 01:58</time></div></div></footer><!----><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">é»˜è®¤é¡µè„š</div><div class="vp-copyright">Copyright Â© 2025 æ‚¦Â·å®å® </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-DS5-vXX9.js" defer></script>
  </body>
</html>
