import{_ as i}from"./plugin-vueexport-helper-DlAUqK2U.js";import{c as e,d as a,o as t}from"./app-BSKYQGO5.js";const n={};function l(h,s){return t(),e("div",null,s[0]||(s[0]=[a(`<h1 id="vmware-磁盘" tabindex="-1"><a class="header-anchor" href="#vmware-磁盘"><span>VMware 磁盘</span></a></h1><h3 id="_1-磁盘热插" tabindex="-1"><a class="header-anchor" href="#_1-磁盘热插"><span>1. 磁盘热插</span></a></h3><p>正常情况下，添加磁盘后 <strong>需要重启系统</strong> 才能被内核识别，在 <code>/dev/</code> 下才有对应的设备号</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 使用如下命令，才会显示</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> fdisk</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -l</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>但是有时候不方便重启。可使用如下方法</p><ol><li><p>查看所有设备的总线信息</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ls</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /sys/class/scsi_host/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>确定磁盘在哪条总线上后使用一下命令进行总线扫描,新设备会被添加</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;- - -&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/sys/class/scsi_host/host0/scan</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>当总线很多时使用循环对总线扫描完成热插</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /sys/class/scsi_host/host*/scan</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">do</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> echo </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;- - -&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">done</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ol><h3 id="_2-磁盘热拔" tabindex="-1"><a class="header-anchor" href="#_2-磁盘热拔"><span>2. 磁盘热拔</span></a></h3><p>先获取该 <strong>scsi</strong> 磁盘设备的总线号</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lsscsi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ls</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /sys/bus/scsi/drivers/sd/2</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">0</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">1</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">0/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在其中有 <strong>3</strong> 个文件：<strong>delete</strong>、<strong>rescan</strong> 和 <strong>state</strong></p><ul><li><strong>state：</strong> 记录了该设备是否正在运行中</li><li><strong>delete 和 rescan：</strong> 用于删除和重新扫描该设备</li></ul><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/sys/bus/scsi/drivers/sd/2</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">0</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">1</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">0/delete</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><a href="https://www.junmajinlong.com/linux/fsmgr_mkpart_mkfs/" target="_blank" rel="noopener noreferrer">参考</a></p><blockquote><p>SIZE is an integer and optional unit (example: 10M is 10 _ 1024 _ 1024). Units are K, M, G, T, P, E, Z, Y (powers of 1024) or KB, MB, ... (powers of 1000).</p></blockquote><h3 id="_3-磁盘占用" tabindex="-1"><a class="header-anchor" href="#_3-磁盘占用"><span>3. 磁盘占用</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ps</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> aux</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> name/sda</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-无法识别" tabindex="-1"><a class="header-anchor" href="#_4-无法识别"><span>4. 无法识别</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /sys/class/scsi_host/</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root scsi_host]# ls</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">host0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  host1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  host2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root scsi_host]# echo </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;- - -&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; host0/scan </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 改为 sh 批量循环执行扫描，之后虚拟磁盘即可识别</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,18)]))}const k=i(n,[["render",l]]),p=JSON.parse('{"path":"/unix/%E8%99%9A%E6%8B%9F%E6%9C%BA/VMware/%E6%B7%BB%E5%8A%A0%E7%A3%81%E7%9B%98.html","title":"添加磁盘","lang":"zh-CN","frontmatter":{"title":"添加磁盘","date":"2021-03-12T00:00:00.000Z","category":["虚拟机"],"tag":["VMware"],"description":"VMware 磁盘 1. 磁盘热插 正常情况下，添加磁盘后 需要重启系统 才能被内核识别，在 /dev/ 下才有对应的设备号 但是有时候不方便重启。可使用如下方法 查看所有设备的总线信息 确定磁盘在哪条总线上后使用一下命令进行总线扫描,新设备会被添加 当总线很多时使用循环对总线扫描完成热插 2. 磁盘热拔 先获取该 scsi 磁盘设备的总线号 在其中有...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"添加磁盘\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2021-03-12T00:00:00.000Z\\",\\"dateModified\\":\\"2022-10-09T12:42:17.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"悦·宝宝\\",\\"url\\":\\"https://github.com/Igarashi-G\\"}]}"],["meta",{"property":"og:url","content":"https://igarashi-g.github.io/unix/%E8%99%9A%E6%8B%9F%E6%9C%BA/VMware/%E6%B7%BB%E5%8A%A0%E7%A3%81%E7%9B%98.html"}],["meta",{"property":"og:site_name","content":"悦 ▪ 宝宝"}],["meta",{"property":"og:title","content":"添加磁盘"}],["meta",{"property":"og:description","content":"VMware 磁盘 1. 磁盘热插 正常情况下，添加磁盘后 需要重启系统 才能被内核识别，在 /dev/ 下才有对应的设备号 但是有时候不方便重启。可使用如下方法 查看所有设备的总线信息 确定磁盘在哪条总线上后使用一下命令进行总线扫描,新设备会被添加 当总线很多时使用循环对总线扫描完成热插 2. 磁盘热拔 先获取该 scsi 磁盘设备的总线号 在其中有..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2022-10-09T12:42:17.000Z"}],["meta",{"property":"article:tag","content":"VMware"}],["meta",{"property":"article:published_time","content":"2021-03-12T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2022-10-09T12:42:17.000Z"}]]},"git":{"createdTime":1664462137000,"updatedTime":1665319337000,"contributors":[{"name":"Igarashi","username":"Igarashi","email":"2545369032@qq.com","commits":2,"url":"https://github.com/Igarashi"}]},"readingTime":{"minutes":1.1,"words":330},"filePathRelative":"unix/虚拟机/VMware/添加磁盘.md","excerpt":"\\n<h3>1. 磁盘热插</h3>\\n<p>正常情况下，添加磁盘后 <strong>需要重启系统</strong> 才能被内核识别，在 <code>/dev/</code> 下才有对应的设备号</p>\\n<div class=\\"language-shell line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"shell\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\"># 使用如下命令，才会显示</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">$</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> fdisk</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> -l</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{k as comp,p as data};
