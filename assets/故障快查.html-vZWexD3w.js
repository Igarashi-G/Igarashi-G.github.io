import{_ as k}from"./plugin-vueexport-helper-DlAUqK2U.js";import{c as p,d as t,e as r,w as n,r as d,o as g,a as i,b as s}from"./app-C_J498dg.js";const o="/assets/rawgithosts-BamOXUyX.jpg",c="/assets/py-bt-CU1T7yZw.jpg",y="/assets/info-thrads-CRgXvE4k.jpg",A="/assets/select-thread-CdtRjclF.jpg",F={};function b(u,a){const h=d("Tabs");return g(),p("div",null,[a[4]||(a[4]=t('<p>快速排查故障、定位问题</p><h2 id="_1-gdb" tabindex="-1"><a class="header-anchor" href="#_1-gdb"><span>1. gdb</span></a></h2><p>对于排查进程、线程故障、死循环、死锁、Hung process 等故障，除了用 <a href="https://man7.org/linux/man-pages/man1/strace.1.html" target="_blank" rel="noopener noreferrer">strace</a> 跟一下系统调用来猜原因，相比之下用 <strong>gdb</strong> 来打印 <strong>C</strong> 的堆栈信息，更加有说服力和说明问题</p><h3 id="_1-1-安装" tabindex="-1"><a class="header-anchor" href="#_1-1-安装"><span>1.1 安装</span></a></h3><p>首先得有 <a href="https://man7.org/linux/man-pages/man1/gdb.1.html" target="_blank" rel="noopener noreferrer">gdb</a> 才能查</p>',5)),r(h,{id:"16",data:[{id:"CentOS"},{id:"Debian"}]},{title0:n(({value:l,isActive:e})=>a[0]||(a[0]=[s("CentOS")])),title1:n(({value:l,isActive:e})=>a[1]||(a[1]=[s("Debian")])),tab0:n(({value:l,isActive:e})=>a[2]||(a[2]=[i("div",{class:"language-shell line-numbers-mode","data-highlighter":"shiki","data-ext":"shell",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"$"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," yum"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}}," -y"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," install"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," yum-utils")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"$"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," debuginfo-install"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," glibc")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"# 会出现如下包的提示")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"Package"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"                                Arch"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"        Version"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"               Repository"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"           Size")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"====================================================================================================")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"Installing:")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}}," glibc-debuginfo"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"                        x86_64"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"      2.17-326.el7_9"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"        base-debuginfo"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"      9.5"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," M")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}}," nss-softokn-debuginfo"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"                  x86_64"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"      3.44.0-8.el7_7"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"        base-debuginfo"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"      2.1"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," M")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}}," yum-plugin-auto-update-debug-info"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"      noarch"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"      1.1.31-54.el7_8"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"       base"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"                 29"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," k")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"Installing"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," for"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," dependencies:")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}}," glibc-debuginfo-common"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"                 x86_64"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"      2.17-326.el7_9"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"        base-debuginfo"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"      9.7"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," M")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1),i("p",null,"若报错，则需要执行如下改动",-1),i("div",{class:"language-shell line-numbers-mode","data-highlighter":"shiki","data-ext":"shell",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"# 不存在该文件则创建，有则改写如下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"$"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," vim"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," /etc/yum.repos.d/CentOS-Debuginfo.repo")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"[base-debuginfo]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"name"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#56B6C2"}},"="),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"CentOS-7"),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}}," -"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," Debuginfo")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"baseurl"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#56B6C2"}},"="),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"http://debuginfo.centos.org/7/"),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"$basearch"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"/")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"gpgcheck"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#56B6C2"}},"="),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"gpgkey"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#56B6C2"}},"="),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-Debug-7")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"-"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," enabled="),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"+"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," enabled="),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1),i("p",null,[s("然后再安装 "),i("strong",null,"gdb")],-1),i("div",{class:"language-shell line-numbers-mode","data-highlighter":"shiki","data-ext":"shell",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"# 安装 gdb python3-debuginfo 注意是 python3")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"yum"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}}," -y"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," install"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," gdb"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," python3-debuginfo")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1),i("p",null,[s("执行 "),i("code",null,"gdb python")],-1),i("div",{class:"language-shell line-numbers-mode","data-highlighter":"shiki","data-ext":"shell",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"$"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," gdb"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," python3")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"GNU"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," gdb"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," (GDB) Red Hat Enterprise Linux 7.6.1-120.el7")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"Copyright"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," (C) 2013 Free Software Foundation, Inc.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"License"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," GPLv3+:"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," GNU"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," GPL"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," version"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}}," 3"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," or"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," later"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," <"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"http://gnu.org/licenses/gpl.htm"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"l>")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}},"...")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"Reading"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," symbols"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," from"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," /opt/miniconda3/bin/python3.9...done.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"gdb"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},") ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"# 注意最后的版本号")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1)])),tab1:n(({value:l,isActive:e})=>a[3]||(a[3]=[i("div",{class:"language-shell line-numbers-mode","data-highlighter":"shiki","data-ext":"shell",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"$"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," apt-get"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," install"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," gdb"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," python3-dbg")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"})])],-1),i("p",null,[s("还需要装一个包 "),i("code",null,"python3-dbg"),s(" ， 这个包有什么作用呢？ 前面不是抱怨过 "),i("code",null,"C"),s(" 堆栈对于调试一个 "),i("code",null,"Python"),s(" 有何用？ 我们更需要的是 "),i("code",null,"Python"),s(" 堆栈信息， "),i("code",null,"python-dbg"),s(" 就是为了完成这个使命")],-1)])),_:1}),a[5]||(a[5]=t(`<h3 id="_1-2-运行" tabindex="-1"><a class="header-anchor" href="#_1-2-运行"><span>1.2 运行</span></a></h3><p>全新启动一个 <code>Python</code> 程序并进行调试，可以采用交互式方式， 先启动 <a href="https://man7.org/linux/man-pages/man1/gdb.1.html" target="_blank" rel="noopener noreferrer">gdb</a> 然后在 <code>gdb shell</code> 中启动 <code>Python</code> 程序</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 启动 </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gdb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> python</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gdb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">programnam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.py</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">argument</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">s&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 一条命令</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gdb</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ex</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> r</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --args</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> python</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">programnam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.py</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">argument</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">s&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>正在运行的程序突然异常，需要调试它，若去给它发个信号，出一个 <code>coredump</code> 文件，然后用 <code>gdb</code> 来调试 <code>coredump</code> 文件，像这样</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 调试 coredump 文件</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gdb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">coredump_fil</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>显然易见，不是种好的方式，若捕获进程调试，效率才高</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 获取 python 进程id</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ef</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> python</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pstree</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pid</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> strace</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pid</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 进入调试</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gdb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> python</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">process</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">d&gt; </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gdb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> attach</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">process</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">d&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这两种方式都可以让 <code>gdb</code> 捕获一个进程。 因此，需要做的只是确定问题进程的 <code>pid</code> ，如使用 <code>top</code> 、 <code>ps</code> 等命令确定 <strong>Python</strong> 进程</p><h3 id="_1-3-使用" tabindex="-1"><a class="header-anchor" href="#_1-3-使用"><span>1.3 使用</span></a></h3><h4 id="堆栈查看" tabindex="-1"><a class="header-anchor" href="#堆栈查看"><span><strong>堆栈查看</strong></span></a></h4><p>查看 <code>C</code> 堆栈信息使用 <code>bt</code></p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gdb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">bt</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#0 0x0000002a95b3b705 in raise () from /lib/libc.so.6</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#1 0x0000002a95b3ce8e in abort () from /lib/libc.so.6</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#2 0x00000000004c164f in posix_abort (self=0x0, noargs=0x0) at ../Modules/posixmodule.c:7158</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#3 0x0000000000489fac in call_function (pp_stack=0x7fbffff110, oparg=0) at ../Python/ceval.c:3531</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#4 0x0000000000485fc2 in PyEval_EvalFrame (f=0x66ccd8) at ../Python/ceval.c:2163</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>那么查看 <strong>Python</strong> 堆栈则要在安装 <code>python-gdb</code> 之后， <code>gdb</code> 才会提供若干相关的操作</p><p>使用 <code>py-bt</code> 就是用来查看 <code>Python</code> 堆栈</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (gdb) py-bt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>若提示 <code>Undefined command: &quot;py-bt&quot;. Try &quot;help&quot;</code> ，这多半是 <strong>gdb</strong> 绑定的是老版的 <strong>python2.7</strong>，对于 <strong>CentOS</strong> 需要手动导入 <code>libpython.py</code> 让 <strong>gdb</strong> 读取（<em><strong>Debian 是 <a href="http://pythonx.x-gdb.py" target="_blank" rel="noopener noreferrer">pythonx.x-gdb.py</a></strong></em> ）</p><p>故需手动下载 <a href="https://github.com/python/cpython/blob/master/Tools/gdb/libpython.py" target="_blank" rel="noopener noreferrer">libpython.py</a> 文件到本地</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://raw.githubusercontent.com/python/cpython/main/Tools/gdb/libpython.py</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 连不通需要使用自己的代理</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> all_proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;https://192.168.3.97:7890&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>若 <strong>DNS</strong> 解析失败需，去网站三方工具查 <strong>DNS</strong> ，然后修改 <code>/etc/hosts</code></p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/hosts</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><img src="`+o+`"><p>若需要搜索某些文件，则</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">find</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;*libpython*&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 或安装快速查找工具</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> locate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 更新数据库</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">updatedb</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查找某些文件</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">locate</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;*libpython*&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>手动关联 <strong><a href="http://libpython.py" target="_blank" rel="noopener noreferrer">libpython.py</a></strong></p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gdb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">python</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;import sys</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;sys.path.insert(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;/home/zz/CODE&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;import libpython</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;end</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gdb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">py-bt</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Traceback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (most </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">recent</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> call</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> first</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="`+c+`"></div><h4 id="线程查看" tabindex="-1"><a class="header-anchor" href="#线程查看"><span>线程查看</span></a></h4><p>调试多线程程序，使用 <code>info threads</code>，但总得搞清楚到底有哪些线程</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gdb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> threads</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">* 1    Thread 0x7fce6e201740 (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">LWP</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2314</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;python&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 0x00007fce6db070e3 in </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">epoll_wait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ()</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ../sysdeps/unix/syscall-template.S:81</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="`+y+'"><p>请注意 <strong>*号</strong> 哦——它标识的是当前线程</p><p>切换线程，如切换到 <strong>2</strong> 号线程（<em>将其设置为当前线程进行调试</em> ）</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gdb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">thread</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><img src="'+A+`"><p>查看当前线程的相关信息，则使用 <code>py-list</code> ，可以清楚看到当前执行到代码的第几行， 还有前后若干行的代码可以对照</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gdb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">py-list</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2025</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">         # Open external files with our Mac app</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2026</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         if</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sys.platform</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;darwin&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> and</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Spyder.app&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> __file__:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2027</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">             main.connect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">app,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SIGNAL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&#39;open_external_file(QString)&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">,</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2028</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                          lambda</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> fname:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> main.open_external_file</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">fname</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2029</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;2030        </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">app.exec_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2031</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         return</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> main</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2032</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2033</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2034</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     def</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> __remove_temp_session</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2035</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         if</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> osp.isfile</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">TEMP_SESSION_PATH</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看所有进程执行位置</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>(gdb) thread apply all py-list</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>命令如下：</p><ul><li><p><code>py-bt :</code> 输出 <strong>python</strong> 应用程序调用堆栈</p></li><li><p><code>py-bt-full :</code> 查看当前 <strong>python</strong> 应用程序调用堆栈，并且显示每个 <strong>frame</strong> 的详细情况</p></li><li><p><code>py-list:</code> 显示代码查看当前 <strong>python</strong> 应用程序上下文</p></li><li><p><code>py-print:</code> 查看 <strong>python</strong> 变量</p></li><li><p><code>py-locals:</code> 查看 <strong>locals</strong> 变量</p></li><li><p><code>py-up:</code> 调用栈 <strong>frame</strong> 向上一级</p></li><li><p><code>py-down:</code> 调用栈向下一级</p></li></ul>`,30))])}const B=k(F,[["render",b]]),C=JSON.parse('{"path":"/unix/Linux/Troubleshooting/%E6%95%85%E9%9A%9C%E5%BF%AB%E6%9F%A5.html","title":"快速排错","lang":"zh-CN","frontmatter":{"title":"快速排错","date":"2021-09-13T00:00:00.000Z","category":["工具","troubleshooting"],"tag":["troubleshooting","gdb"],"description":"快速排查故障、定位问题 1. gdb 对于排查进程、线程故障、死循环、死锁、Hung process 等故障，除了用 strace 跟一下系统调用来猜原因，相比之下用 gdb 来打印 C 的堆栈信息，更加有说服力和说明问题 1.1 安装 首先得有 gdb 才能查 1.2 运行 全新启动一个 Python 程序并进行调试，可以采用交互式方式， 先启动 g...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"快速排错\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2021-09-13T00:00:00.000Z\\",\\"dateModified\\":\\"2023-02-25T05:41:54.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"悦·宝宝\\",\\"url\\":\\"https://github.com/Igarashi-G\\"}]}"],["meta",{"property":"og:url","content":"https://igarashi-g.github.io/unix/Linux/Troubleshooting/%E6%95%85%E9%9A%9C%E5%BF%AB%E6%9F%A5.html"}],["meta",{"property":"og:site_name","content":"悦 ▪ 宝宝"}],["meta",{"property":"og:title","content":"快速排错"}],["meta",{"property":"og:description","content":"快速排查故障、定位问题 1. gdb 对于排查进程、线程故障、死循环、死锁、Hung process 等故障，除了用 strace 跟一下系统调用来猜原因，相比之下用 gdb 来打印 C 的堆栈信息，更加有说服力和说明问题 1.1 安装 首先得有 gdb 才能查 1.2 运行 全新启动一个 Python 程序并进行调试，可以采用交互式方式， 先启动 g..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-02-25T05:41:54.000Z"}],["meta",{"property":"article:tag","content":"gdb"}],["meta",{"property":"article:tag","content":"troubleshooting"}],["meta",{"property":"article:published_time","content":"2021-09-13T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-02-25T05:41:54.000Z"}]]},"git":{"createdTime":1677303714000,"updatedTime":1677303714000,"contributors":[{"name":"Igarashi","username":"Igarashi","email":"2545369032@qq.com","commits":1,"url":"https://github.com/Igarashi"}]},"readingTime":{"minutes":3.92,"words":1176},"filePathRelative":"unix/Linux/Troubleshooting/故障快查.md","excerpt":"<p>快速排查故障、定位问题</p>\\n<!--more-->\\n<h2>1. gdb</h2>\\n<p>对于排查进程、线程故障、死循环、死锁、Hung process 等故障，除了用 <a href=\\"https://man7.org/linux/man-pages/man1/strace.1.html\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">strace</a> 跟一下系统调用来猜原因，相比之下用 <strong>gdb</strong> 来打印 <strong>C</strong> 的堆栈信息，更加有说服力和说明问题</p>\\n<h3>1.1 安装</h3>","autoDesc":true}');export{B as comp,C as data};
