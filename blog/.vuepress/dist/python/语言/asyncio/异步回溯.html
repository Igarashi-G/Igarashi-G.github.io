<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.51" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://igarashi-g.github.io/igarashi-blog/igarashi-blog/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html"><meta property="og:site_name" content="äº”åå²šå‘~"><meta property="og:title" content="å¼‚æ­¥ç¼–ç¨‹å²å›æº¯"><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-10-08T01:58:06.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:modified_time" content="2022-10-08T01:58:06.000Z"><title>å¼‚æ­¥ç¼–ç¨‹å²å›æº¯ | äº”åå²šå‘~</title><meta name="description" content="äº”åå²šçš„åšå®¢">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/igarashi-blog/assets/style.5c6ade45.css">
    <link rel="modulepreload" href="/igarashi-blog/assets/app.1ee68d9c.js"><link rel="modulepreload" href="/igarashi-blog/assets/å¼‚æ­¥å›æº¯.html.b9e58dc2.js"><link rel="modulepreload" href="/igarashi-blog/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/igarashi-blog/assets/å¼‚æ­¥å›æº¯.html.d95c44f0.js"><link rel="prefetch" href="/igarashi-blog/assets/home.html.2fcb85fe.js"><link rel="prefetch" href="/igarashi-blog/assets/intro.html.35d3b9a7.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.474ee5a4.js"><link rel="prefetch" href="/igarashi-blog/assets/slides.html.29261d3d.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.07df5ca7.js"><link rel="prefetch" href="/igarashi-blog/assets/disable.html.bfb72f82.js"><link rel="prefetch" href="/igarashi-blog/assets/encrypt.html.77e0aa5f.js"><link rel="prefetch" href="/igarashi-blog/assets/markdown.html.df9b5ede.js"><link rel="prefetch" href="/igarashi-blog/assets/page.html.d5efc350.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.3c8bc129.js"><link rel="prefetch" href="/igarashi-blog/assets/PSæ“ä½œåŸºç¡€.html.fd4bf22b.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.ee98a8ec.js"><link rel="prefetch" href="/igarashi-blog/assets/SAIæ“ä½œåŸºç¡€.html.74dd5b28.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.a170a1fd.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.8d281db0.js"><link rel="prefetch" href="/igarashi-blog/assets/asyncio_recipes.html.96526b14.js"><link rel="prefetch" href="/igarashi-blog/assets/devops_in_python.html.570b8159.js"><link rel="prefetch" href="/igarashi-blog/assets/fluent_python.html.7490f3c2.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.f4c1c825.js"><link rel="prefetch" href="/igarashi-blog/assets/python_cookbook.html.be898d37.js"><link rel="prefetch" href="/igarashi-blog/assets/pythonæºç å‰–æ.html.e89082ed.js"><link rel="prefetch" href="/igarashi-blog/assets/use_asyncio.html.06aa0ffa.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.be03faab.js"><link rel="prefetch" href="/igarashi-blog/assets/äºšåŠ¨æœºä¸äººæ ¼.html.3756c78a.js"><link rel="prefetch" href="/igarashi-blog/assets/äººçš„æ½œèƒ½å’Œä»·å€¼.html.96e4b45e.js"><link rel="prefetch" href="/igarashi-blog/assets/å¥½äººæ˜¯å¦‚ä½•å˜æˆæ¶é­”çš„.html.6dfb2f28.js"><link rel="prefetch" href="/igarashi-blog/assets/å½±å“åŠ›.html.50316b7e.js"><link rel="prefetch" href="/igarashi-blog/assets/æ€§å¿ƒç†å­¦.html.0485d479.js"><link rel="prefetch" href="/igarashi-blog/assets/æ´—è„‘å¿ƒç†å­¦.html.48c2a897.js"><link rel="prefetch" href="/igarashi-blog/assets/è¿›åŒ–å¿ƒç†å­¦.html.85b9bc99.js"><link rel="prefetch" href="/igarashi-blog/assets/CODE.html.2d78fc56.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.96caa434.js"><link rel="prefetch" href="/igarashi-blog/assets/æˆä¸ºæŠ€æœ¯é¢†å¯¼è€….html.ea9b0304.js"><link rel="prefetch" href="/igarashi-blog/assets/é¸Ÿå“¥çš„Linuxç§æˆ¿èœ.html.35c88210.js"><link rel="prefetch" href="/igarashi-blog/assets/é¸Ÿå“¥çš„Linuxç§æˆ¿èœæœåŠ¡å™¨æ¶è®¾ç¯‡.html.d8cee25d.js"><link rel="prefetch" href="/igarashi-blog/assets/é»‘å®¢ä¸ç”»å®¶.html.3d3e7937.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.159b0ff5.js"><link rel="prefetch" href="/igarashi-blog/assets/ä¸­å›½äººçš„æ€§æ ¼.html.a81f7f8a.js"><link rel="prefetch" href="/igarashi-blog/assets/ä¹Œåˆä¹‹ä¼—.html.6d7fd309.js"><link rel="prefetch" href="/igarashi-blog/assets/å¨±ä¹è‡³æ­».html.4b3d07bc.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.d48278e0.js"><link rel="prefetch" href="/igarashi-blog/assets/æ¸…é†’æ€è€ƒçš„è‰ºæœ¯.html.66426d9b.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.d7137ce2.js"><link rel="prefetch" href="/igarashi-blog/assets/åšå¼ˆè®ºä¸ç»æµè¡Œä¸º.html.c5f5e5ae.js"><link rel="prefetch" href="/igarashi-blog/assets/å°±ä¸š_åˆ©æ¯å’Œè´§å¸é€šè®º.html.ab85a85c.js"><link rel="prefetch" href="/igarashi-blog/assets/èªæ˜çš„æŠ•èµ„è€….html.6c645c4e.js"><link rel="prefetch" href="/igarashi-blog/assets/è´§å¸é‡‘èå­¦.html.5c507a51.js"><link rel="prefetch" href="/igarashi-blog/assets/éç†æ€§ç¹è£.html.7a44045c.js"><link rel="prefetch" href="/igarashi-blog/assets/dockerå®¹å™¨.html.ee510170.js"><link rel="prefetch" href="/igarashi-blog/assets/ä½¿ç”¨åŸºç¡€.html.466333a1.js"><link rel="prefetch" href="/igarashi-blog/assets/å‘½ä»¤.html.8acbef73.js"><link rel="prefetch" href="/igarashi-blog/assets/ç½‘ç»œ.html.6d5db705.js"><link rel="prefetch" href="/igarashi-blog/assets/Git.html.cad95461.js"><link rel="prefetch" href="/igarashi-blog/assets/GItæäº¤è§„åˆ™.html.04f6768f.js"><link rel="prefetch" href="/igarashi-blog/assets/å®‰è£…GitLab.html.9282cd6c.js"><link rel="prefetch" href="/igarashi-blog/assets/K8såŸºç¡€.html.6cfdb42d.js"><link rel="prefetch" href="/igarashi-blog/assets/k8så®‰è£….html.1cb6f023.js"><link rel="prefetch" href="/igarashi-blog/assets/NginxåŸºç¡€.html.98aa76cb.js"><link rel="prefetch" href="/igarashi-blog/assets/åº”ç”¨éƒ¨ç½².html.583e3f54.js"><link rel="prefetch" href="/igarashi-blog/assets/FiddleræŠ“åŒ…å·¥å…·.html.9c636623.js"><link rel="prefetch" href="/igarashi-blog/assets/Postman.html.bba64bf1.js"><link rel="prefetch" href="/igarashi-blog/assets/rdesktop.html.7d8c65fa.js"><link rel="prefetch" href="/igarashi-blog/assets/screen.html.369869e4.js"><link rel="prefetch" href="/igarashi-blog/assets/tmux.html.cc3b25b3.js"><link rel="prefetch" href="/igarashi-blog/assets/ç½‘ç»œä»£ç†.html.fda8a67a.js"><link rel="prefetch" href="/igarashi-blog/assets/asyncio Recipes.html.1a1b19a2.js"><link rel="prefetch" href="/igarashi-blog/assets/asyncioåŸºç¡€.html.2cfcb7ce.js"><link rel="prefetch" href="/igarashi-blog/assets/asyncioè¿›é˜¶.html.f88a0b3e.js"><link rel="prefetch" href="/igarashi-blog/assets/äº‹ä»¶å¾ªç¯.html.461b6d5a.js"><link rel="prefetch" href="/igarashi-blog/assets/åº•å±‚å®ç°.html.176924f8.js"><link rel="prefetch" href="/igarashi-blog/assets/pip.html.f722da7e.js"><link rel="prefetch" href="/igarashi-blog/assets/å­—ç¬¦ç¼–ç .html.7f040b07.js"><link rel="prefetch" href="/igarashi-blog/assets/æ•°æ®ç±»å‹.html.f3a7b82b.js"><link rel="prefetch" href="/igarashi-blog/assets/æ–‡ä»¶åŸºç¡€.html.8f3d8dbb.js"><link rel="prefetch" href="/igarashi-blog/assets/æµç¨‹æ§åˆ¶.html.a5abcc99.js"><link rel="prefetch" href="/igarashi-blog/assets/ç¯å¢ƒå®‰è£….html.087f2070.js"><link rel="prefetch" href="/igarashi-blog/assets/åç¨‹.html.b9daceb2.js"><link rel="prefetch" href="/igarashi-blog/assets/åŒæ­¥é˜Ÿåˆ—.html.c15cefe0.js"><link rel="prefetch" href="/igarashi-blog/assets/å¤šçº¿ç¨‹ç¼–ç¨‹.html.85e7fd4a.js"><link rel="prefetch" href="/igarashi-blog/assets/å¤šè¿›ç¨‹ç¼–ç¨‹.html.a92ea72b.js"><link rel="prefetch" href="/igarashi-blog/assets/çº¿ç¨‹.html.97b78900.js"><link rel="prefetch" href="/igarashi-blog/assets/çº¿ç¨‹è¿›ç¨‹è¾…åŠ©æœºåˆ¶.html.dfa34dd5.js"><link rel="prefetch" href="/igarashi-blog/assets/è¿›ç¨‹.html.46552b1d.js"><link rel="prefetch" href="/igarashi-blog/assets/Cpythonå¯¹è±¡.html.738bae2f.js"><link rel="prefetch" href="/igarashi-blog/assets/åƒåœ¾å›æ”¶.html.c77b66bd.js"><link rel="prefetch" href="/igarashi-blog/assets/åºåˆ—è¿›é˜¶.html.a5df5ce6.js"><link rel="prefetch" href="/igarashi-blog/assets/æ˜ å°„è¿›é˜¶.html.54836524.js"><link rel="prefetch" href="/igarashi-blog/assets/è®¾è®¡æ¨¡å¼.html.5e42cac4.js"><link rel="prefetch" href="/igarashi-blog/assets/Socket.html.18084784.js"><link rel="prefetch" href="/igarashi-blog/assets/Websocket.html.d4adfc4a.js"><link rel="prefetch" href="/igarashi-blog/assets/äº‹ä»¶æ¨¡å‹.html.84733362.js"><link rel="prefetch" href="/igarashi-blog/assets/å›è°ƒ.html.44766ac2.js"><link rel="prefetch" href="/igarashi-blog/assets/å‡½æ•°.html.20b79cef.js"><link rel="prefetch" href="/igarashi-blog/assets/å˜é‡æœºåˆ¶.html.6f0e7f2f.js"><link rel="prefetch" href="/igarashi-blog/assets/æ¨¡å—å’ŒåŒ….html.4f09082f.js"><link rel="prefetch" href="/igarashi-blog/assets/ç”Ÿæˆå™¨.html.86636e92.js"><link rel="prefetch" href="/igarashi-blog/assets/è£…é¥°å™¨.html.bb704e90.js"><link rel="prefetch" href="/igarashi-blog/assets/è¿­ä»£å™¨.html.75c33e0d.js"><link rel="prefetch" href="/igarashi-blog/assets/é”™è¯¯å’Œå¼‚å¸¸.html.bd8778b0.js"><link rel="prefetch" href="/igarashi-blog/assets/é¢å‘å¯¹è±¡.html.2e55bc03.js"><link rel="prefetch" href="/igarashi-blog/assets/bind.html.f1491242.js"><link rel="prefetch" href="/igarashi-blog/assets/DNSæœåŠ¡.html.98ccc539.js"><link rel="prefetch" href="/igarashi-blog/assets/linux æ–‡ä»¶é”.html.536551b2.js"><link rel="prefetch" href="/igarashi-blog/assets/è„šæœ¬è¯´æ˜.html.11448f92.js"><link rel="prefetch" href="/igarashi-blog/assets/ADåŸŸ.html.7eddae0b.js"><link rel="prefetch" href="/igarashi-blog/assets/LDAP.html.8bb6d517.js"><link rel="prefetch" href="/igarashi-blog/assets/Pythonå¯¹æ¥ADåŸŸ.html.d87096b0.js"><link rel="prefetch" href="/igarashi-blog/assets/NFSæœåŠ¡.html.b766b00d.js"><link rel="prefetch" href="/igarashi-blog/assets/NTPæœåŠ¡.html.96c0cac8.js"><link rel="prefetch" href="/igarashi-blog/assets/SambaæœåŠ¡.html.2c4d7248.js"><link rel="prefetch" href="/igarashi-blog/assets/SNMPæœåŠ¡.html.efea8377.js"><link rel="prefetch" href="/igarashi-blog/assets/ufscliå·¥å…·.html.553a49b8.js"><link rel="prefetch" href="/igarashi-blog/assets/ufsæ ¸å¿ƒç»„ä»¶.html.a85c2d4d.js"><link rel="prefetch" href="/igarashi-blog/assets/ufsç®¡ç†å¹³å°.html.827894ab.js"><link rel="prefetch" href="/igarashi-blog/assets/uusè™šæ‹Ÿæœºæ’é”™.html.11f96eb0.js"><link rel="prefetch" href="/igarashi-blog/assets/CentOSçš„å®‰è£….html.a38d85ee.js"><link rel="prefetch" href="/igarashi-blog/assets/RPMåŒ…ç®¡ç†.html.9db847ad.js"><link rel="prefetch" href="/igarashi-blog/assets/è´¦å·ç®¡ç†ä¸ACLæƒé™.html.0b69d1b3.js"><link rel="prefetch" href="/igarashi-blog/assets/Linuxæ˜¯ä»€ä¹ˆä¸å¦‚ä½•å­¦ä¹ .html.3578bcf6.js"><link rel="prefetch" href="/igarashi-blog/assets/ä¸»æœºè§„åˆ’ä¸ç£ç›˜åˆ†åŒº.html.0785c764.js"><link rel="prefetch" href="/igarashi-blog/assets/è®¡ç®—æœºæ¦‚è®º.html.a3a59024.js"><link rel="prefetch" href="/igarashi-blog/assets/Linuxç£ç›˜ä¸æ–‡ä»¶ç³»ç»Ÿç®¡ç†.html.c574f286.js"><link rel="prefetch" href="/igarashi-blog/assets/æ–‡ä»¶ä¸æ–‡ä»¶ç³»ç»Ÿå‹ç¼©.html.f2755e6d.js"><link rel="prefetch" href="/igarashi-blog/assets/æ–‡ä»¶æƒé™ä¸ç›®å½•é…ç½®.html.e715584b.js"><link rel="prefetch" href="/igarashi-blog/assets/è®¤è¯†ç³»ç»ŸæœåŠ¡.html.b07f97df.js"><link rel="prefetch" href="/igarashi-blog/assets/vim å¿«æ·é”®.html.c24d4962.js"><link rel="prefetch" href="/igarashi-blog/assets/vimç¨‹åºç¼–è¾‘å™¨.html.3a1a1e99.js"><link rel="prefetch" href="/igarashi-blog/assets/å¸¸å¤ä¹ .html.0e09b1df.js"><link rel="prefetch" href="/igarashi-blog/assets/CURL.html.c17edda2.js"><link rel="prefetch" href="/igarashi-blog/assets/Restful.html.b7688d9f.js"><link rel="prefetch" href="/igarashi-blog/assets/SSLåè®®.html.da7f8695.js"><link rel="prefetch" href="/igarashi-blog/assets/å‘½ä»¤.html.e064d8fc.js"><link rel="prefetch" href="/igarashi-blog/assets/ç½‘ç»œåŸºç¡€.html.3421c413.js"><link rel="prefetch" href="/igarashi-blog/assets/Ubuntuç³»åˆ—æ“ä½œ.html.236a0c03.js"><link rel="prefetch" href="/igarashi-blog/assets/è®¤è¯†Linuxç³»ç»Ÿ.html.d0debf65.js"><link rel="prefetch" href="/igarashi-blog/assets/CPU.html.834ca801.js"><link rel="prefetch" href="/igarashi-blog/assets/ä¸»æ¿.html.84705142.js"><link rel="prefetch" href="/igarashi-blog/assets/å†…å­˜.html.b2420f0c.js"><link rel="prefetch" href="/igarashi-blog/assets/å­˜å‚¨.html.209cdcec.js"><link rel="prefetch" href="/igarashi-blog/assets/æ‰©å±•å¡ä¸æ¥å£.html.2c470b16.js"><link rel="prefetch" href="/igarashi-blog/assets/æ˜¾å¡.html.000a05f8.js"><link rel="prefetch" href="/igarashi-blog/assets/PVE.html.a4329e00.js"><link rel="prefetch" href="/igarashi-blog/assets/æ·»åŠ ç£ç›˜.html.3a7f4993.js"><link rel="prefetch" href="/igarashi-blog/assets/ç½‘ç»œé…ç½®.html.bd9e3583.js"><link rel="prefetch" href="/igarashi-blog/assets/404.html.0b21f3d1.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.3a0eb7d8.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.95274b4c.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.7b66b08c.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.06e45fda.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.044c7f67.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.f20bf5e8.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.f9cbb21d.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.cd9aace1.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.578951b7.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.4d83503c.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.2784bdf5.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.91409594.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.edf4d3f8.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.cfb28f0c.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.252d279c.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.6ad0ebda.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.fb80d5e7.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.0efa5260.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.f5b73c95.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.47a1414d.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.0ccdd160.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.79a7b8dd.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.c699f9f8.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.7e9c4f9e.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.3da5c3f2.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.d7491f43.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.a00a2175.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.23b03e25.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.fe2776fe.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.0d4c9a02.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.a3ad6b2b.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.4793317e.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.9484fb20.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.9f33067d.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.0b7c24a8.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.5df02379.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.aca9e65e.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.ab5735a3.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.7ed4b026.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.ea7b327c.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.27020766.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.9699eb81.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.88d0731a.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.0b777f3c.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.c72e9ef2.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.814d67a0.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.70568e9f.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.9f672ee9.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.1fec0c5d.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.32eb60bd.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.ef8cb56b.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.cc4041d3.js"><link rel="prefetch" href="/igarashi-blog/assets/home.html.591fbd96.js"><link rel="prefetch" href="/igarashi-blog/assets/intro.html.0caf5824.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.38f1d693.js"><link rel="prefetch" href="/igarashi-blog/assets/slides.html.fe270f73.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.45c1aa47.js"><link rel="prefetch" href="/igarashi-blog/assets/disable.html.6f788fa4.js"><link rel="prefetch" href="/igarashi-blog/assets/encrypt.html.6db87bdd.js"><link rel="prefetch" href="/igarashi-blog/assets/markdown.html.a39b0bdb.js"><link rel="prefetch" href="/igarashi-blog/assets/page.html.9852349b.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.055a90a8.js"><link rel="prefetch" href="/igarashi-blog/assets/PSæ“ä½œåŸºç¡€.html.14d04538.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.7e1a18f9.js"><link rel="prefetch" href="/igarashi-blog/assets/SAIæ“ä½œåŸºç¡€.html.b3febb3c.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.a682019c.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.75852de7.js"><link rel="prefetch" href="/igarashi-blog/assets/asyncio_recipes.html.eae795f6.js"><link rel="prefetch" href="/igarashi-blog/assets/devops_in_python.html.7a824ebb.js"><link rel="prefetch" href="/igarashi-blog/assets/fluent_python.html.e23e1d40.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.73c9da6f.js"><link rel="prefetch" href="/igarashi-blog/assets/python_cookbook.html.0ca364e3.js"><link rel="prefetch" href="/igarashi-blog/assets/pythonæºç å‰–æ.html.265e8f94.js"><link rel="prefetch" href="/igarashi-blog/assets/use_asyncio.html.5ebfe994.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.9506363c.js"><link rel="prefetch" href="/igarashi-blog/assets/äºšåŠ¨æœºä¸äººæ ¼.html.fa9d325e.js"><link rel="prefetch" href="/igarashi-blog/assets/äººçš„æ½œèƒ½å’Œä»·å€¼.html.21a2d837.js"><link rel="prefetch" href="/igarashi-blog/assets/å¥½äººæ˜¯å¦‚ä½•å˜æˆæ¶é­”çš„.html.8095ff72.js"><link rel="prefetch" href="/igarashi-blog/assets/å½±å“åŠ›.html.95db945d.js"><link rel="prefetch" href="/igarashi-blog/assets/æ€§å¿ƒç†å­¦.html.9b236acb.js"><link rel="prefetch" href="/igarashi-blog/assets/æ´—è„‘å¿ƒç†å­¦.html.c8864415.js"><link rel="prefetch" href="/igarashi-blog/assets/è¿›åŒ–å¿ƒç†å­¦.html.364e71bb.js"><link rel="prefetch" href="/igarashi-blog/assets/CODE.html.fa65581b.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.e87fce7b.js"><link rel="prefetch" href="/igarashi-blog/assets/æˆä¸ºæŠ€æœ¯é¢†å¯¼è€….html.ec2b367d.js"><link rel="prefetch" href="/igarashi-blog/assets/é¸Ÿå“¥çš„Linuxç§æˆ¿èœ.html.3e6754d6.js"><link rel="prefetch" href="/igarashi-blog/assets/é¸Ÿå“¥çš„Linuxç§æˆ¿èœæœåŠ¡å™¨æ¶è®¾ç¯‡.html.d225da5c.js"><link rel="prefetch" href="/igarashi-blog/assets/é»‘å®¢ä¸ç”»å®¶.html.7c93be19.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.39c0b40e.js"><link rel="prefetch" href="/igarashi-blog/assets/ä¸­å›½äººçš„æ€§æ ¼.html.3584adbc.js"><link rel="prefetch" href="/igarashi-blog/assets/ä¹Œåˆä¹‹ä¼—.html.8425eddb.js"><link rel="prefetch" href="/igarashi-blog/assets/å¨±ä¹è‡³æ­».html.9da48783.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.51e3dec8.js"><link rel="prefetch" href="/igarashi-blog/assets/æ¸…é†’æ€è€ƒçš„è‰ºæœ¯.html.e9157347.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.9e24b850.js"><link rel="prefetch" href="/igarashi-blog/assets/åšå¼ˆè®ºä¸ç»æµè¡Œä¸º.html.066557bb.js"><link rel="prefetch" href="/igarashi-blog/assets/å°±ä¸š_åˆ©æ¯å’Œè´§å¸é€šè®º.html.0bf857f0.js"><link rel="prefetch" href="/igarashi-blog/assets/èªæ˜çš„æŠ•èµ„è€….html.028e2616.js"><link rel="prefetch" href="/igarashi-blog/assets/è´§å¸é‡‘èå­¦.html.3217dd24.js"><link rel="prefetch" href="/igarashi-blog/assets/éç†æ€§ç¹è£.html.3412d745.js"><link rel="prefetch" href="/igarashi-blog/assets/dockerå®¹å™¨.html.05f43144.js"><link rel="prefetch" href="/igarashi-blog/assets/ä½¿ç”¨åŸºç¡€.html.be5a084f.js"><link rel="prefetch" href="/igarashi-blog/assets/å‘½ä»¤.html.74c38d5e.js"><link rel="prefetch" href="/igarashi-blog/assets/ç½‘ç»œ.html.2f984611.js"><link rel="prefetch" href="/igarashi-blog/assets/Git.html.950a0912.js"><link rel="prefetch" href="/igarashi-blog/assets/GItæäº¤è§„åˆ™.html.eb65b29b.js"><link rel="prefetch" href="/igarashi-blog/assets/å®‰è£…GitLab.html.2d0a9be0.js"><link rel="prefetch" href="/igarashi-blog/assets/K8såŸºç¡€.html.d106269c.js"><link rel="prefetch" href="/igarashi-blog/assets/k8så®‰è£….html.2342d701.js"><link rel="prefetch" href="/igarashi-blog/assets/NginxåŸºç¡€.html.38d1913c.js"><link rel="prefetch" href="/igarashi-blog/assets/åº”ç”¨éƒ¨ç½².html.5015a74c.js"><link rel="prefetch" href="/igarashi-blog/assets/FiddleræŠ“åŒ…å·¥å…·.html.c21e44f3.js"><link rel="prefetch" href="/igarashi-blog/assets/Postman.html.ed0952ef.js"><link rel="prefetch" href="/igarashi-blog/assets/rdesktop.html.5bd09a1a.js"><link rel="prefetch" href="/igarashi-blog/assets/screen.html.ee7489cb.js"><link rel="prefetch" href="/igarashi-blog/assets/tmux.html.79bcf227.js"><link rel="prefetch" href="/igarashi-blog/assets/ç½‘ç»œä»£ç†.html.b465dad0.js"><link rel="prefetch" href="/igarashi-blog/assets/asyncio Recipes.html.3446b401.js"><link rel="prefetch" href="/igarashi-blog/assets/asyncioåŸºç¡€.html.428577b0.js"><link rel="prefetch" href="/igarashi-blog/assets/asyncioè¿›é˜¶.html.732359b2.js"><link rel="prefetch" href="/igarashi-blog/assets/äº‹ä»¶å¾ªç¯.html.c934244b.js"><link rel="prefetch" href="/igarashi-blog/assets/åº•å±‚å®ç°.html.d67408e3.js"><link rel="prefetch" href="/igarashi-blog/assets/pip.html.6c2cdbed.js"><link rel="prefetch" href="/igarashi-blog/assets/å­—ç¬¦ç¼–ç .html.9964fc8f.js"><link rel="prefetch" href="/igarashi-blog/assets/æ•°æ®ç±»å‹.html.28fc949c.js"><link rel="prefetch" href="/igarashi-blog/assets/æ–‡ä»¶åŸºç¡€.html.1d0be1a6.js"><link rel="prefetch" href="/igarashi-blog/assets/æµç¨‹æ§åˆ¶.html.fd8f4625.js"><link rel="prefetch" href="/igarashi-blog/assets/ç¯å¢ƒå®‰è£….html.59f1b6f9.js"><link rel="prefetch" href="/igarashi-blog/assets/åç¨‹.html.def401e3.js"><link rel="prefetch" href="/igarashi-blog/assets/åŒæ­¥é˜Ÿåˆ—.html.bddd86d8.js"><link rel="prefetch" href="/igarashi-blog/assets/å¤šçº¿ç¨‹ç¼–ç¨‹.html.0019c187.js"><link rel="prefetch" href="/igarashi-blog/assets/å¤šè¿›ç¨‹ç¼–ç¨‹.html.70c776d7.js"><link rel="prefetch" href="/igarashi-blog/assets/çº¿ç¨‹.html.cd07f21c.js"><link rel="prefetch" href="/igarashi-blog/assets/çº¿ç¨‹è¿›ç¨‹è¾…åŠ©æœºåˆ¶.html.6196a513.js"><link rel="prefetch" href="/igarashi-blog/assets/è¿›ç¨‹.html.b7840f70.js"><link rel="prefetch" href="/igarashi-blog/assets/Cpythonå¯¹è±¡.html.2b717285.js"><link rel="prefetch" href="/igarashi-blog/assets/åƒåœ¾å›æ”¶.html.fb53a894.js"><link rel="prefetch" href="/igarashi-blog/assets/åºåˆ—è¿›é˜¶.html.dee9561d.js"><link rel="prefetch" href="/igarashi-blog/assets/æ˜ å°„è¿›é˜¶.html.8cedd64a.js"><link rel="prefetch" href="/igarashi-blog/assets/è®¾è®¡æ¨¡å¼.html.7a0984f2.js"><link rel="prefetch" href="/igarashi-blog/assets/Socket.html.15a10e41.js"><link rel="prefetch" href="/igarashi-blog/assets/Websocket.html.7f124e4c.js"><link rel="prefetch" href="/igarashi-blog/assets/äº‹ä»¶æ¨¡å‹.html.2f384808.js"><link rel="prefetch" href="/igarashi-blog/assets/å›è°ƒ.html.d75a13f1.js"><link rel="prefetch" href="/igarashi-blog/assets/å‡½æ•°.html.1a09e52d.js"><link rel="prefetch" href="/igarashi-blog/assets/å˜é‡æœºåˆ¶.html.019f770d.js"><link rel="prefetch" href="/igarashi-blog/assets/æ¨¡å—å’ŒåŒ….html.0c45ab8d.js"><link rel="prefetch" href="/igarashi-blog/assets/ç”Ÿæˆå™¨.html.908adfb9.js"><link rel="prefetch" href="/igarashi-blog/assets/è£…é¥°å™¨.html.61d170ce.js"><link rel="prefetch" href="/igarashi-blog/assets/è¿­ä»£å™¨.html.354dddb1.js"><link rel="prefetch" href="/igarashi-blog/assets/é”™è¯¯å’Œå¼‚å¸¸.html.1c3866e0.js"><link rel="prefetch" href="/igarashi-blog/assets/é¢å‘å¯¹è±¡.html.48a90ee3.js"><link rel="prefetch" href="/igarashi-blog/assets/bind.html.012f2148.js"><link rel="prefetch" href="/igarashi-blog/assets/DNSæœåŠ¡.html.8510555a.js"><link rel="prefetch" href="/igarashi-blog/assets/linux æ–‡ä»¶é”.html.f7ff916b.js"><link rel="prefetch" href="/igarashi-blog/assets/è„šæœ¬è¯´æ˜.html.43985323.js"><link rel="prefetch" href="/igarashi-blog/assets/ADåŸŸ.html.0026e4d5.js"><link rel="prefetch" href="/igarashi-blog/assets/LDAP.html.da60e494.js"><link rel="prefetch" href="/igarashi-blog/assets/Pythonå¯¹æ¥ADåŸŸ.html.4d03ef25.js"><link rel="prefetch" href="/igarashi-blog/assets/NFSæœåŠ¡.html.b693c026.js"><link rel="prefetch" href="/igarashi-blog/assets/NTPæœåŠ¡.html.b6a8ba29.js"><link rel="prefetch" href="/igarashi-blog/assets/SambaæœåŠ¡.html.5c30d025.js"><link rel="prefetch" href="/igarashi-blog/assets/SNMPæœåŠ¡.html.1a6eadb7.js"><link rel="prefetch" href="/igarashi-blog/assets/ufscliå·¥å…·.html.460ed02a.js"><link rel="prefetch" href="/igarashi-blog/assets/ufsæ ¸å¿ƒç»„ä»¶.html.3e8d3bf9.js"><link rel="prefetch" href="/igarashi-blog/assets/ufsç®¡ç†å¹³å°.html.455c0ae0.js"><link rel="prefetch" href="/igarashi-blog/assets/uusè™šæ‹Ÿæœºæ’é”™.html.f9e5bcad.js"><link rel="prefetch" href="/igarashi-blog/assets/CentOSçš„å®‰è£….html.8571eadf.js"><link rel="prefetch" href="/igarashi-blog/assets/RPMåŒ…ç®¡ç†.html.c327dc0c.js"><link rel="prefetch" href="/igarashi-blog/assets/è´¦å·ç®¡ç†ä¸ACLæƒé™.html.a6f6a0b0.js"><link rel="prefetch" href="/igarashi-blog/assets/Linuxæ˜¯ä»€ä¹ˆä¸å¦‚ä½•å­¦ä¹ .html.1cf6c3ad.js"><link rel="prefetch" href="/igarashi-blog/assets/ä¸»æœºè§„åˆ’ä¸ç£ç›˜åˆ†åŒº.html.cc034627.js"><link rel="prefetch" href="/igarashi-blog/assets/è®¡ç®—æœºæ¦‚è®º.html.41f746d5.js"><link rel="prefetch" href="/igarashi-blog/assets/Linuxç£ç›˜ä¸æ–‡ä»¶ç³»ç»Ÿç®¡ç†.html.abfaa4b2.js"><link rel="prefetch" href="/igarashi-blog/assets/æ–‡ä»¶ä¸æ–‡ä»¶ç³»ç»Ÿå‹ç¼©.html.58839edb.js"><link rel="prefetch" href="/igarashi-blog/assets/æ–‡ä»¶æƒé™ä¸ç›®å½•é…ç½®.html.b00b3a3b.js"><link rel="prefetch" href="/igarashi-blog/assets/è®¤è¯†ç³»ç»ŸæœåŠ¡.html.37f1013a.js"><link rel="prefetch" href="/igarashi-blog/assets/vim å¿«æ·é”®.html.438e2939.js"><link rel="prefetch" href="/igarashi-blog/assets/vimç¨‹åºç¼–è¾‘å™¨.html.d6122c9b.js"><link rel="prefetch" href="/igarashi-blog/assets/å¸¸å¤ä¹ .html.9f93b7fc.js"><link rel="prefetch" href="/igarashi-blog/assets/CURL.html.d9d87f5a.js"><link rel="prefetch" href="/igarashi-blog/assets/Restful.html.1f35d9fe.js"><link rel="prefetch" href="/igarashi-blog/assets/SSLåè®®.html.d140bd56.js"><link rel="prefetch" href="/igarashi-blog/assets/å‘½ä»¤.html.7ab393ea.js"><link rel="prefetch" href="/igarashi-blog/assets/ç½‘ç»œåŸºç¡€.html.79aecbf4.js"><link rel="prefetch" href="/igarashi-blog/assets/Ubuntuç³»åˆ—æ“ä½œ.html.313b5ab2.js"><link rel="prefetch" href="/igarashi-blog/assets/è®¤è¯†Linuxç³»ç»Ÿ.html.4905c4eb.js"><link rel="prefetch" href="/igarashi-blog/assets/CPU.html.3150a4a7.js"><link rel="prefetch" href="/igarashi-blog/assets/ä¸»æ¿.html.553b1bdc.js"><link rel="prefetch" href="/igarashi-blog/assets/å†…å­˜.html.33e692bc.js"><link rel="prefetch" href="/igarashi-blog/assets/å­˜å‚¨.html.994a38fa.js"><link rel="prefetch" href="/igarashi-blog/assets/æ‰©å±•å¡ä¸æ¥å£.html.6c233579.js"><link rel="prefetch" href="/igarashi-blog/assets/æ˜¾å¡.html.c8fca498.js"><link rel="prefetch" href="/igarashi-blog/assets/PVE.html.1a4792c1.js"><link rel="prefetch" href="/igarashi-blog/assets/æ·»åŠ ç£ç›˜.html.626d9403.js"><link rel="prefetch" href="/igarashi-blog/assets/ç½‘ç»œé…ç½®.html.82b543cf.js"><link rel="prefetch" href="/igarashi-blog/assets/404.html.c6e87e2f.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.bec4078e.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.f5472a70.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.ba9df606.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.73ecc639.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.48b55492.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.30963d9f.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.2cc87c2c.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.184c247f.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.c4455c79.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.308ae322.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.5c765588.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.c63adaeb.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.76fc9fa3.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.4e5d100a.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.ea7f5a9d.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.85a0eb12.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.b467096b.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.4a872888.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.21cc3eee.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.2e28a5c7.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.0ddd7448.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.47e6c7c7.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.fa545419.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.69a0de5b.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.192f77f8.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.cad76bdb.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.358091c6.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.8ad970f9.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.c1b5d339.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.5924b953.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.4bf4a31c.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.e43efb41.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.ca89219e.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.6050279a.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.ebd83298.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.ab5cc011.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.fd9e07bd.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.9af42a4d.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.bfd8d18d.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.ea4ce3bb.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.28787751.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.061839f1.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.d6696651.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.73e87f68.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.b2937b00.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.805f1426.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.743fbafb.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.b452ca82.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.cd26bad5.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.f43f4ab2.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.f9e50f6a.js"><link rel="prefetch" href="/igarashi-blog/assets/index.html.3b946abb.js"><link rel="prefetch" href="/igarashi-blog/assets/giscus.e34d3fcc.js"><link rel="prefetch" href="/igarashi-blog/assets/auto.56c9cb2e.js"><link rel="prefetch" href="/igarashi-blog/assets/index.1f644ee1.js"><link rel="prefetch" href="/igarashi-blog/assets/flowchart.parse.1479ec3f.js"><link rel="prefetch" href="/igarashi-blog/assets/mermaid.esm.min.0e041931.js"><link rel="prefetch" href="/igarashi-blog/assets/highlight.esm.9b852bc5.js"><link rel="prefetch" href="/igarashi-blog/assets/markdown.esm.77e8db25.js"><link rel="prefetch" href="/igarashi-blog/assets/math.esm.cb9d4be3.js"><link rel="prefetch" href="/igarashi-blog/assets/notes.esm.62c5f19d.js"><link rel="prefetch" href="/igarashi-blog/assets/reveal.esm.41ec5d7f.js"><link rel="prefetch" href="/igarashi-blog/assets/search.esm.04894411.js"><link rel="prefetch" href="/igarashi-blog/assets/zoom.esm.78977eba.js"><link rel="prefetch" href="/igarashi-blog/assets/VuePlayground.8a699624.js"><link rel="prefetch" href="/igarashi-blog/assets/photoswipe.esm.f594e77b.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/igarashi-blog/" class="brand"><img class="logo" src="/igarashi-blog/avatar.jpg" alt="äº”åå²šå‘~"><!----><span class="site-name hide-in-pad">äº”åå²šå‘~</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/igarashi-blog/" class="nav-link" aria-label="ä¸»é¡µ"><span class="icon iconfont icon-home"></span>ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Python"><span class="title"><span class="icon iconfont icon-python"></span>Python</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>è¯­è¨€</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/%E5%9F%BA%E7%A1%80/%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85.html" class="nav-link" aria-label="åŸºç¡€"><!---->åŸºç¡€<!----></a></li><li class="dropdown-subitem"><a href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/%E8%BF%9B%E9%98%B6/%E5%8F%98%E9%87%8F%E6%9C%BA%E5%88%B6.html" class="nav-link" aria-label="è¿›é˜¶"><!---->è¿›é˜¶<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="è¿ç»´"><span class="title"><span class="icon iconfont icon-shell"></span>è¿ç»´</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/igarashi-blog/unix/Linux/Linux%E5%9F%BA%E7%A1%80%E6%8C%87%E5%BC%95/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%A6%82%E8%AE%BA.html" class="nav-link" aria-label="Linux"><span class="icon iconfont icon-linux"></span>Linux<!----></a></li><li class="dropdown-item"><a href="/igarashi-blog/unix/CentOS/%E5%AE%89%E8%A3%85/CentOS%E7%9A%84%E5%AE%89%E8%A3%85.html" class="nav-link" aria-label="CentOS"><span class="icon iconfont icon-centos"></span>CentOS<!----></a></li><li class="dropdown-item"><a href="/igarashi-blog/unix/Ubuntu/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/Ubuntu%E7%B3%BB%E5%88%97%E6%93%8D%E4%BD%9C.html" class="nav-link" aria-label="Ubuntu"><span class="icon iconfont icon-ubuntu"></span>Ubuntu<!----></a></li><li class="dropdown-item"><a href="/igarashi-blog/unix/%E8%99%9A%E6%8B%9F%E6%9C%BA/PVE/PVE.html" class="nav-link" aria-label="è™šæ‹Ÿæœº"><span class="icon iconfont icon-snow"></span>è™šæ‹Ÿæœº<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="å·¥å…·"><span class="title"><span class="icon iconfont icon-tool"></span>å·¥å…·</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/igarashi-blog/tool/Git/Git.html" class="nav-link" aria-label="Git"><span class="icon iconfont icon-git"></span>Git<!----></a></li><li class="dropdown-item"><a href="/igarashi-blog/tool/Nginx/Nginx%E5%9F%BA%E7%A1%80.html" class="nav-link" aria-label="Nginx"><span class="icon iconfont icon-nginx"></span>Nginx<!----></a></li><li class="dropdown-item"><a href="/igarashi-blog/tool/Docker/docker%E5%AE%B9%E5%99%A8.html" class="nav-link" aria-label="Docker"><span class="icon iconfont icon-hot"></span>Docker<!----></a></li><li class="dropdown-item"><a href="/igarashi-blog/tool/Kubernets/K8s%E5%9F%BA%E7%A1%80.html" class="nav-link" aria-label="Kubernets"><span class="icon iconfont icon-hot"></span>Kubernets<!----></a></li><li class="dropdown-item"><a href="/igarashi-blog/tool/Other/%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86.html" class="nav-link" aria-label="å…¶ä»–"><span class="icon iconfont icon-operate"></span>å…¶ä»–<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="æ¼«æ¼«å…¨å¹²å·çš„è‹¦"><span class="title"><!---->æ¼«æ¼«å…¨å¹²å·çš„è‹¦</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="https://draveness.me/golang/" rel="noopener noreferrer" target="_blank" aria-label="GO" class="nav-link"><span class="icon iconfont icon-hot"></span>GO<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://notes.fe-mm.com/interview/base/types.html" rel="noopener noreferrer" target="_blank" aria-label="å‰ç«¯å†…å·ä¸å½’è·¯" class="nav-link"><span class="icon iconfont icon-html"></span>å‰ç«¯å†…å·ä¸å½’è·¯<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li></ul></button></div></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/Igarashi-G/igarashi-blog" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!----><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><p class="sidebar-heading clickable"><span class="icon iconfont icon-python"></span><a href="/igarashi-blog/python/" class="title">python</a><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-guide"></span><span class="title">è¯­è¨€</span><span class="arrow right"></span></button><!----></section><!--]--></li></ul></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->å¼‚æ­¥ç¼–ç¨‹å²å›æº¯</h1><div class="page-info"><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down" localizeddate="2022å¹´10æœˆ8æ—¥" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://github.com/Igarashi-G" target="_blank" rel="noopener noreferrer">äº”åå²š</a></span><span property="author" content="äº”åå²š"></span></span><!----><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022å¹´10æœˆ8æ—¥</span><meta property="datePublished" content="2022-10-08T01:58:06.000Z"></span><!----><!----><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down" localizeddate="2022å¹´10æœˆ8æ—¥" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 19 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT19M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html#ä¸€ã€ç¨‹åºæ‰§è¡ŒåŸºç¡€æ¦‚å¿µ" class="router-link-active router-link-exact-active toc-link level2">ä¸€ã€ç¨‹åºæ‰§è¡ŒåŸºç¡€æ¦‚å¿µï¼š</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html#_1-1-é˜»å¡" class="router-link-active router-link-exact-active toc-link level3">1.1 é˜»å¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html#_1-2-éé˜»å¡" class="router-link-active router-link-exact-active toc-link level3">1.2 éé˜»å¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html#_1-3-åŒæ­¥" class="router-link-active router-link-exact-active toc-link level3">1.3 åŒæ­¥</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html#_1-4-å¼‚æ­¥" class="router-link-active router-link-exact-active toc-link level3">1.4 å¼‚æ­¥</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html#_1-5-å¹¶å‘" class="router-link-active router-link-exact-active toc-link level3">1.5 å¹¶å‘</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html#_1-6-å¹¶è¡Œ" class="router-link-active router-link-exact-active toc-link level3">1.6 å¹¶è¡Œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html#_1-7-æ¦‚å¿µæ€»ç»“" class="router-link-active router-link-exact-active toc-link level3">1.7 æ¦‚å¿µæ€»ç»“</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html#_1-8-å¼‚æ­¥ç¼–ç¨‹" class="router-link-active router-link-exact-active toc-link level3">1.8 å¼‚æ­¥ç¼–ç¨‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html#_1-9-å¼‚æ­¥ä¹‹nan" class="router-link-active router-link-exact-active toc-link level3">1.9 å¼‚æ­¥ä¹‹nÃ¡n</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html#_2-è‹¦å¿ƒå¼‚æ­¥ä¸ºå“ªèˆ¬" class="router-link-active router-link-exact-active toc-link level2">2 è‹¦å¿ƒå¼‚æ­¥ä¸ºå“ªèˆ¬</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html#_2-1-cpu-çš„æ—¶é—´è§‚" class="router-link-active router-link-exact-active toc-link level3">2.1 CPU çš„æ—¶é—´è§‚</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html#_2-2-é¢ä¸´çš„é—®é¢˜" class="router-link-active router-link-exact-active toc-link level3">2.2 é¢ä¸´çš„é—®é¢˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html#_2-3-è§£å†³æ–¹æ¡ˆ" class="router-link-active router-link-exact-active toc-link level3">2.3 è§£å†³æ–¹æ¡ˆ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html#_3-å¼‚æ­¥-i-o-è¿›åŒ–ä¹‹è·¯" class="router-link-active router-link-exact-active toc-link level2">3 å¼‚æ­¥ I/O è¿›åŒ–ä¹‹è·¯</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html#_3-1-åŒæ­¥é˜»å¡æ–¹å¼" class="router-link-active router-link-exact-active toc-link level3">3.1 åŒæ­¥é˜»å¡æ–¹å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html#_3-2-æ”¹è¿›æ–¹å¼-å¤šè¿›ç¨‹" class="router-link-active router-link-exact-active toc-link level3">3.2 æ”¹è¿›æ–¹å¼ï¼šå¤šè¿›ç¨‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html#_3-3-ç»§ç»­æ”¹è¿›-å¤šçº¿ç¨‹" class="router-link-active router-link-exact-active toc-link level3">3.3 ç»§ç»­æ”¹è¿›ï¼šå¤šçº¿ç¨‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html#_3-4-éé˜»å¡æ–¹å¼" class="router-link-active router-link-exact-active toc-link level3">3.4 éé˜»å¡æ–¹å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/igarashi-blog/python/%E8%AF%AD%E8%A8%80/asyncio/%E5%BC%82%E6%AD%A5%E5%9B%9E%E6%BA%AF.html#_3-5-éé˜»å¡æ”¹è¿›" class="router-link-active router-link-exact-active toc-link level3">3.5 éé˜»å¡æ”¹è¿›</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="å¼‚æ­¥ç¼–ç¨‹å²å›æº¯" tabindex="-1"><a class="header-anchor" href="#å¼‚æ­¥ç¼–ç¨‹å²å›æº¯" aria-hidden="true">#</a> å¼‚æ­¥ç¼–ç¨‹å²å›æº¯</h1><!----><p><a href="https://mp.weixin.qq.com/s/GgamzHPyZuSg45LoJKsofA" target="_blank" rel="noopener noreferrer">å›æº¯<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="ä¸€ã€ç¨‹åºæ‰§è¡ŒåŸºç¡€æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€ç¨‹åºæ‰§è¡ŒåŸºç¡€æ¦‚å¿µ" aria-hidden="true">#</a> ä¸€ã€ç¨‹åºæ‰§è¡ŒåŸºç¡€æ¦‚å¿µï¼š</h2><h3 id="_1-1-é˜»å¡" tabindex="-1"><a class="header-anchor" href="#_1-1-é˜»å¡" aria-hidden="true">#</a> <strong>1.1 é˜»å¡</strong></h3><ul><li>ç¨‹åºæœªå¾—åˆ°æ‰€éœ€è®¡ç®—èµ„æºæ—¶è¢«æŒ‚èµ·çš„çŠ¶æ€ã€‚</li><li><strong>ç¨‹åºåœ¨ç­‰å¾…æŸä¸ªæ“ä½œå®ŒæˆæœŸé—´ï¼Œè‡ªèº«æ— æ³•ç»§ç»­å¹²åˆ«çš„äº‹æƒ…ï¼Œåˆ™ç§°è¯¥ç¨‹åºåœ¨è¯¥æ“ä½œä¸Šæ˜¯é˜»å¡çš„ã€‚</strong></li><li>å¸¸è§çš„é˜»å¡å½¢å¼æœ‰ï¼šç½‘ç»œ I/O é˜»å¡ã€ç£ç›˜ I/O é˜»å¡ã€ç”¨æˆ·è¾“å…¥é˜»å¡ç­‰ã€‚</li></ul><p>é˜»å¡æ˜¯æ— å¤„ä¸åœ¨çš„ï¼ŒåŒ…æ‹¬ CPU åˆ‡æ¢ä¸Šä¸‹æ–‡æ—¶ï¼Œæ‰€æœ‰çš„è¿›ç¨‹éƒ½æ— æ³•çœŸæ­£å¹²äº‹æƒ…ï¼Œå®ƒä»¬ä¹Ÿä¼šè¢«é˜»å¡ã€‚ï¼ˆå¦‚æœæ˜¯å¤šæ ¸ CPU åˆ™æ­£åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢æ“ä½œçš„æ ¸ä¸å¯è¢«åˆ©ç”¨ï¼‰</p><h3 id="_1-2-éé˜»å¡" tabindex="-1"><a class="header-anchor" href="#_1-2-éé˜»å¡" aria-hidden="true">#</a> 1.2 éé˜»å¡</h3><ul><li><p>ç¨‹åºåœ¨ç­‰å¾…æŸæ“ä½œè¿‡ç¨‹ä¸­ï¼Œè‡ªèº«ä¸è¢«é˜»å¡ï¼Œå¯ä»¥ç»§ç»­è¿è¡Œå¹²åˆ«çš„äº‹æƒ…ï¼Œåˆ™ç§°è¯¥ç¨‹åºåœ¨è¯¥æ“ä½œä¸Šæ˜¯éé˜»å¡çš„ã€‚</p></li><li><p>éé˜»å¡å¹¶ä¸æ˜¯åœ¨ä»»ä½•ç¨‹åºçº§åˆ«ã€ä»»ä½•æƒ…å†µä¸‹éƒ½å¯ä»¥å­˜åœ¨çš„ã€‚</p></li><li><p>ä»…å½“ç¨‹åºå°è£…çš„çº§åˆ«å¯ä»¥å›Šæ‹¬ç‹¬ç«‹çš„å­ç¨‹åºå•å…ƒæ—¶ï¼Œå®ƒæ‰å¯èƒ½å­˜åœ¨éé˜»å¡çŠ¶æ€ã€‚</p></li></ul><p>éé˜»å¡çš„å­˜åœ¨æ˜¯å› ä¸ºé˜»å¡å­˜åœ¨ï¼Œæ­£å› ä¸ºæŸä¸ªæ“ä½œé˜»å¡å¯¼è‡´çš„è€—æ—¶ä¸æ•ˆç‡ä½ä¸‹ï¼Œæˆ‘ä»¬æ‰è¦æŠŠå®ƒå˜æˆéé˜»å¡çš„ã€‚</p><h3 id="_1-3-åŒæ­¥" tabindex="-1"><a class="header-anchor" href="#_1-3-åŒæ­¥" aria-hidden="true">#</a> 1.3 åŒæ­¥</h3><ul><li><p>ä¸åŒç¨‹åºå•å…ƒä¸ºäº†å®ŒæˆæŸä¸ªä»»åŠ¡ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­éœ€é æŸç§é€šä¿¡æ–¹å¼ä»¥åè°ƒä¸€è‡´ï¼Œç§°è¿™äº›ç¨‹åºå•å…ƒæ˜¯åŒæ­¥æ‰§è¡Œçš„ã€‚</p></li><li><p>ä¾‹å¦‚è´­ç‰©ç³»ç»Ÿä¸­æ›´æ–°å•†å“åº“å­˜ï¼Œéœ€è¦ç”¨â€œè¡Œé”â€ä½œä¸ºé€šä¿¡ä¿¡å·ï¼Œè®©ä¸åŒçš„æ›´æ–°è¯·æ±‚å¼ºåˆ¶æ’é˜Ÿé¡ºåºæ‰§è¡Œï¼Œé‚£æ›´æ–°åº“å­˜çš„æ“ä½œæ˜¯åŒæ­¥çš„ã€‚</p></li><li><p>ç®€è¨€ä¹‹ï¼ŒåŒæ­¥æ„å‘³ç€æœ‰åºã€‚</p></li></ul><h3 id="_1-4-å¼‚æ­¥" tabindex="-1"><a class="header-anchor" href="#_1-4-å¼‚æ­¥" aria-hidden="true">#</a> 1.4 å¼‚æ­¥</h3><ul><li>ä¸ºå®ŒæˆæŸä¸ªä»»åŠ¡ï¼Œä¸åŒç¨‹åºå•å…ƒä¹‹é—´è¿‡ç¨‹ä¸­æ— éœ€é€šä¿¡åè°ƒï¼Œä¹Ÿèƒ½å®Œæˆä»»åŠ¡çš„æ–¹å¼ã€‚</li><li>ä¸ç›¸å…³çš„ç¨‹åºå•å…ƒä¹‹é—´å¯ä»¥æ˜¯å¼‚æ­¥çš„ã€‚ ä¾‹å¦‚ï¼Œçˆ¬è™«ä¸‹è½½ç½‘é¡µã€‚è°ƒåº¦ç¨‹åºè°ƒç”¨ä¸‹è½½ç¨‹åºåï¼Œå³å¯è°ƒåº¦å…¶ä»–ä»»åŠ¡ï¼Œè€Œæ— éœ€ä¸è¯¥ä¸‹è½½ä»»åŠ¡ä¿æŒé€šä¿¡ä»¥åè°ƒè¡Œä¸ºã€‚ä¸åŒç½‘é¡µçš„ä¸‹è½½ã€ä¿å­˜ç­‰æ“ä½œ éƒ½æ˜¯æ— å…³çš„ï¼Œä¹Ÿæ— éœ€ç›¸äº’é€šçŸ¥åè°ƒã€‚è¿™äº›å¼‚æ­¥æ“ä½œçš„å®Œæˆæ—¶åˆ»å¹¶ä¸ç¡®å®šã€‚</li><li>ç®€è¨€ä¹‹ï¼Œå¼‚æ­¥æ„å‘³ç€æ— åºã€‚</li><li><span class="badge queen" style="vertical-align:top;">åç¨‹</span>ã€<span class="badge error" style="vertical-align:top;">è¿›ç¨‹æ± </span>ã€<span class="badge info" style="vertical-align:top;">çº¿ç¨‹æ± </span> è¿™äº›æ–¹å¼éƒ½èƒ½å®ç°</li></ul><p>ä¸Šæ–‡æåˆ°çš„â€œé€šä¿¡æ–¹å¼â€é€šå¸¸æ˜¯æŒ‡å¼‚æ­¥å’Œå¹¶å‘ç¼–ç¨‹æä¾›çš„åŒæ­¥åŸè¯­ï¼Œå¦‚ä¿¡å·é‡ã€é”ã€åŒæ­¥é˜Ÿåˆ—ç­‰ç­‰ã€‚æˆ‘ä»¬éœ€çŸ¥é“ï¼Œè™½ç„¶è¿™äº›é€šä¿¡æ–¹å¼æ˜¯ä¸ºäº†è®©å¤šä¸ªç¨‹åº åœ¨ä¸€å®šæ¡ä»¶ä¸‹åŒæ­¥æ‰§è¡Œï¼Œä½†æ­£å› ä¸ºæ˜¯å¼‚æ­¥çš„å­˜åœ¨ï¼Œæ‰éœ€è¦è¿™äº›é€šä¿¡æ–¹å¼ã€‚å¦‚æœæ‰€æœ‰ç¨‹åºéƒ½æ˜¯æŒ‰åºæ‰§è¡Œï¼Œå…¶æœ¬èº«å°±æ˜¯åŒæ­¥çš„ï¼Œåˆä½•éœ€è¿™äº›åŒæ­¥ä¿¡å·å‘¢ï¼Ÿ</p><h3 id="_1-5-å¹¶å‘" tabindex="-1"><a class="header-anchor" href="#_1-5-å¹¶å‘" aria-hidden="true">#</a> 1.5 å¹¶å‘</h3><ul><li><p>å¹¶å‘æè¿°çš„æ˜¯ç¨‹åºçš„ç»„ç»‡ç»“æ„ã€‚æŒ‡ç¨‹åºè¦è¢«è®¾è®¡æˆå¤šä¸ªå¯ç‹¬ç«‹æ‰§è¡Œçš„å­ä»»åŠ¡ã€‚</p></li><li><p>ä»¥åˆ©ç”¨æœ‰é™çš„è®¡ç®—æœºèµ„æºä½¿å¤šä¸ªä»»åŠ¡å¯ä»¥è¢«å®æ—¶æˆ–è¿‘å®æ—¶æ‰§è¡Œä¸ºç›®çš„ã€‚</p></li></ul><h3 id="_1-6-å¹¶è¡Œ" tabindex="-1"><a class="header-anchor" href="#_1-6-å¹¶è¡Œ" aria-hidden="true">#</a> 1.6 å¹¶è¡Œ</h3><ul><li><p>å¹¶è¡Œæè¿°çš„æ˜¯ç¨‹åºçš„æ‰§è¡ŒçŠ¶æ€ã€‚æŒ‡å¤šä¸ªä»»åŠ¡åŒæ—¶è¢«æ‰§è¡Œã€‚</p></li><li><p>ä»¥åˆ©ç”¨å¯Œä½™è®¡ç®—èµ„æºï¼ˆå¤šæ ¸ CPUï¼‰åŠ é€Ÿå®Œæˆå¤šä¸ªä»»åŠ¡ä¸ºç›®çš„ã€‚</p></li></ul><p>å¹¶å‘æä¾›äº†ä¸€ç§ç¨‹åºç»„ç»‡ç»“æ„æ–¹å¼ï¼Œè®©é—®é¢˜çš„è§£å†³æ–¹æ¡ˆå¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œä½†å¹¶è¡Œæ‰§è¡Œä¸æ˜¯å¿…é¡»çš„ã€‚</p><h3 id="_1-7-æ¦‚å¿µæ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_1-7-æ¦‚å¿µæ€»ç»“" aria-hidden="true">#</a> 1.7 æ¦‚å¿µæ€»ç»“</h3><ul><li><p>[å¹¶è¡Œ]æ˜¯ä¸ºäº†åˆ©ç”¨å¤šæ ¸åŠ é€Ÿå¤šä»»åŠ¡å®Œæˆçš„è¿›åº¦</p></li><li><p>[å¹¶å‘]æ˜¯ä¸ºäº†è®©ç‹¬ç«‹çš„å­ä»»åŠ¡éƒ½æœ‰æœºä¼šè¢«å°½å¿«æ‰§è¡Œï¼Œä½†ä¸ä¸€å®šèƒ½åŠ é€Ÿæ•´ä½“è¿›åº¦</p></li><li><p>[éé˜»å¡]æ˜¯ä¸ºäº†æé«˜ç¨‹åºæ•´ä½“æ‰§è¡Œæ•ˆç‡</p></li><li><p>[å¼‚æ­¥]æ˜¯é«˜æ•ˆåœ°ç»„ç»‡éé˜»å¡ä»»åŠ¡çš„æ–¹å¼</p></li></ul><p>è¦æ”¯æŒå¹¶å‘ï¼Œå¿…é¡»æ‹†åˆ†ä¸ºå¤šä»»åŠ¡ï¼Œä¸åŒä»»åŠ¡ç›¸å¯¹è€Œè¨€æ‰æœ‰é˜»å¡/éé˜»å¡ã€åŒæ­¥/å¼‚æ­¥ã€‚æ‰€ä»¥ï¼Œå¹¶å‘ã€å¼‚æ­¥ã€éé˜»å¡ä¸‰ä¸ªè¯æ€»æ˜¯å¦‚å½±éšå½¢ã€‚</p><h3 id="_1-8-å¼‚æ­¥ç¼–ç¨‹" tabindex="-1"><a class="header-anchor" href="#_1-8-å¼‚æ­¥ç¼–ç¨‹" aria-hidden="true">#</a> 1.8 å¼‚æ­¥ç¼–ç¨‹</h3><p>ä»¥è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹ã€å‡½æ•°/æ–¹æ³•ä½œä¸ºæ‰§è¡Œä»»åŠ¡ç¨‹åºçš„åŸºæœ¬å•ä½ï¼Œç»“åˆå›è°ƒã€äº‹ä»¶å¾ªç¯ã€ä¿¡å·é‡ç­‰æœºåˆ¶ï¼Œä»¥æé«˜ç¨‹åºæ•´ä½“æ‰§è¡Œæ•ˆç‡å’Œå¹¶å‘èƒ½åŠ›çš„ç¼–ç¨‹æ–¹å¼ã€‚</p><p>å¦‚æœåœ¨æŸç¨‹åºçš„è¿è¡Œæ—¶ï¼Œèƒ½æ ¹æ®å·²ç»æ‰§è¡Œçš„æŒ‡ä»¤å‡†ç¡®åˆ¤æ–­å®ƒæ¥ä¸‹æ¥è¦è¿›è¡Œå“ªä¸ªå…·ä½“æ“ä½œï¼Œé‚£å®ƒæ˜¯åŒæ­¥ç¨‹åºï¼Œåä¹‹åˆ™ä¸ºå¼‚æ­¥ç¨‹åºã€‚ï¼ˆæ— åºä¸æœ‰åºçš„åŒºåˆ«ï¼‰</p><p>åŒæ­¥/å¼‚æ­¥ã€é˜»å¡/éé˜»å¡å¹¶éæ°´ç«ä¸å®¹ï¼Œè¦çœ‹è®¨è®ºçš„ç¨‹åºæ‰€å¤„çš„å°è£…çº§åˆ«ã€‚ä¾‹å¦‚è´­ç‰©ç¨‹åºåœ¨å¤„ç†å¤šä¸ªç”¨æˆ·çš„æµè§ˆè¯·æ±‚å¯ä»¥æ˜¯å¼‚æ­¥çš„ï¼Œè€Œæ›´æ–°åº“å­˜æ—¶å¿…é¡»æ˜¯åŒæ­¥çš„ã€‚</p><h3 id="_1-9-å¼‚æ­¥ä¹‹nan" tabindex="-1"><a class="header-anchor" href="#_1-9-å¼‚æ­¥ä¹‹nan" aria-hidden="true">#</a> 1.9 å¼‚æ­¥ä¹‹<code>nÃ¡n</code></h3><p>æ§åˆ¶ä¸ä½â€œå¯„å‡ â€å†™çš„ç¨‹åºï¼Œå› ä¸ºå…¶æ‰§è¡Œé¡ºåºä¸å¯é¢„æ–™ï¼Œå½“ä¸‹æ­£è¦å‘ç”Ÿä»€ä¹ˆäº‹ä»¶ä¸å¯é¢„æ–™ã€‚åœ¨å¹¶è¡Œæƒ…å†µä¸‹æ›´ä¸ºå¤æ‚å’Œè‰°éš¾ã€‚</p><p>æ‰€ä»¥ï¼Œå‡ ä¹æ‰€æœ‰çš„å¼‚æ­¥æ¡†æ¶éƒ½å°†å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ç®€åŒ–ï¼šä¸€æ¬¡åªå…è®¸å¤„ç†ä¸€ä¸ªäº‹ä»¶ã€‚æ•…è€Œæœ‰å…³å¼‚æ­¥çš„è®¨è®ºå‡ ä¹éƒ½é›†ä¸­åœ¨äº†å•çº¿ç¨‹å†…ã€‚</p><p>å¦‚æœæŸäº‹ä»¶å¤„ç†ç¨‹åºéœ€è¦é•¿æ—¶é—´æ‰§è¡Œï¼Œæ‰€æœ‰å…¶ä»–éƒ¨åˆ†éƒ½ä¼šè¢«é˜»å¡ã€‚</p><p>æ‰€ä»¥ï¼Œä¸€æ—¦é‡‡å–å¼‚æ­¥ç¼–ç¨‹ï¼Œæ¯ä¸ªå¼‚æ­¥è°ƒç”¨å¿…é¡»â€œè¶³å¤Ÿå°â€ï¼Œä¸èƒ½è€—æ—¶å¤ªä¹…ã€‚å¦‚ä½•æ‹†åˆ†å¼‚æ­¥ä»»åŠ¡æˆäº†éš¾é¢˜ã€‚</p><p>ç¨‹åºä¸‹ä¸€æ­¥è¡Œä¸ºå¾€å¾€ä¾èµ–ä¸Šä¸€æ­¥æ‰§è¡Œç»“æœï¼Œå¦‚ä½•çŸ¥æ™“ä¸Šæ¬¡å¼‚æ­¥è°ƒç”¨å·²å®Œæˆå¹¶è·å–ç»“æœï¼Ÿ</p><p>å›è°ƒï¼ˆCallbackï¼‰æˆäº†å¿…ç„¶é€‰æ‹©ã€‚é‚£åˆéœ€è¦é¢ä¸´â€œå›è°ƒåœ°ç‹±â€çš„æŠ˜ç£¨ã€‚</p><p>åŒæ­¥ä»£ç æ”¹ä¸ºå¼‚æ­¥ä»£ç ï¼Œå¿…ç„¶ç ´åä»£ç ç»“æ„ã€‚</p><p>è§£å†³é—®é¢˜çš„é€»è¾‘ä¹Ÿè¦è½¬å˜ï¼Œä¸å†æ˜¯ä¸€æ¡è·¯èµ°åˆ°é»‘ï¼Œéœ€è¦ç²¾å¿ƒå®‰æ’å¼‚æ­¥ä»»åŠ¡ã€‚</p><h2 id="_2-è‹¦å¿ƒå¼‚æ­¥ä¸ºå“ªèˆ¬" tabindex="-1"><a class="header-anchor" href="#_2-è‹¦å¿ƒå¼‚æ­¥ä¸ºå“ªèˆ¬" aria-hidden="true">#</a> 2 è‹¦å¿ƒå¼‚æ­¥ä¸ºå“ªèˆ¬</h2><p>å¦‚ä¸Šæ–‡æ‰€è¿°ï¼Œå¼‚æ­¥ç¼–ç¨‹é¢ä¸´è¯¸å¤šéš¾ç‚¹ï¼ŒPython ä¹‹çˆ¶äº²è‡ªä¸Šé˜µæ‰“ç£¨ 4 å¹´æ‰ä½¿ asyncio æ¨¡å—åœ¨ Python 3.6 ä¸­â€œè½¬æ­£â€ï¼Œå¦‚æ­¤è‹¦å¿ƒä¸ºä»€ä¹ˆï¼Ÿç­”æ¡ˆåªæœ‰ä¸€ä¸ªï¼š å®ƒå€¼å¾—ï¼ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹ä¸ºä½•è€Œå€¼å¾—ã€‚</p><h3 id="_2-1-cpu-çš„æ—¶é—´è§‚" tabindex="-1"><a class="header-anchor" href="#_2-1-cpu-çš„æ—¶é—´è§‚" aria-hidden="true">#</a> 2.1 CPU çš„æ—¶é—´è§‚</h3><p>æˆ‘ä»¬å°†ä¸€ä¸ª 2.6GHz çš„ CPU æ‹ŸäººåŒ–ï¼Œå‡è®¾å®ƒæ‰§è¡Œä¸€æ¡å‘½ä»¤çš„æ—¶é—´ï¼Œä»–å®ƒæ„Ÿè§‰ä¸Šè¿‡äº†ä¸€ç§’é’Ÿã€‚CPU æ˜¯è®¡ç®—æœºçš„å¤„ç†æ ¸å¿ƒï¼Œä¹Ÿæ˜¯æœ€å®è´µçš„èµ„æºï¼Œå¦‚æœæœ‰ æµªè´¹ CPU çš„è¿è¡Œæ—¶é—´ï¼Œå¯¼è‡´å…¶åˆ©ç”¨ç‡ä¸è¶³ï¼Œé‚£ç¨‹åºæ•ˆç‡å¿…ç„¶ä½ä¸‹ï¼ˆå› ä¸ºå®é™…ä¸Šæœ‰èµ„æºå¯ä»¥ä½¿æ•ˆç‡æ›´é«˜ï¼‰ã€‚</p><pre><code>CPUçš„æ—¶é—´è§‚ï¼š
    æ“ä½œ          çœŸå®å»¶è¿Ÿ            CPUçš„æ„Ÿè§‰
    æ‰§æŒ‡          0.38çº³ç§’               1ç§’
   å†…å­˜å¯»å€        100çº³ç§’             4åˆ†20ç§’
ä¸Šä¸‹æ–‡åˆ‡æ¢/ç³»ç»Ÿè°ƒç”¨ 1.5å¾®å¦™             1å°æ—¶5åˆ†é’Ÿ
Pingé€šIDCä¸¤å°ä¸»æœº  0.5æ¯«ç§’               15å¤©
ç¡¬ç›˜è¯»å–1Mè¿ç»­æ•°æ®  20æ¯«ç§’               20ä¸ªæœˆ
pingé€šä¸åŒåŸå¸‚ä¸»æœº  150æ¯«ç§’              12.5å¹´
  è™šæ‹Ÿæœºé‡å¯         4ç§’                 200å¹´
  æœåŠ¡å™¨é‡å¯        5åˆ†é’Ÿ                2ä¸‡5åƒå¹´
</code></pre><p>å¦‚ä¸Šæ–‡æ‰€ç¤ºï¼Œåœ¨åƒå…†ç½‘ä¸Šä¼ è¾“ 2KB æ•°æ®ï¼ŒCPU æ„Ÿè§‰è¿‡äº† 14 ä¸ªå°æ—¶ï¼Œå¦‚æœæ˜¯åœ¨ 10M çš„å…¬ç½‘ä¸Šå‘¢ï¼Ÿé‚£æ•ˆç‡ä¼šä½ç™¾å€ï¼å¦‚æœåœ¨è¿™ä¹ˆé•¿çš„ä¸€æ®µæ—¶é—´å†…ï¼ŒCPU åªæ˜¯å‚» ç­‰ç»“æœè€Œä¸èƒ½å»å¹²å…¶ä»–äº‹æƒ…ï¼Œæ˜¯ä¸æ˜¯åœ¨æµªè´¹ CPU çš„é’æ˜¥ï¼Ÿ</p><p>é²è¿…è¯´ï¼Œæµªè´¹â€œCPUâ€çš„æ—¶é—´ç­‰äºè°‹è´¢å®³å‘½ã€‚è€Œå‡¶æ‰‹å°±æ˜¯ç¨‹åºçŒ¿ã€‚</p><h3 id="_2-2-é¢ä¸´çš„é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_2-2-é¢ä¸´çš„é—®é¢˜" aria-hidden="true">#</a> 2.2 é¢ä¸´çš„é—®é¢˜</h3><ul><li><p>æˆæœ¬é—®é¢˜:</p><pre><code>  å¦‚æœä¸€ä¸ªç¨‹åºä¸èƒ½æœ‰æ•ˆåˆ©ç”¨ä¸€å°è®¡ç®—æœºèµ„æºï¼Œé‚£å¿…ç„¶éœ€è¦æ›´å¤šçš„è®¡ç®—æœºé€šè¿‡è¿è¡Œæ›´å¤šçš„ç¨‹åºå®ä¾‹æ¥å¼¥è¡¥éœ€æ±‚ç¼ºå£ã€‚ä¾‹å¦‚æˆ‘å‰ä¸ä¹…ä¸»å¯¼é‡å†™
  çš„é¡¹ç›®ï¼Œä½¿ç”¨Pythonå¼‚æ­¥ç¼–ç¨‹ï¼Œæ”¹ç‰ˆåç”±åŸæ¥çš„7å°æœåŠ¡å™¨å‰Šå‡è‡³3å°ï¼Œæˆæœ¬éª¤é™57%ã€‚ä¸€å°AWS m4.xlarge å‹é€šç”¨æœåŠ¡å™¨æŒ‰éœ€ä»˜è´¹å®ä¾‹
  ä¸€å¹´ä»·æ ¼çº¦ 1.2 ä¸‡äººæ°‘å¸ã€‚
</code></pre></li><li><p>æ•ˆç‡é—®é¢˜:</p><pre><code>  å¦‚æœä¸åœ¨ä¹é’±çš„æ¶ˆè€—ï¼Œé‚£ä¹Ÿä¼šåœ¨æ„æ•ˆç‡é—®é¢˜ã€‚å½“æœåŠ¡å™¨æ•°é‡å †å åˆ°ä¸€å®šè§„æ¨¡åï¼Œå¦‚æœä¸æ”¹è¿›è½¯ä»¶æ¶æ„å’Œå®ç°ï¼ŒåŠ æœºå™¨æ˜¯å¾’åŠ³ï¼Œè€Œä¸”è¿ç»´æˆæœ¬
  ä¼šéª¤ç„¶å¢åŠ ã€‚æ¯”å¦‚åˆ«äººå®¶çš„ç”µå•†å¹³å°æ”¯æŒ6000å•/ç§’æ”¯ä»˜ï¼Œè€Œè‡ªå®¶åœ¨ä¸‹å•é‡æ‰æ”¯æ’‘2000å•/ç§’ï¼Œåœ¨åŒåä¸€è¿™ç§æ´»åŠ¨çš„æ—¶å€™ï¼Œé’±é€ä¸Šé—¨ä¹Ÿèµšä¸åˆ°ã€‚
</code></pre></li><li><p>C10k/C10M æŒ‘æˆ˜</p><pre><code>  C10kï¼ˆconcurrently handling 10k connectionsï¼‰æ˜¯ä¸€ä¸ªåœ¨1999å¹´è¢«æå‡ºæ¥çš„æŠ€æœ¯æŒ‘æˆ˜ï¼Œå¦‚ä½•åœ¨ä¸€é¢—1GHz CPUï¼Œ2Gå†…å­˜ï¼Œ1gbpsç½‘ç»œ
  ç¯å¢ƒä¸‹ï¼Œè®©å•å°æœåŠ¡å™¨åŒæ—¶ä¸º1ä¸‡ä¸ªå®¢æˆ·ç«¯æä¾›FTPæœåŠ¡ã€‚è€Œåˆ°äº†2010å¹´åï¼Œéšç€ç¡¬ä»¶æŠ€æœ¯çš„å‘å±•ï¼Œè¿™ä¸ªé—®é¢˜è¢«å»¶ä¼¸ä¸ºC10Mï¼Œå³å¦‚ä½•åˆ©ç”¨8æ ¸
  å¿ƒCPUï¼Œ64Gå†…å­˜ï¼Œåœ¨10gbpsçš„ç½‘ç»œä¸Šä¿æŒ1000ä¸‡å¹¶å‘è¿æ¥ï¼Œæˆ–æ˜¯æ¯ç§’é’Ÿå¤„ç†100ä¸‡çš„è¿æ¥ã€‚ï¼ˆä¸¤ç§ç±»å‹çš„è®¡ç®—æœºèµ„æºåœ¨å„è‡ªçš„æ—¶ä»£éƒ½çº¦ä¸º
  1200ç¾å…ƒï¼‰
</code></pre></li></ul><p>æˆæœ¬å’Œæ•ˆç‡é—®é¢˜æ˜¯ä»ä¼ä¸šç»è¥è§’åº¦è®²ï¼ŒC10k/C10M é—®é¢˜åˆ™æ˜¯ä»æŠ€æœ¯è§’åº¦å‡ºå‘æŒ‘æˆ˜è½¯ç¡¬ä»¶æé™ã€‚C10k/C10M é—®é¢˜å¾—è§£ï¼Œæˆæœ¬é—®é¢˜å’Œæ•ˆç‡é—®é¢˜è¿åˆƒè€Œè§£ã€‚</p><h3 id="_2-3-è§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_2-3-è§£å†³æ–¹æ¡ˆ" aria-hidden="true">#</a> 2.3 è§£å†³æ–¹æ¡ˆ</h3><p>ã€Šçº¦æŸç†è®ºä¸ä¼ä¸šä¼˜åŒ–ã€‹ä¸­æŒ‡å‡ºï¼šâ€œé™¤äº†ç“¶é¢ˆä¹‹å¤–ï¼Œä»»ä½•æ”¹è¿›éƒ½æ˜¯å¹»è§‰ã€‚â€</p><p>CPU å‘Šè¯‰æˆ‘ä»¬ï¼Œå®ƒè‡ªå·±å¾ˆå¿«ï¼Œè€Œä¸Šä¸‹æ–‡åˆ‡æ¢æ…¢ã€å†…å­˜è¯»æ•°æ®æ…¢ã€ç£ç›˜å¯»å€ä¸å–æ•°æ®æ…¢ã€ç½‘ç»œä¼ è¾“æ…¢â€¦â€¦æ€»ä¹‹ï¼Œç¦»å¼€ CPU åçš„ä¸€åˆ‡ï¼Œé™¤äº†ä¸€çº§é«˜é€Ÿç¼“å­˜ï¼Œéƒ½å¾ˆæ…¢ã€‚æˆ‘ä»¬è§‚å¯Ÿè®¡ç®—æœºçš„ç»„æˆå¯ä»¥çŸ¥é“ï¼Œä¸»è¦ç”±è¿ç®—å™¨ã€æ§åˆ¶å™¨ã€å­˜å‚¨å™¨ã€è¾“å…¥è®¾å¤‡ã€è¾“å‡ºè®¾å¤‡äº”éƒ¨åˆ†ç»„æˆã€‚è¿ç®—å™¨å’Œæ§åˆ¶å™¨ä¸»è¦é›†æˆåœ¨ CPU ä¸­ï¼Œé™¤æ­¤ä¹‹å¤–å…¨æ˜¯ I/Oï¼ŒåŒ…æ‹¬è¯»å†™å†…å­˜ã€è¯»å†™ç£ç›˜ã€è¯»å†™ç½‘å¡å…¨éƒ½æ˜¯ I/Oã€‚I/O æˆäº†æœ€å¤§çš„ç“¶é¢ˆã€‚</p><p>å¼‚æ­¥ç¨‹åºå¯ä»¥æé«˜æ•ˆç‡ï¼Œè€Œæœ€å¤§çš„ç“¶é¢ˆåœ¨ I/Oï¼Œä¸šç•Œè¯ç”Ÿçš„è§£å†³æ–¹æ¡ˆæ²¡å‡ºæ„æ–™ï¼šå¼‚æ­¥ I/O å§ï¼Œå¼‚æ­¥ I/O å§ï¼Œå¼‚æ­¥ I/O å§å§ï¼</p><h2 id="_3-å¼‚æ­¥-i-o-è¿›åŒ–ä¹‹è·¯" tabindex="-1"><a class="header-anchor" href="#_3-å¼‚æ­¥-i-o-è¿›åŒ–ä¹‹è·¯" aria-hidden="true">#</a> 3 å¼‚æ­¥ I/O è¿›åŒ–ä¹‹è·¯</h2><p>å¦‚ä»Šï¼Œåœ°çƒä¸Šæœ€å‘è¾¾ã€è§„æ¨¡æœ€åºå¤§çš„è®¡ç®—æœºç¨‹åºï¼Œè«è¿‡äºå› ç‰¹ç½‘ã€‚è€Œä» CPU çš„æ—¶é—´è§‚ä¸­å¯çŸ¥ï¼Œç½‘ç»œ I/O æ˜¯æœ€å¤§çš„ I/O ç“¶é¢ˆï¼Œé™¤äº†å®•æœºæ²¡æœ‰æ¯”å®ƒæ›´æ…¢çš„ ã€‚æ‰€ä»¥ï¼Œè¯¸å¤šå¼‚æ­¥æ¡†æ¶éƒ½å¯¹å‡†çš„æ˜¯ç½‘ç»œ I/Oã€‚</p><p>æˆ‘ä»¬ä»ä¸€ä¸ªçˆ¬è™«ä¾‹å­è¯´èµ·ï¼Œä»å› ç‰¹ç½‘ä¸Šä¸‹è½½ 10 ç¯‡ç½‘é¡µã€‚</p><h3 id="_3-1-åŒæ­¥é˜»å¡æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_3-1-åŒæ­¥é˜»å¡æ–¹å¼" aria-hidden="true">#</a> 3.1 åŒæ­¥é˜»å¡æ–¹å¼</h3><p>æœ€å®¹æ˜“æƒ³åˆ°çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯ä¾æ¬¡ä¸‹è½½ï¼Œä»å»ºç«‹ socket è¿æ¥åˆ°å‘é€ç½‘ç»œè¯·æ±‚å†åˆ°è¯»å–å“åº”æ•°æ®ï¼Œé¡ºåºè¿›è¡Œã€‚</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> socket


<span class="token keyword">def</span> <span class="token function">blocking_way</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    sock <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># blocking</span>
    sock<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;example.com&quot;</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    request <span class="token operator">=</span> <span class="token string">&quot;GET HTTP:1.0/\r\n Host: example.com\r\n\r\n&quot;</span>
    sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span>request<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">&quot;ascii&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    response <span class="token operator">=</span> <span class="token string">b&#39;&#39;</span>
    chunk <span class="token operator">=</span> sock<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">4096</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span>
    <span class="token keyword">while</span> chunk<span class="token punctuation">:</span>
        response <span class="token operator">+=</span> chunk
        <span class="token comment"># blocking</span>
        chunk <span class="token operator">=</span> sock<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">4096</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> response


<span class="token keyword">def</span> <span class="token function">sync_way</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>blocking_way<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> time

    start <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>
    sync_way<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>[æ³¨]ï¼šæ€»ä½“è€—æ—¶çº¦ä¸º 4.5 ç§’ã€‚ï¼ˆå› ç½‘ç»œæ³¢åŠ¨æ¯æ¬¡æµ‹è¯•ç»“æœæœ‰æ‰€å˜åŠ¨ï¼Œæœ¬æ–‡å–å¤šæ¬¡å¹³å‡å€¼ï¼‰</p><p>å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œblocking_way() çš„ä½œç”¨æ˜¯å»ºç«‹ socket è¿æ¥ï¼Œå‘é€ HTTP è¯·æ±‚ï¼Œç„¶åä» socket è¯»å– HTTP å“åº”å¹¶è¿”å›æ•°æ®ã€‚ç¤ºä¾‹ä¸­æˆ‘ä»¬è¯·æ±‚äº† <a href="http://example.com" target="_blank" rel="noopener noreferrer">example.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> çš„é¦–é¡µã€‚åœ¨ sync_way() æ‰§è¡Œäº† 10 æ¬¡ï¼Œå³ä¸‹è½½ <a href="http://example.com" target="_blank" rel="noopener noreferrer">example.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> é¦–é¡µ 10 æ¬¡ã€‚</p><p>åœ¨ç¤ºä¾‹ä»£ç ä¸­æœ‰ä¸¤ä¸ªå…³é”®ç‚¹ã€‚ä¸€æ˜¯ç¬¬ 10 è¡Œçš„ sock.connect((â€˜<a href="http://example.com" target="_blank" rel="noopener noreferrer">example.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>â€™, 80))ï¼Œè¯¥è°ƒç”¨çš„ä½œç”¨æ˜¯å‘ <a href="http://example.com" target="_blank" rel="noopener noreferrer">example.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ä¸»æœºçš„ 80 ç«¯å£å‘èµ·ç½‘ç»œè¿æ¥ è¯·æ±‚ã€‚ äºŒæ˜¯ç¬¬ 14 è¡Œã€ç¬¬ 18 è¡Œçš„ sock.recv(4096)ï¼Œè¯¥è°ƒç”¨çš„ä½œç”¨æ˜¯ä» socket ä¸Šè¯»å– 4K å­—èŠ‚æ•°æ®ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œåˆ›å»ºç½‘ç»œè¿æ¥ï¼Œå¤šä¹…èƒ½åˆ›å»ºå®Œæˆä¸æ˜¯å®¢æˆ·ç«¯å†³å®šçš„ï¼Œè€Œæ˜¯ç”±ç½‘ç»œçŠ¶å†µå’ŒæœåŠ¡ç«¯å¤„ç†èƒ½åŠ›å…±åŒå†³å®šã€‚æœåŠ¡ç«¯ä»€ä¹ˆæ—¶å€™è¿”å›äº†å“åº”æ•°æ®å¹¶è¢«å®¢æˆ· ç«¯æ¥æ”¶åˆ°å¯ä¾›ç¨‹åºè¯»å–ï¼Œä¹Ÿæ˜¯ä¸å¯é¢„æµ‹çš„ã€‚æ‰€ä»¥ sock.connect()å’Œ sock.recv()è¿™ä¸¤ä¸ªè°ƒç”¨åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯é˜»å¡çš„ã€‚</p><p>[æ³¨]ï¼šsock.send()å‡½æ•°å¹¶ä¸ä¼šé˜»å¡å¤ªä¹…ï¼Œå®ƒåªè´Ÿè´£å°†è¯·æ±‚æ•°æ®æ‹·è´åˆ° TCP/IP åè®®æ ˆçš„ç³»ç»Ÿç¼“å†²åŒºä¸­å°±è¿”å›ï¼Œå¹¶ä¸ç­‰å¾…æœåŠ¡ç«¯è¿”å›çš„åº”ç­”ç¡®è®¤ã€‚</p><p>å‡è®¾ç½‘ç»œç¯å¢ƒå¾ˆå·®ï¼Œåˆ›å»ºç½‘ç»œè¿æ¥éœ€è¦ 1 ç§’é’Ÿï¼Œé‚£ä¹ˆ sock.connect()å°±å¾—é˜»å¡ 1 ç§’é’Ÿï¼Œç­‰å¾…ç½‘ç»œè¿æ¥æˆåŠŸã€‚è¿™ 1 ç§’é’Ÿå¯¹ä¸€é¢— 2.6GHz çš„ CPU æ¥è®²ï¼Œä»¿ä½›è¿‡å» äº† 83 å¹´ï¼Œç„¶è€Œå®ƒä¸èƒ½å¹²ä»»ä½•äº‹æƒ…ã€‚sock.recv()ä¹Ÿæ˜¯ä¸€æ ·çš„å¿…é¡»å¾—ç­‰åˆ°æœåŠ¡ç«¯çš„å“åº”æ•°æ®å·²ç»è¢«å®¢æˆ·ç«¯æ¥æ”¶ã€‚æˆ‘ä»¬ä¸‹è½½ 10 ç¯‡ç½‘é¡µï¼Œè¿™ä¸ªé˜»å¡è¿‡ç¨‹å°±å¾— é‡å¤ 10 æ¬¡ã€‚å¦‚æœä¸€ä¸ªçˆ¬è™«ç³»ç»Ÿæ¯å¤©è¦ä¸‹è½½ 1000 ä¸‡ç¯‡ç½‘é¡µå‘¢ï¼Ÿï¼</p><p>ä¸Šé¢è¯´äº†å¾ˆå¤šï¼Œæˆ‘ä»¬åŠ›å›¾è¯´æ˜ä¸€ä»¶äº‹ï¼šåŒæ­¥é˜»å¡çš„ç½‘ç»œäº¤äº’æ–¹å¼ï¼Œæ•ˆç‡ä½ååˆ†ä½ä¸‹ã€‚ç‰¹åˆ«æ˜¯åœ¨ç½‘ç»œäº¤äº’é¢‘ç¹çš„ç¨‹åºä¸­ã€‚è¿™ç§æ–¹å¼æ ¹æœ¬ä¸å¯èƒ½æŒ‘ æˆ˜ C10K/C10Mã€‚</p><h3 id="_3-2-æ”¹è¿›æ–¹å¼-å¤šè¿›ç¨‹" tabindex="-1"><a class="header-anchor" href="#_3-2-æ”¹è¿›æ–¹å¼-å¤šè¿›ç¨‹" aria-hidden="true">#</a> 3.2 æ”¹è¿›æ–¹å¼ï¼šå¤šè¿›ç¨‹</h3><p>åœ¨ä¸€ä¸ªç¨‹åºå†…ï¼Œä¾æ¬¡æ‰§è¡Œ 10 æ¬¡å¤ªè€—æ—¶ï¼Œé‚£å¼€ 10 ä¸ªä¸€æ ·çš„ç¨‹åºåŒæ—¶æ‰§è¡Œä¸å°±è¡Œäº†ã€‚äºæ˜¯æˆ‘ä»¬æƒ³åˆ°äº†å¤šè¿›ç¨‹ç¼–ç¨‹ã€‚ä¸ºä»€ä¹ˆä¼šå…ˆæƒ³åˆ°å¤šè¿›ç¨‹å‘¢ï¼Ÿå‘å±•è„‰ç»œ å¦‚æ­¤ã€‚åœ¨æ›´æ—©çš„æ“ä½œç³»ç»Ÿï¼ˆLinux 2.4ï¼‰åŠå…¶ä»¥å‰ï¼Œè¿›ç¨‹æ˜¯ OS è°ƒåº¦ä»»åŠ¡çš„å®ä½“ï¼Œæ˜¯é¢å‘è¿›ç¨‹è®¾è®¡çš„ OSã€‚</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> socket

<span class="token keyword">from</span> concurrent <span class="token keyword">import</span> futures


<span class="token keyword">def</span> <span class="token function">blocking_way</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    sock <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># blocking</span>
    sock<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;example.com&quot;</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    request <span class="token operator">=</span> <span class="token string">&quot;GET HTTP:1.0/\r\n Host: example.com\r\n\r\n&quot;</span>
    sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span>request<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">&quot;ascii&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    response <span class="token operator">=</span> <span class="token string">b&#39;&#39;</span>
    chunk <span class="token operator">=</span> sock<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">4096</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span>
    <span class="token keyword">while</span> chunk<span class="token punctuation">:</span>
        response <span class="token operator">+=</span> chunk
        <span class="token comment"># blocking</span>
        chunk <span class="token operator">=</span> sock<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">4096</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> response


<span class="token keyword">def</span> <span class="token function">process_way</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    workers <span class="token operator">=</span> <span class="token number">10</span>
    <span class="token keyword">with</span> futures<span class="token punctuation">.</span>ProcessPoolExecutor<span class="token punctuation">(</span>workers<span class="token punctuation">)</span> <span class="token keyword">as</span> executor<span class="token punctuation">:</span>
        futs <span class="token operator">=</span> <span class="token punctuation">{</span>executor<span class="token punctuation">.</span>submit<span class="token punctuation">(</span>blocking_way<span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token punctuation">[</span>fut<span class="token punctuation">.</span>result<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> fut <span class="token keyword">in</span> futs<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>[æ³¨]ï¼šæ€»ä½“è€—æ—¶çº¦ä¸º 0.6 ç§’ã€‚(è‡ªæµ‹ï¼Œwindows ä¸‹å¹¶æ²¡æœ‰ï¼Œä¹Ÿè¦ 2~3s)</p><p>æ”¹å–„æ•ˆæœç«‹ç«¿è§å½±ã€‚ä½†ä»ç„¶æœ‰é—®é¢˜ã€‚æ€»ä½“è€—æ—¶å¹¶æ²¡æœ‰ç¼©å‡åˆ°åŸæ¥çš„ååˆ†ä¹‹ä¸€ï¼Œè€Œæ˜¯ä¹åˆ†ä¹‹ä¸€å·¦å³ï¼Œè¿˜æœ‰ä¸€äº›æ—¶é—´è€—åˆ°å“ªé‡Œå»äº†ï¼Ÿè¿›ç¨‹åˆ‡æ¢å¼€é”€ã€‚</p><p>è¿›ç¨‹åˆ‡æ¢å¼€é”€ä¸æ­¢åƒâ€œCPU çš„æ—¶é—´è§‚â€æ‰€åˆ—çš„â€œä¸Šä¸‹æ–‡åˆ‡æ¢â€é‚£ä¹ˆä½ã€‚CPU ä»ä¸€ä¸ªè¿›ç¨‹åˆ‡æ¢åˆ°å¦ä¸€ä¸ªè¿›ç¨‹ï¼Œéœ€è¦æŠŠæ—§è¿›ç¨‹è¿è¡Œæ—¶çš„å¯„å­˜å™¨çŠ¶æ€ã€å†…å­˜çŠ¶æ€å…¨éƒ¨ ä¿å­˜å¥½ï¼Œå†å°†å¦ä¸€ä¸ªè¿›ç¨‹ä¹‹å‰ä¿å­˜çš„æ•°æ®æ¢å¤ã€‚å¯¹ CPU æ¥è®²ï¼Œå‡ ä¸ªå°æ—¶å°±å¹²ç­‰ç€ã€‚å½“è¿›ç¨‹æ•°é‡å¤§äº CPU æ ¸å¿ƒæ•°é‡æ—¶ï¼Œè¿›ç¨‹åˆ‡æ¢æ˜¯å¿…ç„¶éœ€è¦çš„ã€‚</p><p>é™¤äº†åˆ‡æ¢å¼€é”€ï¼Œå¤šè¿›ç¨‹è¿˜æœ‰å¦å¤–çš„ç¼ºç‚¹ã€‚ä¸€èˆ¬çš„æœåŠ¡å™¨åœ¨èƒ½å¤Ÿç¨³å®šè¿è¡Œçš„å‰æä¸‹ï¼Œå¯ä»¥åŒæ—¶å¤„ç†çš„è¿›ç¨‹æ•°åœ¨æ•°åä¸ªåˆ°æ•°ç™¾ä¸ªè§„æ¨¡ã€‚å¦‚æœè¿›ç¨‹æ•°é‡è§„æ¨¡ æ›´å¤§ï¼Œç³»ç»Ÿè¿è¡Œå°†ä¸ç¨³å®šï¼Œè€Œä¸”å¯ç”¨å†…å­˜èµ„æºå¾€å¾€ä¹Ÿä¼šä¸è¶³ã€‚</p><p>å¤šè¿›ç¨‹è§£å†³æ–¹æ¡ˆåœ¨é¢ä¸´æ¯å¤©éœ€è¦æˆç™¾ä¸Šåƒä¸‡æ¬¡ä¸‹è½½ä»»åŠ¡çš„çˆ¬è™«ç³»ç»Ÿï¼Œæˆ–è€…éœ€è¦åŒæ—¶æå®šæ•°ä¸‡å¹¶å‘çš„ç”µå•†ç³»ç»Ÿæ¥è¯´ï¼Œå¹¶ä¸é€‚åˆã€‚</p><p>é™¤äº†åˆ‡æ¢å¼€é”€å¤§ï¼Œä»¥åŠå¯æ”¯æŒçš„ä»»åŠ¡è§„æ¨¡å°ä¹‹å¤–ï¼Œå¤šè¿›ç¨‹è¿˜æœ‰å…¶ä»–ç¼ºç‚¹ï¼Œå¦‚çŠ¶æ€å…±äº«ç­‰é—®é¢˜ï¼Œåæ–‡ä¼šæœ‰æåŠï¼Œæ­¤å¤„ä¸å†ç»†ç©¶ã€‚</p><h3 id="_3-3-ç»§ç»­æ”¹è¿›-å¤šçº¿ç¨‹" tabindex="-1"><a class="header-anchor" href="#_3-3-ç»§ç»­æ”¹è¿›-å¤šçº¿ç¨‹" aria-hidden="true">#</a> 3.3 ç»§ç»­æ”¹è¿›ï¼šå¤šçº¿ç¨‹</h3><p>ç”±äºçº¿ç¨‹çš„æ•°æ®ç»“æ„æ¯”è¿›ç¨‹æ›´è½»é‡çº§ï¼ŒåŒä¸€ä¸ªè¿›ç¨‹å¯ä»¥å®¹çº³å¤šä¸ªçº¿ç¨‹ï¼Œä»è¿›ç¨‹åˆ°çº¿ç¨‹çš„ä¼˜åŒ–ç”±æ­¤å±•å¼€ã€‚åæ¥çš„ OS ä¹ŸæŠŠè°ƒåº¦å•ä½ç”±è¿›ç¨‹è½¬ä¸ºçº¿ç¨‹ï¼Œè¿› ç¨‹åªä½œä¸ºçº¿ç¨‹çš„å®¹å™¨ï¼Œç”¨äºç®¡ç†è¿›ç¨‹æ‰€éœ€çš„èµ„æºã€‚è€Œä¸” OS çº§åˆ«çš„çº¿ç¨‹æ˜¯å¯ä»¥è¢«åˆ†é…åˆ°ä¸åŒçš„ CPU æ ¸å¿ƒåŒæ—¶è¿è¡Œçš„ã€‚</p><pre><code>def thread_way():
    workers = 10
    with futures.ThreadPoolExecutor(workers) as executor:
        futs = {executor.submit(blocking_way) for i in range(10)}
    return len([fut.result() for fut in futs])
</code></pre><p>[æ³¨]ï¼šæ€»ä½“è¿è¡Œæ—¶é—´çº¦ 0.43 ç§’ã€‚(æˆ‘æ‰¿è®¤ï¼Œæ˜¯å¿«äº†ä¸å°‘)</p><p>ç»“æœç¬¦åˆé¢„æœŸï¼Œæ¯”å¤šè¿›ç¨‹è€—æ—¶è¦å°‘äº›ã€‚ä»è¿è¡Œæ—¶é—´ä¸Šçœ‹ï¼Œå¤šçº¿ç¨‹ä¼¼ä¹å·²ç»è§£å†³äº†åˆ‡æ¢å¼€é”€å¤§çš„é—®é¢˜ã€‚è€Œä¸”å¯æ”¯æŒçš„ä»»åŠ¡æ•°é‡è§„æ¨¡ï¼Œä¹Ÿå˜æˆäº†æ•°ç™¾ä¸ªåˆ°æ•°åƒä¸ªã€‚</p><p>ä½†æ˜¯ï¼Œå¤šçº¿ç¨‹ä»æœ‰é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯ Python é‡Œçš„å¤šçº¿ç¨‹ã€‚é¦–å…ˆï¼ŒPython ä¸­çš„å¤šçº¿ç¨‹å› ä¸º GIL çš„å­˜åœ¨ï¼Œå®ƒä»¬å¹¶ä¸èƒ½åˆ©ç”¨ CPU å¤šæ ¸ä¼˜åŠ¿ï¼Œä¸€ä¸ª Python è¿›ç¨‹ä¸­ï¼Œ åªå…è®¸æœ‰ä¸€ä¸ªçº¿ç¨‹å¤„äºè¿è¡ŒçŠ¶æ€ã€‚é‚£ä¸ºä»€ä¹ˆç»“æœè¿˜æ˜¯å¦‚é¢„æœŸï¼Œè€—æ—¶ç¼©å‡åˆ°äº†ååˆ†ä¹‹ä¸€ï¼Ÿ</p><p>å› ä¸ºåœ¨åšé˜»å¡çš„ç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œä¾‹å¦‚ sock.connect(),sock.recv()æ—¶ï¼Œå½“å‰çº¿ç¨‹ä¼šé‡Šæ”¾ GILï¼Œè®©åˆ«çš„çº¿ç¨‹æœ‰æ‰§è¡Œæœºä¼šã€‚ä½†æ˜¯å•ä¸ªçº¿ç¨‹å†…ï¼Œåœ¨é˜»å¡è°ƒç”¨ä¸Š è¿˜æ˜¯é˜»å¡çš„ã€‚</p><p>å°æç¤ºï¼šPython ä¸­ time.sleep æ˜¯é˜»å¡çš„ï¼Œéƒ½çŸ¥é“ä½¿ç”¨å®ƒè¦è°¨æ…ï¼Œä½†åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œtime.sleep å¹¶ä¸ä¼šé˜»å¡å…¶ä»–çº¿ç¨‹ã€‚</p><p>é™¤äº† GIL ä¹‹å¤–ï¼Œæ‰€æœ‰çš„å¤šçº¿ç¨‹è¿˜æœ‰é€šç—…ã€‚å®ƒä»¬æ˜¯è¢« OS è°ƒåº¦ï¼Œè°ƒåº¦ç­–ç•¥æ˜¯æŠ¢å å¼çš„ï¼Œä»¥ä¿è¯åŒç­‰ä¼˜å…ˆçº§çš„çº¿ç¨‹éƒ½æœ‰å‡ç­‰çš„æ‰§è¡Œæœºä¼šï¼Œé‚£å¸¦æ¥çš„é—®é¢˜æ˜¯ï¼šå¹¶ ä¸çŸ¥é“ä¸‹ä¸€æ—¶åˆ»æ˜¯å“ªä¸ªçº¿ç¨‹è¢«è¿è¡Œï¼Œä¹Ÿä¸çŸ¥é“å®ƒæ­£è¦æ‰§è¡Œçš„ä»£ç æ˜¯ä»€ä¹ˆã€‚æ‰€ä»¥å°±å¯èƒ½å­˜åœ¨ç«æ€æ¡ä»¶ã€‚</p><p>ä¾‹å¦‚çˆ¬è™«å·¥ä½œçº¿ç¨‹ä»ä»»åŠ¡é˜Ÿåˆ—æ‹¿å¾…æŠ“å– URL çš„æ—¶å€™ï¼Œå¦‚æœå¤šä¸ªçˆ¬è™«çº¿ç¨‹åŒæ—¶æ¥å–ï¼Œé‚£è¿™ä¸ªä»»åŠ¡åˆ°åº•è¯¥ç»™è°ï¼Ÿé‚£å°±éœ€è¦ç”¨åˆ°â€œé”â€æˆ–â€œåŒæ­¥é˜Ÿåˆ—â€æ¥ä¿è¯ä¸‹è½½ ä»»åŠ¡ä¸ä¼šè¢«é‡å¤æ‰§è¡Œã€‚</p><p>è€Œä¸”çº¿ç¨‹æ”¯æŒçš„å¤šä»»åŠ¡è§„æ¨¡ï¼Œåœ¨æ•°ç™¾åˆ°æ•°åƒçš„æ•°é‡è§„æ¨¡ã€‚åœ¨å¤§è§„æ¨¡çš„é«˜é¢‘ç½‘ç»œäº¤äº’ç³»ç»Ÿä¸­ï¼Œä»ç„¶æœ‰äº›åƒåŠ›ã€‚å½“ç„¶ï¼Œå¤šçº¿ç¨‹æœ€ä¸»è¦çš„é—®é¢˜è¿˜æ˜¯ç«æ€æ¡ä»¶ã€‚</p><h3 id="_3-4-éé˜»å¡æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_3-4-éé˜»å¡æ–¹å¼" aria-hidden="true">#</a> 3.4 éé˜»å¡æ–¹å¼</h3><p>ç»ˆäºï¼Œæˆ‘ä»¬æ¥åˆ°äº†éé˜»å¡è§£å†³æ–¹æ¡ˆã€‚å…ˆæ¥çœ‹çœ‹æœ€åŸå§‹çš„éé˜»å¡å¦‚ä½•å·¥ä½œçš„ã€‚</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">nonblocking_way</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    sock <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span>
    sock<span class="token punctuation">.</span>setblocking<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        sock<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;example.com&quot;</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">except</span> BlockingIOError<span class="token punctuation">:</span>
        <span class="token comment"># éé˜»å¡è¿æ¥è¿‡ç¨‹ä¸­ ä¹Ÿä¼š æŠ›å‡ºå¼‚å¸¸</span>
        <span class="token keyword">pass</span>
    request <span class="token operator">=</span> <span class="token string">&quot;GET HTTP:1.0/\r\n Host: example.com\r\n\r\n&quot;</span>
    data <span class="token operator">=</span> request<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">&quot;ascii&quot;</span><span class="token punctuation">)</span>
    <span class="token comment"># ä¸ç›´åˆ°socketä½•æ—¶å°±ç»ªï¼Œæ‰€ä»¥ä¸æ–­å°è¯•å‘é€</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
            <span class="token comment"># ç›´åˆ°sendä¸æŠ›å¼‚å¸¸ï¼Œåˆ™å‘é€å®Œæˆ</span>
            <span class="token keyword">break</span>
        <span class="token keyword">except</span> OSError<span class="token punctuation">:</span>
            <span class="token keyword">pass</span>

    response <span class="token operator">=</span> <span class="token string">b&#39;&#39;</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            chunk <span class="token operator">=</span> sock<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">4096</span><span class="token punctuation">)</span>
            <span class="token keyword">while</span> chunk<span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span>
                response <span class="token operator">+=</span> chunk
                chunk <span class="token operator">=</span> sock<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">4096</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span>
        <span class="token keyword">except</span> OSError<span class="token punctuation">:</span>
            <span class="token keyword">pass</span>
    <span class="token keyword">return</span> response
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">sync_way</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nonblocking_way<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>[æ³¨]ï¼šæ€»ä½“è€—æ—¶çº¦ 4.3 ç§’ã€‚ é¦–å…ˆæ³¨æ„åˆ°ä¸¤ç‚¹ï¼Œå°±æ„Ÿè§‰è¢«éª—äº†ã€‚ä¸€æ˜¯è€—æ—¶ä¸åŒæ­¥é˜»å¡ç›¸å½“ï¼ŒäºŒæ˜¯ä»£ç æ›´å¤æ‚ã€‚è¦éé˜»å¡ä½•ç”¨ï¼Ÿä¸”æ…¢ã€‚</p><p>ä¸Šå›¾ç¬¬ 9 è¡Œä»£ç  sock.setblocking(False)å‘Šè¯‰ OSï¼Œè®© socket ä¸Šé˜»å¡è°ƒç”¨éƒ½æ”¹ä¸ºéé˜»å¡çš„æ–¹å¼ã€‚ä¹‹å‰æˆ‘ä»¬è¯´åˆ°ï¼Œéé˜»å¡å°±æ˜¯åœ¨åšä¸€ä»¶äº‹çš„æ—¶å€™ï¼Œä¸é˜»ç¢ è°ƒç”¨å®ƒçš„ç¨‹åºåšåˆ«çš„äº‹æƒ…ã€‚ä¸Šè¿°ä»£ç åœ¨æ‰§è¡Œå®Œ sock.connect() å’Œ sock.recv() åçš„ç¡®ä¸å†é˜»å¡ï¼Œå¯ä»¥ç»§ç»­å¾€ä¸‹æ‰§è¡Œè¯·æ±‚å‡†å¤‡çš„ä»£ç æˆ–è€…æ˜¯æ‰§è¡Œ ä¸‹ä¸€æ¬¡è¯»å–ã€‚</p><p>ä»£ç å˜å¾—æ›´å¤æ‚ä¹Ÿæ˜¯ä¸Šè¿°åŸå› æ‰€è‡´ã€‚ç¬¬ 11 è¡Œè¦æ”¾åœ¨ try è¯­å¥å†…ï¼Œæ˜¯å› ä¸º socket åœ¨å‘é€éé˜»å¡è¿æ¥è¯·æ±‚è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿåº•å±‚ä¹Ÿä¼šæŠ›å‡ºå¼‚å¸¸ã€‚connect()è¢« è°ƒç”¨ä¹‹åï¼Œç«‹å³å¯ä»¥å¾€ä¸‹æ‰§è¡Œç¬¬ 15 å’Œ 16 è¡Œçš„ä»£ç ã€‚</p><p>éœ€è¦ while å¾ªç¯ä¸æ–­å°è¯• send()ï¼Œæ˜¯å› ä¸º connect()å·²ç»éé˜»å¡ï¼Œåœ¨ send()ä¹‹æ—¶å¹¶ä¸çŸ¥é“ socket çš„è¿æ¥æ˜¯å¦å°±ç»ªï¼Œåªæœ‰ä¸æ–­å°è¯•ï¼Œå°è¯•æˆåŠŸä¸ºæ­¢ï¼Œ å³å‘é€æ•°æ®æˆåŠŸäº†ã€‚recv()è°ƒç”¨ä¹Ÿæ˜¯åŒç†ã€‚</p><p>è™½ç„¶ connect() å’Œ recv() ä¸å†é˜»å¡ä¸»ç¨‹åºï¼Œç©ºå‡ºæ¥çš„æ—¶é—´æ®µ CPU æ²¡æœ‰ç©ºé—²ç€ï¼Œä½†å¹¶æ²¡æœ‰åˆ©ç”¨å¥½è¿™ç©ºé—²å»åšå…¶ä»–æœ‰æ„ä¹‰çš„äº‹æƒ…ï¼Œè€Œæ˜¯åœ¨å¾ªç¯å°è¯•è¯»å†™ socket ï¼ˆä¸åœåˆ¤æ–­éé˜»å¡è°ƒç”¨çš„çŠ¶æ€æ˜¯å¦å°±ç»ªï¼‰ã€‚è¿˜å¾—å¤„ç†æ¥è‡ªåº•å±‚çš„å¯å¿½ç•¥çš„å¼‚å¸¸ã€‚ä¹Ÿä¸èƒ½åŒæ—¶å¤„ç†å¤šä¸ª socket ã€‚</p><p>ç„¶å 10 æ¬¡ä¸‹è½½ä»»åŠ¡ä»ç„¶æŒ‰åºè¿›è¡Œã€‚æ‰€ä»¥æ€»ä½“æ‰§è¡Œæ—¶é—´å’ŒåŒæ­¥é˜»å¡ç›¸å½“ã€‚å¦‚æœéå¾—è¿™æ ·å­ï¼Œé‚£è¿˜ä¸å¦‚åŒæ­¥é˜»å¡ç®—äº†ã€‚</p><h5 id="é™„-ä½¿ç”¨ä¸Šå¤ç¥å™¨geventå¹¶å‘" tabindex="-1"><a class="header-anchor" href="#é™„-ä½¿ç”¨ä¸Šå¤ç¥å™¨geventå¹¶å‘" aria-hidden="true">#</a> <strong>é™„ï¼šä½¿ç”¨ä¸Šå¤ç¥å™¨<code>gevent</code>å¹¶å‘</strong></h5><p>ä½¿ç”¨<code>gevent</code> åº“ï¼Œè¯¥åº“å€ŸåŠ©äº <code>greenlet</code> è·å¾—äº†è¿˜è¡Œçš„å¹¶å‘æ€§èƒ½ï¼Œä½† <code>gevent</code> åªèƒ½åœ¨ <code>Unix/Linux</code> ä¸‹æ­£å¸¸è¿è¡Œï¼Œ<code>windows </code> æ— æ³•ä¿è¯</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>å®‰è£… geventï¼š

pip <span class="token function">install</span> gevent
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æœåŠ¡ç«¯ï¼š</strong></p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> gevent

<span class="token keyword">from</span> gevent <span class="token keyword">import</span> socket<span class="token punctuation">,</span> monkey

monkey<span class="token punctuation">.</span>patch_all<span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment"># monkeyè¡¥ä¸ï¼Œç”¨æ¥æœ€å¤§ç¨‹åº¦ç›‘å¬IOé˜»å¡</span>


<span class="token keyword">def</span> <span class="token function">start_server</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span><span class="token punctuation">:</span>
    sk <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span>
    sk<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">)</span>
    sk<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>

    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        conn<span class="token punctuation">,</span> addr <span class="token operator">=</span> sk<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;client accept address:&quot;</span><span class="token punctuation">,</span> addr<span class="token punctuation">)</span>
        gevent<span class="token punctuation">.</span>spawn<span class="token punctuation">(</span>handle_request<span class="token punctuation">,</span> conn<span class="token punctuation">)</span>  <span class="token comment"># æ¯æ¬¡è¿æ¥æˆåŠŸéƒ½åˆ›å»ºä¸€ä¸ªGreenletå¯¹è±¡</span>


<span class="token keyword">def</span> <span class="token function">handle_request</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
            data <span class="token operator">=</span> conn<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;Received:&quot;</span><span class="token punctuation">,</span> <span class="token builtin">repr</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
            conn<span class="token punctuation">.</span>send<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token keyword">finally</span><span class="token punctuation">:</span>
        conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>


start_server<span class="token punctuation">(</span><span class="token number">8004</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å®¢æˆ·ç«¯ï¼š</strong></p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> threading
<span class="token keyword">import</span> socket


<span class="token keyword">def</span> <span class="token function">sock_conn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    client <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span>

    client<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">8004</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    count <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>  <span class="token comment"># æ­»å¾ªç¯ï¼Œä¸æ–­å‘é€ hello + æ¬¡æ•°</span>
        client<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;hello %s&quot;</span> <span class="token operator">%</span> count<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        data <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span>

        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;[%s]recv from server:&quot;</span> <span class="token operator">%</span> threading<span class="token punctuation">.</span>get_ident<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># ç»“æœ</span>
        count <span class="token operator">+=</span> <span class="token number">1</span>

    <span class="token comment"># client.close()</span>


<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># å¹¶å‘100ä¸ªsocketè¿æ¥</span>
    t <span class="token operator">=</span> threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>sock_conn<span class="token punctuation">)</span>
    t<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-5-éé˜»å¡æ”¹è¿›" tabindex="-1"><a class="header-anchor" href="#_3-5-éé˜»å¡æ”¹è¿›" aria-hidden="true">#</a> 3.5 éé˜»å¡æ”¹è¿›</h3><h4 id="_3-5-1-epoll" tabindex="-1"><a class="header-anchor" href="#_3-5-1-epoll" aria-hidden="true">#</a> 3.5.1 epoll</h4><p>åˆ¤æ–­éé˜»å¡è°ƒç”¨æ˜¯å¦å°±ç»ªå¦‚æœ OS èƒ½åšï¼Œæ˜¯ä¸æ˜¯åº”ç”¨ç¨‹åºå°±å¯ä»¥ä¸ç”¨è‡ªå·±å»ç­‰å¾…å’Œåˆ¤æ–­äº†ï¼Œå°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªç©ºé—²å»åšå…¶ä»–äº‹æƒ…ä»¥æé«˜æ•ˆç‡ã€‚</p><p>æ‰€ä»¥ OS å°† I/O çŠ¶æ€çš„å˜åŒ–éƒ½å°è£…æˆäº†äº‹ä»¶ï¼Œå¦‚å¯è¯»äº‹ä»¶ã€å¯å†™äº‹ä»¶ã€‚å¹¶ä¸”æä¾›äº†ä¸“é—¨çš„ç³»ç»Ÿæ¨¡å—è®©åº”ç”¨ç¨‹åºå¯ä»¥æ¥æ”¶äº‹ä»¶é€šçŸ¥ã€‚è¿™ä¸ªæ¨¡å—å°±æ˜¯ selectã€‚ è®©åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ select æ³¨å†Œæ–‡ä»¶æè¿°ç¬¦å’Œå›è°ƒå‡½æ•°ã€‚å½“æ–‡ä»¶æè¿°ç¬¦çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œselect å°±è°ƒç”¨äº‹å…ˆæ³¨å†Œçš„å›è°ƒå‡½æ•°ã€‚</p><p>select å› å…¶ç®—æ³•æ•ˆç‡æ¯”è¾ƒä½ï¼Œåæ¥æ”¹è¿›æˆäº† pollï¼Œå†åæ¥åˆæœ‰è¿›ä¸€æ­¥æ”¹è¿›ï¼ŒBSD å†…æ ¸æ”¹è¿›æˆäº† kqueue æ¨¡å—ï¼Œè€Œ Linux å†…æ ¸æ”¹è¿›æˆäº† epoll æ¨¡å—ã€‚è¿™å››ä¸ª æ¨¡å—çš„ä½œç”¨éƒ½ç›¸åŒï¼Œæš´éœ²ç»™ç¨‹åºå‘˜ä½¿ç”¨çš„ API ä¹Ÿå‡ ä¹ä¸€è‡´ï¼ŒåŒºåˆ«åœ¨äº kqueue å’Œ epoll åœ¨å¤„ç†å¤§é‡æ–‡ä»¶æè¿°ç¬¦æ—¶æ•ˆç‡æ›´é«˜ã€‚</p><p>é‰´äº Linux æœåŠ¡å™¨çš„æ™®éæ€§ï¼Œä»¥åŠä¸ºäº†è¿½æ±‚æ›´é«˜æ•ˆç‡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¸¸å¸¸å¬é—»è¢«æ¢è®¨çš„æ¨¡å—éƒ½æ˜¯ epoll ã€‚</p><h4 id="_3-5-2-å›è°ƒ-callback" tabindex="-1"><a class="header-anchor" href="#_3-5-2-å›è°ƒ-callback" aria-hidden="true">#</a> 3.5.2 å›è°ƒ(Callback)</h4><p>æŠŠ I/O äº‹ä»¶çš„ç­‰å¾…å’Œç›‘å¬ä»»åŠ¡äº¤ç»™äº† OSï¼Œé‚£ OS åœ¨çŸ¥é“ I/O çŠ¶æ€å‘ç”Ÿæ”¹å˜åï¼ˆä¾‹å¦‚ socket è¿æ¥å·²å»ºç«‹æˆåŠŸå¯å‘é€æ•°æ®ï¼‰ï¼Œå®ƒåˆæ€ä¹ˆçŸ¥é“æ¥ä¸‹æ¥è¯¥å¹²å˜› å‘¢ï¼Ÿåªèƒ½å›è°ƒã€‚</p><p>éœ€è¦æˆ‘ä»¬å°†å‘é€æ•°æ®ä¸è¯»å–æ•°æ®å°è£…æˆç‹¬ç«‹çš„å‡½æ•°ï¼Œè®© epoll ä»£æ›¿åº”ç”¨ç¨‹åºç›‘å¬ socket çŠ¶æ€æ—¶ï¼Œå¾—å‘Šè¯‰ epollï¼šâ€œå¦‚æœ socket çŠ¶æ€å˜ä¸ºå¯ä»¥å¾€é‡Œå†™æ•°æ® ï¼ˆè¿æ¥å»ºç«‹æˆåŠŸäº†ï¼‰ï¼Œè¯·è°ƒç”¨ HTTP è¯·æ±‚å‘é€å‡½æ•°ã€‚å¦‚æœ socket å˜ä¸ºå¯ä»¥è¯»æ•°æ®äº†ï¼ˆå®¢æˆ·ç«¯å·²æ”¶åˆ°å“åº”ï¼‰ï¼Œè¯·è°ƒç”¨å“åº”å¤„ç†å‡½æ•°ã€‚â€</p><p>äºæ˜¯æˆ‘ä»¬åˆ©ç”¨ epoll ç»“åˆå›è°ƒæœºåˆ¶é‡æ„çˆ¬è™«ä»£ç ï¼š</p></div><!----><footer class="page-meta"><!----><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="info">2022/10/8 09:58:06</span></div><!----></footer><!----><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">é»˜è®¤é¡µè„š</div><div class="copyright">Copyright Â© 2022 äº”åå²š</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/igarashi-blog/assets/app.1ee68d9c.js" defer></script>
  </body>
</html>
