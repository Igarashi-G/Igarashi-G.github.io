import{_ as t}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as s,c as r,e as n,a as e,d,f as a}from"./app.f3a88e13.js";const i={},l=e("p",null,[d("\u672C\u6587\u6863\u63D0\u4F9B "),e("strong",null,"UFS"),d(" \u5B58\u50A8\u7CFB\u7EDF\u6838\u5FC3\u7EC4\u4EF6\u7684\u914D\u7F6E\u8BF4\u660E")],-1),u=a(`<h1 id="\u6838\u5FC3\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u6838\u5FC3\u7EC4\u4EF6" aria-hidden="true">#</a> \u6838\u5FC3\u7EC4\u4EF6</h1><p><strong>\u4EA7\u54C1</strong>\uFF1AUFS</p><p><strong>\u7248\u672C</strong>\uFF1Av4.0</p><p><strong>\u65E5\u671F</strong>\uFF1A2021-10-16</p><p><strong>\u6458\u8981</strong>\uFF1A\u672C\u6587\u6863\u63D0\u4F9B UFS \u5B58\u50A8\u7CFB\u7EDF\u6838\u5FC3\u7EC4\u4EF6\u7684\u914D\u7F6E\u8BF4\u660E</p><h2 id="_1-mss-\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#_1-mss-\u7EC4\u4EF6" aria-hidden="true">#</a> 1. MSS \u7EC4\u4EF6</h2><h3 id="_1-1-\u57FA\u672C\u4FE1\u606F" tabindex="-1"><a class="header-anchor" href="#_1-1-\u57FA\u672C\u4FE1\u606F" aria-hidden="true">#</a> 1.1 \u57FA\u672C\u4FE1\u606F</h3><table><thead><tr><th>\u7C7B\u76EE</th><th>\u4FE1\u606F</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>\u6838\u5FC3\u8FDB\u7A0B</td><td>ufsmetaserver</td><td></td></tr><tr><td>\u8FDB\u7A0B\u8DEF\u5F84</td><td>/usr/sbin/ufsmetaserver</td><td></td></tr><tr><td>\u914D\u7F6E\u6587\u4EF6\u8DEF\u5F84</td><td>/etc/ufs/ufsmetaserver.cfg</td><td></td></tr><tr><td>\u65E5\u5FD7\u6587\u4EF6\u8DEF\u5F84</td><td>/var/log/ufs/ufsmetaserver.log</td><td></td></tr><tr><td>\u4F9D\u8D56\u9879</td><td>license.bin</td><td>License \u8BB8\u53EF\u6587\u4EF6</td></tr><tr><td></td><td></td><td></td></tr></tbody></table><h3 id="_1-2-\u64CD\u4F5C\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_1-2-\u64CD\u4F5C\u65B9\u5F0F" aria-hidden="true">#</a> 1.2 \u64CD\u4F5C\u65B9\u5F0F</h3><ul><li>\u901A\u8FC7 GUI \u7BA1\u7406\u5E73\u53F0</li></ul><p>\u8BF7\u4EE5\u8D85\u7EA7\u7BA1\u7406\u5458\u8D26\u6237\u7684\u8EAB\u4EFD\u7684\u767B\u5F55 GUI \u7BA1\u7406\u5E73\u53F0\u8FDB\u884C\u64CD\u4F5C\u3002</p><ul><li>\u901A\u8FC7 CLI \u5DE5\u5177</li></ul><p>\u6267\u884C CLI \u5DE5\u5177\u9700\u8981\u4EE5 root \u8D26\u6237\u8EAB\u4EFD\u767B\u5F55\u8282\u70B9\u670D\u52A1\u5668\u3002</p><h3 id="_1-3-\u64CD\u4F5C\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#_1-3-\u64CD\u4F5C\u7C7B\u578B" aria-hidden="true">#</a> 1.3 \u64CD\u4F5C\u7C7B\u578B</h3><p><strong>\u542F\u52A8\u670D\u52A1\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl start ufs-metaserver
ufsmetaserver start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u505C\u6B62\u670D\u52A1\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl stop ufs-metaserver
ufsmetaserver stop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u91CD\u542F\u670D\u52A1\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl restart ufs-metaserver
ufsmetaserver restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u91CD\u65B0\u52A0\u8F7D\u670D\u52A1\u914D\u7F6E\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl reload ufs-metaserver
ufsmetaserver reload
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u67E5\u770B\u670D\u52A1\u7684\u8FD0\u884C\u72B6\u6001\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl status ufs-metaserver
ufsmetaserver <span class="token builtin class-name">test</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u542F\u7528/\u7981\u7528\u5F00\u673A\u542F\u52A8\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl <span class="token builtin class-name">enable</span>  ufs-metaserver
systemctl disable ufs-metaserver
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u67E5\u770B\u8F6F\u4EF6\u7248\u672C\u4FE1\u606F\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ufsmetaserver <span class="token parameter variable">-v</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u67E5\u770B\u5E2E\u52A9\u4FE1\u606F\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ufsmetaserver <span class="token parameter variable">-h</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u652F\u6301\u7684\u547D\u4EE4\u884C\u53C2\u6570\uFF1A</strong></p><table><thead><tr><th>\u53C2\u6570</th></tr></thead><tbody><tr><td>-v : print version number and exit</td></tr><tr><td>-f : run in foreground</td></tr><tr><td>-u : log undefined config variables</td></tr><tr><td>-n : do not attempt to increase limit of core dump size</td></tr><tr><td>-t locktimeout : how long wait for lockfile</td></tr><tr><td>-c cfgfile : use given config file</td></tr><tr><td>-i : ignore some metadata structure errors (attach orphans to root, ignore names without inode, etc.). DO NOT USE unless you are absoluttely sure that there are no other options to restore your metadata.</td></tr><tr><td>-a : automatically restore metadata from change logs</td></tr><tr><td>-e : start without metadata (download all from leader)</td></tr><tr><td>-x : produce more verbose output</td></tr><tr><td>-xx : even more verbose output</td></tr></tbody></table><h3 id="_1-4-\u53C2\u6570\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_1-4-\u53C2\u6570\u914D\u7F6E" aria-hidden="true">#</a> 1.4 \u53C2\u6570\u914D\u7F6E</h3><p>\u914D\u7F6E\u8BF4\u660E\uFF1A<code>/etc/ufs/ufsmetaserver.cfg</code></p><table><thead><tr><th>\u529F\u80FD</th><th>\u914D\u7F6E\u9879</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td></td><td>WORKING_USER = root</td><td>\u8BBE\u7F6E\u670D\u52A1\u8FDB\u7A0B\u5728\u8FD0\u884C\u65F6\u7684\u6709\u6548\u7528\u6237\u8EAB\u4EFD\uFF08\u9ED8\u8BA4\u4E3A root\uFF09</td></tr><tr><td></td><td>WORKING_GROUP = root</td><td>\u8BBE\u7F6E\u670D\u52A1\u8FDB\u7A0B\u5728\u8FD0\u884C\u65F6\u7684\u6709\u6548\u7EC4\u8EAB\u4EFD\uFF08\u9ED8\u8BA4\u4E3A root\uFF09</td></tr><tr><td></td><td>SYSLOG_IDENT = ufsmetaserver</td><td>\u914D\u7F6E\u670D\u52A1\u8FDB\u7A0B\u5728 syslog \u4E2D\u7684\u8FDB\u7A0B\u6807\u793A\u5B57\u6BB5\uFF08\u9ED8\u8BA4\u4E3A ufsmetaserver\uFF09</td></tr><tr><td></td><td>LOCK_MEMORY = 0</td><td>\u914D\u7F6E LOCK_MEMORY \u4EE5\u907F\u514D\u64CD\u4F5C\u7CFB\u7EDF\u5C06\u8FDB\u7A0B\u6240\u5360\u7528\u7684\u5185\u5B58\u4EA4\u6362\u5230 swap \u5206\u533A\u4E0A\uFF08\u9ED8\u8BA4\u4E3A 0\uFF0C\u4E0D\u5F00\u542F\uFF09</td></tr><tr><td></td><td>LIMIT_GLIBC_MALLOC_ARENAS = 4</td><td>\u9650\u5236\u670D\u52A1\u5668\u4F7F\u7528\u5927\u91CF\u7684\u865A\u62DF\u5185\u5B58\uFF08\u9ED8\u8BA4\u4E3A 4\uFF09</td></tr><tr><td></td><td>DISABLE_OOM_KILLER = 1</td><td>\u9650\u5236 OOM_KILLER\uFF08\u9ED8\u8BA4\u4E3A 1\uFF0C\u5F00\u542F\uFF09</td></tr><tr><td></td><td>NICE_LEVEL = -19</td><td>\u7528\u6765\u8FD0\u884C\u5B88\u62A4\u7A0B\u5E8F\u7684\u7EA7\u522B\uFF08\u9ED8\u8BA4\u503C\u4E3A-19\uFF1B\u6CE8\u610F\uFF1A\u5FC5\u987B\u4EE5 root \u8EAB\u4EFD\u542F\u52A8\u8FDB\u7A0B\u624D\u80FD\u589E\u52A0\u4F18\u5148\u7EA7\uFF0C\u5982\u679C\u8BBE\u7F6E\u4F18\u5148\u7EA7\u5931\u8D25\uFF0C\u8FDB\u7A0B\u5C06\u4FDD\u7559\u5176\u542F\u52A8\u65F6\u7684\u7EA7\u522B\uFF09</td></tr><tr><td></td><td>FILE_UMASK = 027</td><td>\u8BBE\u7F6E\u7EC4\u548C\u5176\u4ED6\u7528\u6237\u7684\u9ED8\u8BA4 umask\uFF08\u7528\u6237\u59CB\u7EC8\u4E3A 0\uFF0C\u9ED8\u8BA4\u503C\u4E3A 027-\u963B\u6B62\u7EC4\u5199\u5165\uFF0C\u5176\u4ED6\u5168\u90E8\u963B\u6B62\uFF09</td></tr><tr><td></td><td>DATA_PATH = /var/lib/ufs</td><td>\u8BBE\u7F6E\u670D\u52A1\u8FDB\u7A0B\u7684\u5DE5\u4F5C\u76EE\u5F55\uFF08\u9ED8\u8BA4\u4E3A/var/lib/ufs\uFF0C\u7528\u6765\u5B58\u653E changelog\u3001metadata\u3001pid \u7B49\uFF09</td></tr><tr><td></td><td>EXPORTS_FILENAME = /etc/ufs/ufsexports.cfg</td><td>\u8BBE\u7F6E\u670D\u52A1\u8FDB\u7A0B\u6240\u9700\u8981\u7684 ufsexports.cfg \u8DEF\u5F84</td></tr><tr><td></td><td>TOPOLOGY_FILENAME = /etc/ufs/ufstopology.cfg</td><td>\u8BBE\u7F6E\u670D\u52A1\u8FDB\u7A0B\u6240\u9700\u8981\u7684 ufstopology.cfg \u8DEF\u5F84</td></tr><tr><td></td><td>BACK_LOGS = 50</td><td>MSS \u65E5\u5FD7\u5907\u4EFD\u6570\u91CF\uFF08\u9ED8\u8BA4\u4E3A 50\uFF09</td></tr><tr><td></td><td>METADATA_SAVE_FREQ = 1</td><td>\u8BBE\u7F6E metadata \u540C\u6B65\u5230\u672C\u5730\u7684\u65F6\u95F4\u95F4\u9694\uFF08\u9ED8\u8BA4\u4E3A 1\uFF0C1 \u5C0F\u65F6\u540C\u6B65\u4E00\u6B21\uFF09</td></tr><tr><td></td><td>BACK_META_KEEP_PREVIOUS = 1</td><td>\u8BBE\u7F6E\u4FDD\u7559\u7684\u5148\u524D\u5143\u6570\u636E DB \u7684\u6570\u91CF\uFF08\u9ED8\u8BA4\u4E3A 1\uFF09</td></tr><tr><td></td><td>CHANGELOG_PRESERVE_SECONDS = 1800</td><td>\u8BBE\u7F6E changelog \u5728\u5185\u5B58\u4E2D\u4FDD\u7559\u65F6\u95F4\u9650\u5236\uFF08\u9ED8\u8BA4\u4E3A 1800\uFF0C\u5355\u4F4D\u4E3A\u79D2\uFF09</td></tr><tr><td></td><td>CHANGELOG_SAVE_MODE = 0</td><td>\u8BBE\u7F6E changelog \u7684\u5B58\u6863\u673A\u5236<br>\uFF08\u9ED8\u8BA4\u4E3A 0\uFF0C\u53EF\u9009\u53C2\u6570\u4E3A 0\u30011\u30012\uFF09</td></tr><tr><td></td><td>MISSING_LOG_CAPACITY = 100000</td><td>\u9650\u5236\u5728\u5185\u5B58\u4E2D\u8BB0\u5F55\u7684\u4E22\u5931\u7684 chunk \u5757\u6570\u91CF\u7684\u4E0A\u9650\uFF08\u9ED8\u8BA4\u4E3A 100000\uFF09</td></tr><tr><td></td><td>MATOML_LISTEN_HOST = *</td><td>metaserver</td></tr><tr><td></td><td>MATOML_LISTEN_PORT = 9419</td><td>\u914D\u7F6E\u76D1\u542C\u4E0E metaserver\u3001supervisors \u7684\u7F51\u7EDC\u7AEF\u53E3</td></tr><tr><td></td><td>MATOCS_LISTEN_HOST = *</td><td>\u914D\u7F6E\u76D1\u542C\u4E0E chunkserver \u7684 IP \u5730\u5740</td></tr><tr><td></td><td>MATOCS_LISTEN_PORT = 9420</td><td>\u914D\u7F6E\u76D1\u542C\u4E0E chunkserver \u7684\u7F51\u7EDC\u7AEF\u53E3</td></tr><tr><td></td><td>MATOCS_TIMEOUT = 10</td><td>MSS \u670D\u52A1\u4E0E CSS \u670D\u52A1\u7F51\u7EDC\u901A\u4FE1\u7684\u8D85\u65F6\u65F6\u95F4\uFF08\u9ED8\u8BA4\u4E3A 10\uFF0C\u5355\u4F4D\u4E3A\u79D2\uFF09</td></tr><tr><td></td><td>AUTH_CODE = ufspassword</td><td>\u914D\u7F6E metaserver \u4E0E chunkserver \u901A\u4FE1\u6CE8\u518C\u7684\u51ED\u8BC1\uFF08\u9ED8\u8BA4\u4E0D\u914D\u7F6E\u8FD9\u4E2A\u9009\u9879\uFF09</td></tr><tr><td></td><td>REPLICATIONS_DELAY_INIT = 60</td><td>\u9650\u5236\u5F00\u59CB\u6570\u636E\u4FEE\u590D\u7684\u521D\u59CB\u5EF6\u8FDF\uFF0C\u4EE5\u79D2\u4E3A\u5355\u4F4D\uFF08\u9ED8\u8BA4\u4E3A 60\uFF09</td></tr><tr><td></td><td>REPLICATIONS_RESPECT_TOPOLOGY = 0</td><td></td></tr><tr><td></td><td>CREATIONS_RESPECT_TOPOLOGY = 0</td><td></td></tr><tr><td></td><td>CHUNKS_UNIQUE_MODE = 0</td><td></td></tr><tr><td></td><td>CHUNKS_LOOP_MAX_CPS = 100000</td><td>\u9650\u5236\u6BCF\u6B21 chunk_loop \u68C0\u67E5\u6B21\u6570\u64CD\u4F5C\u7684\u4E0A\u9650\uFF08\u9ED8\u8BA4\u4E3A 100000\uFF09</td></tr><tr><td></td><td>CHUNKS_LOOP_MIN_TIME = 300</td><td>\u9650\u5236\u6BCF\u6B21 chunk_loop \u68C0\u67E5\u6B21\u6570\u64CD\u4F5C\u7684\u65F6\u95F4\u4E0B\u9650\uFF08\u9ED8\u8BA4\u4E3A 300 \u79D2\uFF09</td></tr><tr><td></td><td>CHUNKS_SOFT_DEL_LIMIT = 10</td><td>\u9650\u5236 CSS \u670D\u52A1\u4E2D\u8F6F\u5220\u9664\u6570\u636E\u5757\u7684\u6700\u5927\u6570\u91CF\uFF08\u9ED8\u8BA4\u4E3A 10\uFF09</td></tr><tr><td></td><td>CHUNKS_HARD_DEL_LIMIT = 25</td><td>\u9650\u5236 CSS \u670D\u52A1\u4E2D\u786C\u5220\u9664\u6570\u636E\u5757\u7684\u6700\u5927\u6570\u91CF\uFF08\u9ED8\u8BA4\u4E3A 25\uFF09</td></tr><tr><td></td><td>CHUNKS_WRITE_REP_LIMIT = 2,1,1,4</td><td>\u9650\u5236\u590D\u5236\u5230\u4E00\u4E2A CSS \u670D\u52A1\u4E2D\u7684\u6700\u5927\u6570\u636E\u5757\u6570\u91CF</td></tr><tr><td></td><td>CHUNKS_READ_REP_LIMIT = 10,5,2,5</td><td>\u9650\u5236\u4ECE\u4E00\u4E2A CSS \u670D\u52A1\u4E2D\u590D\u5236\u7684\u6700\u5927\u6570\u636E\u5757\u6570\u91CF</td></tr><tr><td></td><td>CS_HEAVY_LOAD_THRESHOLD = 150</td><td>CSS \u670D\u52A1\u7684\u8D1F\u8F7D\u9608\u503C\uFF08\u9ED8\u8BA4\u4E3A 150\uFF09</td></tr><tr><td></td><td>CS_HEAVY_LOAD_RATIO_THRESHOLD = 5.0</td><td>CSS \u8D1F\u8F7D\u7684\u9608\u503C\u6BD4\u7387\uFF08\u9ED8\u8BA4\u4E3A 5.0\uFF0C\u5F53 CSS \u8D1F\u8F7D\u9AD8\u4E8E\u5148\u524D\u6307\u5B9A\u7684\u9608\u503C\u5E76\u4E14\u6B64\u6BD4\u7387\u9AD8\u4E8E\u5E73\u5747\u8D1F\u8F7D\u65F6\uFF0CCSS \u5C06\u5207\u6362\u5230\u201Cgrace\u201D\u6A21\u5F0F\uFF09</td></tr><tr><td></td><td>CS_HEAVY_LOAD_GRACE_PERIOD = 900</td><td>\u5B9A\u4E49 CSS \u670D\u52A1\u5668\u5C06\u5728\u201Cgrace\u201D\u6A21\u5F0F\u4E0B\u4FDD\u6301\u591A\u957F\u65F6\u95F4\uFF08\u4EE5\u79D2\u4E3A\u5355\u4F4D\uFF09</td></tr><tr><td></td><td>ACCEPTABLE_PERCENTAGE_DIFFERENCE = 1.0</td><td>\u9650\u5236 CSS \u670D\u52A1\u7A7A\u95F4\u4F7F\u7528\u4E4B\u95F4\u7684\u6700\u5927\u5DEE\u5F02\u767E\u5206\u6BD4\uFF08\u9ED8\u8BA4\u4E3A 1.0 \uFF1B\u6709\u6548\u503C\uFF1A0.1 - 10.0\uFF09</td></tr><tr><td></td><td>PRIORITY_QUEUES_LENGTH = 1000000</td><td>\u4F18\u5148\u961F\u5217\u7684\u957F\u5EA6\uFF08\u9ED8\u8BA4\u503C\u4E3A 1000000\uFF09</td></tr><tr><td></td><td>CS_MAINTENANCE_MODE_TIMEOUT = 0</td><td>\u9650\u5236 CSS \u670D\u52A1\u53EF\u4EE5\u5904\u4E8E\u7EF4\u62A4\u6A21\u5F0F\u7684\u6700\u5927\u79D2\u6570\uFF08\u9ED8\u8BA4\u503C\u4E3A 0\uFF0C\u65E0\u9650\u5236\uFF09</td></tr><tr><td></td><td>CS_TEMP_MAINTENANCE_MODE_TIMEOUT = 1800</td><td>CSS \u670D\u52A1\u5668\u53EF\u4EE5\u5904\u4E8E\u201C\u4E34\u65F6\u201D\u7EF4\u62A4\u6A21\u5F0F\u7684\u6700\u5927\u79D2\u6570\uFF08\u53EA\u8981\u6B63\u5E38\u505C\u6B62\u670D\u52A1\u5668\u5C31\u4F1A\u5207\u6362\u5230\u6B64\u6A21\u5F0F\uFF0C\u91CD\u65B0\u8FDE\u63A5\u540E\u670D\u52A1\u5668\u4F1A\u81EA\u52A8\u5207\u6362\u56DE\u6B63\u5E38\u6A21\u5F0F\uFF1B\u9ED8\u8BA4\u503C\uFF1A1800\uFF09</td></tr><tr><td></td><td>CS_DAYS_TO_REMOVE_UNUSED = 7</td><td>\u9650\u5236 MSS \u4E2D\u4FDD\u7559\u591A\u5C11\u5929\u672A\u4F7F\u7528\uFF08\u65AD\u5F00\u8FDE\u63A5\uFF09\u7684 CSS \u670D\u52A1\u5668\uFF08\u6709\u6548\u503C\uFF1A0 - 365\uFF1B0 \u8868\u793A\u65E0\u9650\u671F\uFF1B\u9ED8\u8BA4\u503C\u4E3A 7\uFF09</td></tr><tr><td></td><td>SESSION_SUSTAIN_TIME = 86400</td><td>\u4FDD\u7559\u79BB\u7EBF\u7684\u5BA2\u6237\u7AEF\u4F1A\u8BDD\u7684\u65F6\u95F4\uFF08\u4EE5\u79D2\u4E3A\u5355\u4F4D\uFF1B\u9ED8\u8BA4\u503C\u4E3A 86400 = 1 \u5929\uFF09</td></tr><tr><td></td><td>QUOTA_DEFAULT_GRACE_PERIOD = 604800</td><td>\u8F6F\u914D\u989D\u7684\u9ED8\u8BA4\u5BBD\u9650\u671F\uFF08\u4EE5\u79D2\u4E3A\u5355\u4F4D\uFF09\uFF08\u9ED8\u8BA4\u4E3A 604800 - 7 \u5929\uFF09</td></tr><tr><td></td><td>ATIME_MODE = 0</td><td>atime \u4FEE\u6539\u65B9\u5F0F\uFF08\u9ED8\u8BA4\u4E3A 0 - \u8BBF\u95EE\u65F6\u59CB\u7EC8\u4FEE\u6539 atime\uFF09</td></tr><tr><td></td><td>RESERVE_SPACE = 0</td><td></td></tr><tr><td></td><td>MAX_ALLOWED_HARD_LINKS = 32767</td><td>\u9650\u5B9A\u6587\u4EF6\u7CFB\u7EDF\u7684\u786C\u94FE\u63A5\u6570\u91CF</td></tr></tbody></table><h2 id="_2-css-\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#_2-css-\u7EC4\u4EF6" aria-hidden="true">#</a> 2. CSS \u7EC4\u4EF6</h2><h3 id="_2-1-\u57FA\u672C\u4FE1\u606F" tabindex="-1"><a class="header-anchor" href="#_2-1-\u57FA\u672C\u4FE1\u606F" aria-hidden="true">#</a> 2.1 \u57FA\u672C\u4FE1\u606F</h3><table><thead><tr><th>\u7C7B\u76EE</th><th>\u4FE1\u606F</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>\u6838\u5FC3\u8FDB\u7A0B</td><td>ufschunkserver</td><td></td></tr><tr><td>\u8FDB\u7A0B\u8DEF\u5F84</td><td>/usr/sbin/ufschunkserver</td><td></td></tr><tr><td>\u914D\u7F6E\u6587\u4EF6\u8DEF\u5F84</td><td>/etc/ufs/ufschunkserver.cfg</td><td></td></tr><tr><td>\u65E5\u5FD7\u6587\u4EF6\u8DEF\u5F84</td><td>/var/log/ufs/ufschunkserver.log</td><td></td></tr><tr><td>\u4F9D\u8D56\u9879</td><td>\u96C6\u7FA4 ufs-metaserver \u670D\u52A1\u6B63\u5E38</td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table><h3 id="_2-2-\u64CD\u4F5C\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-2-\u64CD\u4F5C\u65B9\u5F0F" aria-hidden="true">#</a> 2.2 \u64CD\u4F5C\u65B9\u5F0F</h3><ul><li>\u901A\u8FC7 GUI \u7BA1\u7406\u5E73\u53F0</li></ul><p>\u8BF7\u4EE5\u8D85\u7EA7\u7BA1\u7406\u5458\u8D26\u6237\u7684\u8EAB\u4EFD\u7684\u767B\u5F55 GUI \u7BA1\u7406\u5E73\u53F0\u8FDB\u884C\u64CD\u4F5C\u3002</p><ul><li>\u901A\u8FC7 CLI \u5DE5\u5177</li></ul><p>\u6267\u884C CLI \u5DE5\u5177\u9700\u8981\u4EE5 root \u8D26\u6237\u8EAB\u4EFD\u767B\u5F55\u8282\u70B9\u670D\u52A1\u5668\u3002</p><h3 id="_2-3-\u64CD\u4F5C\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#_2-3-\u64CD\u4F5C\u7C7B\u578B" aria-hidden="true">#</a> 2.3 \u64CD\u4F5C\u7C7B\u578B</h3><p><strong>\u542F\u52A8\u670D\u52A1\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl start ufs-chunkserver
ufschunkserver start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u505C\u6B62\u670D\u52A1\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl stop ufs-chunkserver
ufschunkserver stop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u91CD\u542F\u670D\u52A1\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl restart ufs-chunkserver
ufschunkserver restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u91CD\u65B0\u52A0\u8F7D\u670D\u52A1\u914D\u7F6E\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl reload ufs-chunkserver
ufschunkserver reload
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u67E5\u770B\u670D\u52A1\u7684\u8FD0\u884C\u72B6\u6001\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl status ufs-chunkserver
ufschunkserver <span class="token builtin class-name">test</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u542F\u7528/\u7981\u7528\u5F00\u673A\u542F\u52A8\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl <span class="token builtin class-name">enable</span>  ufs-chunkserver
systemctl disable ufs-chunkserver
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u67E5\u770B\u8F6F\u4EF6\u7248\u672C\u4FE1\u606F\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ufschunkserver <span class="token parameter variable">-v</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u67E5\u770B\u5E2E\u52A9\u4FE1\u606F\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ufschunkserver <span class="token parameter variable">-h</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u652F\u6301\u7684\u547D\u4EE4\u884C\u53C2\u6570\uFF1A</strong></p><table><thead><tr><th>\u53C2\u6570</th></tr></thead><tbody><tr><td>-v : print version number and exit</td></tr><tr><td>-f : run in foreground</td></tr><tr><td>-u : log undefined config variables</td></tr><tr><td>-n : do not attempt to increase limit of core dump size</td></tr><tr><td>-t locktimeout : how long wait for lockfile</td></tr><tr><td>-c cfgfile : use given config file</td></tr></tbody></table><h3 id="_2-4-\u53C2\u6570\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_2-4-\u53C2\u6570\u914D\u7F6E" aria-hidden="true">#</a> 2.4 \u53C2\u6570\u914D\u7F6E</h3><p>\u914D\u7F6E\u8BF4\u660E\uFF1A<code>/etc/ufs/ufschunkserver.cfg</code></p><table><thead><tr><th>\u529F\u80FD</th><th>\u914D\u7F6E\u9879</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td></td><td>WORKING_USER = root</td><td>\u8BBE\u7F6E\u670D\u52A1\u8FDB\u7A0B\u5728\u8FD0\u884C\u65F6\u7684\u6709\u6548\u7528\u6237\u8EAB\u4EFD\uFF08\u9ED8\u8BA4\u4E3A root\uFF09</td></tr><tr><td></td><td>WORKING_GROUP = root</td><td>\u8BBE\u7F6E\u670D\u52A1\u8FDB\u7A0B\u5728\u8FD0\u884C\u65F6\u7684\u6709\u6548\u7EC4\u8EAB\u4EFD\uFF08\u9ED8\u8BA4\u4E3A root\uFF09</td></tr><tr><td></td><td>SYSLOG_IDENT = ufschunkserver</td><td>\u914D\u7F6E\u670D\u52A1\u8FDB\u7A0B\u5728 syslog \u4E2D\u7684\u8FDB\u7A0B\u6807\u793A\u5B57\u6BB5\uFF08\u9ED8\u8BA4\u4E3A ufsmetaserver\uFF09</td></tr><tr><td></td><td>LOCK_MEMORY = 0</td><td>\u662F\u5426\u9501\u5B9A\u5185\u5B58\u4EE5\u907F\u514D\u4F7F\u7528 swap\uFF08\u9ED8\u8BA4\u4E3A 0\uFF0C\u5373\u5426\uFF09</td></tr><tr><td></td><td>LIMIT_GLIBC_MALLOC_ARENAS = 4</td><td>\u5C06 malloc arenas \u9650\u5236\u4E3A\u7ED9\u5B9A\u503C - \u9632\u6B62\u670D\u52A1\u5668\u4F7F\u7528\u5927\u91CF\u865A\u62DF\u5185\u5B58\uFF08\u9ED8\u8BA4\u4E3A 4\uFF09</td></tr><tr><td></td><td>DISABLE_OOM_KILLER = 1</td><td>\u7981\u7528 OOM Killer\uFF08\u9ED8\u8BA4\u4E3A 1\uFF09</td></tr><tr><td></td><td>NICE_LEVEL = -19</td><td>\u8FD0\u884C\u5B88\u62A4\u8FDB\u7A0B\u7684 nice \u7EA7\u522B\uFF08\u9ED8\u8BA4\u4E3A -19\uFF09</td></tr><tr><td></td><td>FILE_UMASK = 027</td><td>\u4E3A\u7EC4\u548C\u5176\u4ED6\u4EBA\u8BBE\u7F6E\u9ED8\u8BA4 umask\uFF08\u7528\u6237\u59CB\u7EC8\u4E3A 0\uFF0C\u9ED8\u8BA4\u4E3A 027\uFF09</td></tr><tr><td></td><td>DATA_PATH = /var/lib/ufs</td><td>\u8BBE\u7F6E\u670D\u52A1\u8FDB\u7A0B\u7684\u5DE5\u4F5C\u76EE\u5F55\uFF08\u9ED8\u8BA4\u4E3A/var/lib/ufs\uFF09</td></tr><tr><td></td><td>HDD_CONF_FILENAME = /etc/ufs/ufshdd.cfg</td><td>\u8BBE\u7F6E\u78C1\u76D8\u4FE1\u606F\u7684\u914D\u7F6E\u8DEF\u5F84\uFF08\u9ED8\u8BA4\u4E3A/etc/ufs/ufshdd.cfg\uFF09</td></tr><tr><td></td><td>HDD_TEST_SPEED = 1.0</td><td>\u6570\u636E\u5757\u5B89\u5168\u68C0\u67E5 IO \u6D4B\u8BD5\u7684\u6267\u884C\u5468\u671F\uFF08\u9ED8\u8BA4\u4E3A 1.0\uFF0C\u5355\u4F4D\u4E3A\u79D2\uFF09</td></tr><tr><td></td><td>HDD_MIN_TEST_INTERVAL = 86400</td><td>\u5F53\u4E0A\u6B21 I/O\uFF08\u5305\u62EC\u6D4B\u8BD5\uFF09\u7684\u6267\u884C\u65F6\u95F4\u5C11\u4E8E HDD_MIN_TEST_INTERVAL \u79D2\u524D\u65F6\uFF0C\u4E0D\u8FDB\u884C\u6D4B\u8BD5\u5757\u5B8C\u6574\u6027</td></tr><tr><td></td><td>HDD_FADVISE_MIN_TIME = 86400</td><td>\u6570\u636E\u5757\u7F13\u5B58\u5237\u65B0\u7684\u6700\u5C0F\u95F4\u9694\u5468\u671F\uFF08\u9ED8\u8BA4\u4E3A 86400\uFF0C\u5355\u4F4D\u4E3A\u79D2\uFF09</td></tr><tr><td></td><td>HDD_LEAVE_SPACE_DEFAULT = 256MiB</td><td>\u8BBE\u7F6E\u6BCF\u5757\u78C1\u76D8\u7684\u9884\u7559\u7A7A\u95F4\uFF08\u9ED8\u8BA4\u4E3A 256 MiB\uFF09</td></tr><tr><td></td><td>HDD_REBALANCE_UTILIZATION = 20</td><td>\u5141\u8BB8 CSS \u8282\u70B9\u5728\u78C1\u76D8\u5BB9\u91CF\u5747\u8861\u4E0A\u82B1\u8D39\u7684\u603B\u5DE5\u4F5C\u65F6\u95F4\u7684\u767E\u5206\u6BD4</td></tr><tr><td></td><td>HDD_ERROR_TOLERANCE_COUNT = 2</td><td>\u5728\u5355\u4E2A\u786C\u76D8\u9A71\u52A8\u5668\u4E0A\u5728\u7ED9\u5B9A\u7684\u79D2\u6570 (PERIOD) \u5185\u53EF\u4EE5\u5BB9\u5FCD\u591A\u5C11\u4E2A i/o \u9519\u8BEF (COUNT)\uFF1B \u5982\u679C\u9519\u8BEF\u6570\u91CF\u8D85\u8FC7\u6B64\u8BBE\u7F6E\uFF0C\u5219\u6709\u95EE\u9898\u7684\u786C\u76D8\u5C06\u88AB\u6807\u8BB0\u4E3A\u635F\u574F</td></tr><tr><td></td><td>HDD_ERROR_TOLERANCE_PERIOD = 600</td><td>\u5728\u5355\u4E2A\u786C\u76D8\u9A71\u52A8\u5668\u4E0A\u5728\u7ED9\u5B9A\u7684\u79D2\u6570 (PERIOD) \u5185\u53EF\u4EE5\u5BB9\u5FCD\u591A\u5C11\u4E2A i/o \u9519\u8BEF (COUNT)\uFF1B \u5982\u679C\u9519\u8BEF\u6570\u91CF\u8D85\u8FC7\u6B64\u8BBE\u7F6E\uFF0C\u5219\u6709\u95EE\u9898\u7684\u786C\u76D8\u5C06\u88AB\u6807\u8BB0\u4E3A\u635F\u574F</td></tr><tr><td></td><td>HDD_FSYNC_BEFORE_CLOSE = 0</td><td>\u542F\u7528/\u7981\u7528\u6570\u636E\u5757\u64CD\u4F5C\u5B8C\u6210\u540E\u6267\u884C fsync</td></tr><tr><td></td><td>HDD_SPARSIFY_ON_WRITE = 1</td><td>\u542F\u7528/\u7981\u7528\u6570\u636E\u5757\u5199\u5165\u7A7A\u6D1E\u5185\u5BB9</td></tr><tr><td></td><td>HDD_RR_CHUNK_COUNT = 10000</td><td>\u914D\u7F6E\u5355\u4E2A\u78C1\u76D8\u76EE\u5F55\u4E2D\u4E00\u6B21\u53EF\u5199\u5165\u7684\u6700\u5927\u6570\u636E\u5757\u6587\u4EF6\u7684\u4E0A\u9650\uFF08\u9ED8\u8BA4\u503C\u4E3A 10000\uFF09</td></tr><tr><td></td><td>HDD_KEEP_DUPLICATES_HOURS = 168</td><td>\u8BBE\u7F6E\u5728\u5220\u9664\u4E4B\u524D\u5E94\u8BE5\u4FDD\u7559\u591A\u5C11\u5C0F\u65F6\u7684\u91CD\u590D\u5757\uFF08\u9ED8\u8BA4\u4E3A 168\uFF0C\u5355\u4F4D\u4E3A\u5C0F\u65F6\uFF09</td></tr><tr><td></td><td>ALLOW_STARTING_WITH_INVALID_DISKS = 0</td><td>\u542F\u7528/\u7981\u7528\u662F\u5426\u5141\u8BB8\u5B58\u5728\u65E0\u6548\u78C1\u76D8\u7684\u60C5\u51B5\u4E0B CSS \u80FD\u591F\u6B63\u5E38\u542F\u52A8</td></tr><tr><td></td><td>WORKERS_MAX = 250<br>WORKERS_MAX_IDLE = 40</td><td>\u5DE5\u4F5C\u7EBF\u7A0B\u6570\u91CF\u7684\u6700\u5927\u503C<br>\u5DE5\u4F5C\u7EBF\u7A0B\u6570\u91CF\u7684\u7A7A\u95F2\u503C</td></tr><tr><td></td><td>LABELS =</td><td>CSS \u8282\u70B9\u6807\u7B7E</td></tr><tr><td></td><td>MASTER_TIMEOUT = 10</td><td>\u914D\u7F6E\u4E0E MSS \u670D\u52A1\u901A\u4FE1\u7684\u8D85\u65F6\u65F6\u95F4</td></tr><tr><td></td><td>MASTER_RECONNECTION_DELAY = 5</td><td>\u91CD\u8FDE MSS \u670D\u52A1\u7684\u5EF6\u8FDF\u65F6\u95F4</td></tr><tr><td></td><td>CHUNKS_PER_REGISTER_PACKET = 10000</td><td>CSS \u8282\u70B9\u5411 MSS \u6CE8\u518C\u8FC7\u7A0B\u4E2D\u4F20\u9012\u7684\u5355\u4E2A\u6570\u636E\u5305\u4E2D\u5141\u8BB8\u7684\u6570\u636E\u5757\u4E0A\u9650\uFF08\u9ED8\u8BA4\u4E3A 10000\uFF09</td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table><h2 id="_3-client-\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#_3-client-\u7EC4\u4EF6" aria-hidden="true">#</a> 3. CLIENT \u7EC4\u4EF6</h2><h3 id="_3-1-\u57FA\u672C\u4FE1\u606F" tabindex="-1"><a class="header-anchor" href="#_3-1-\u57FA\u672C\u4FE1\u606F" aria-hidden="true">#</a> 3.1 \u57FA\u672C\u4FE1\u606F</h3><table><thead><tr><th>\u7C7B\u76EE</th><th>\u4FE1\u606F</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>\u6838\u5FC3\u8FDB\u7A0B</td><td>ufsmount</td><td></td></tr><tr><td>\u8FDB\u7A0B\u8DEF\u5F84</td><td>/usr/bin/ufsmount</td><td></td></tr><tr><td>\u914D\u7F6E\u6587\u4EF6\u8DEF\u5F84</td><td>/etc/ufs/ufsmount.cfg</td><td></td></tr><tr><td>\u65E5\u5FD7\u6587\u4EF6\u8DEF\u5F84</td><td>/var/log/ufs/ufsmount.log</td><td></td></tr><tr><td>\u4F9D\u8D56\u9879</td><td>UFS \u96C6\u7FA4\u72B6\u6001\u6B63\u5E38</td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table><h3 id="_3-2-\u64CD\u4F5C\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_3-2-\u64CD\u4F5C\u65B9\u5F0F" aria-hidden="true">#</a> 3.2 \u64CD\u4F5C\u65B9\u5F0F</h3><p>\u6267\u884C ufsmount \u5DE5\u5177\u9700\u8981\u4EE5 root \u8D26\u6237\u8EAB\u4EFD\u767B\u5F55\u5E94\u7528\u670D\u52A1\u5668\u3002</p><h3 id="_3-3-\u64CD\u4F5C\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#_3-3-\u64CD\u4F5C\u7C7B\u578B" aria-hidden="true">#</a> 3.3 \u64CD\u4F5C\u7C7B\u578B</h3><p>\u521B\u5EFA\u672C\u5730\u6302\u8F7D\u76EE\u5F55\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">mkdir</span> /mnt/ufs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6302\u8F7D UFS \u6839\u6587\u4EF6\u7CFB\u7EDF\u5230\u672C\u5730\u7684/mnt/ufs \u76EE\u5F55\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ufsmount /mnt/ufs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4F7F\u7528-H \u53C2\u6570\u6302\u8F7D\u6307\u5B9A\u96C6\u7FA4\u7684 UFS \u6587\u4EF6\u7CFB\u7EDF\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ufsmount <span class="token parameter variable">-H</span> <span class="token number">192.168</span>.2.71 /mnt/ufs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4F7F\u7528 ufssubfolder \u53C2\u6570\u6307\u5B9A\u6302\u8F7D\u7684\u5B50\u76EE\u5F55\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ufsmount <span class="token parameter variable">-o</span> <span class="token assign-left variable">ufssubfolder</span><span class="token operator">=</span>/sub /mnt/ufs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4F7F\u7528 ufsbind \u6307\u5B9A\u5BA2\u6237\u7AEF\u4F7F\u7528\u7684 IP \u5730\u5740\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ufsmount <span class="token parameter variable">-o</span> <span class="token assign-left variable">ufsbind</span><span class="token operator">=</span><span class="token number">172.16</span>.130.157 /mnt/ufs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6302\u8F7D\u56DE\u6536\u7AD9\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ufsmount <span class="token parameter variable">-o</span> ufsmeta /mnt/meta
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5EF6\u8FDF\u6302\u8F7D\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ufsmount <span class="token parameter variable">-o</span> ufsdelayedinit /mnt/ufs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u524D\u53F0\u8FD0\u884C\u5BA2\u6237\u7AEF\u7A0B\u5E8F\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ufsmount <span class="token parameter variable">-f</span> /mnt/ufs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u542F\u7528 DEBUG \u8F93\u51FA\u6A21\u5F0F\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ufsmount <span class="token parameter variable">-f</span> <span class="token parameter variable">-o</span> ufsdebug /mnt/ufs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u67E5\u770B\u5E2E\u52A9\u4FE1\u606F\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ufsmount <span class="token parameter variable">-h</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_3-4-\u53C2\u6570\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_3-4-\u53C2\u6570\u914D\u7F6E" aria-hidden="true">#</a> 3.4 \u53C2\u6570\u914D\u7F6E</h3><p>\u5BA2\u6237\u7AEF\u7684\u6302\u8F7D\u53C2\u6570\u53EF\u4EE5\u5728\u547D\u4EE4\u884C\u4E2D\u6307\u5B9A\uFF0C\u4E5F\u53EF\u4EE5\u5728<code>/etc/ufs/ufsmount.cfg</code>\u4E2D\u8FDB\u884C\u8BBE\u7F6E\u3002</p><h4 id="_3-4-1-\u7F13\u5B58\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_3-4-1-\u7F13\u5B58\u914D\u7F6E" aria-hidden="true">#</a> 3.4.1 \u7F13\u5B58\u914D\u7F6E</h4><pre><code>    -o ufscachemode=CMODE       \u8BBE\u7F6E\u7F13\u5B58\u6A21\u5F0F(default: AUTO)
    -o ufsattrcacheto=SEC       \u8BBE\u7F6E\u5C5E\u6027\u7F13\u5B58\u8D85\u65F6 (default: 1.0)
    -o ufsxattrcacheto=SEC      \u8BBE\u7F6E\u6269\u5C55\u5C5E\u6027 (xattr) \u7F13\u5B58\u8D85\u65F6 (default: 30.0)
    -o ufsentrycacheto=SEC      \u8BBE\u7F6E\u6587\u4EF6entry\u7F13\u5B58\u8D85\u65F6 (default: 0.0)
    -o ufsdirentrycacheto=SEC   \u8BBE\u7F6E\u76EE\u5F55entry\u7F13\u5B58\u8D85\u65F6 (default: 1.0)
    -o ufsnegentrycacheto=SEC   \u8BBE\u7F6Eneg entry\u7F13\u5B58\u8D85\u65F6  (default: 0.0)
    -o ufsgroupscacheto=SEC     \u8BBE\u7F6E\u7528\u6237\u7EC4\u7F13\u5B58\u8D85\u65F6 (default: 300.0)
</code></pre><h4 id="_3-4-2-io-\u8C03\u4F18" tabindex="-1"><a class="header-anchor" href="#_3-4-2-io-\u8C03\u4F18" aria-hidden="true">#</a> 3.4.2 IO \u8C03\u4F18</h4><pre><code>    -o ufsfsyncmintime=SEC      force fsync before last file close when file was opened/created at least SEC seconds earlier (default: 0.0 - always do fsync before close)
    -o ufswritecachesize=N      \u8BBE\u7F6Ewrite\u7F13\u51B2\u533A\u5927\u5C0F\uFF0C\u5355\u4F4D:MiB (default: 256)
    -o ufsreadaheadsize=N       \u8BBE\u7F6Eread\u7F13\u51B2\u533A\u5927\u5C0F\uFF0C\u5355\u4F4D:MiB  (default: 256)
    -o ufsreadaheadleng=N       \u8BBE\u7F6Eread\u9884\u8BFB\u53D6\u7684\u6587\u4EF6\u5927\u5C0F\uFF0C\u5355\u4F4D\uFF1AB (default: 1048576)
    -o ufsreadaheadtrigger=N    \u8BBE\u7F6E\u6309\u987A\u5E8F\u8BFB\u53D6\u5F00\u542F\u9884\u8BFB\u7684\u5B57\u8282\u6570 (default: 10 * ufsreadaheadleng)
    -o ufserroronlostchunk      \u542F\u7528\u6570\u636E\u5757\u4E22\u5931\u65F6\u76F4\u63A5\u8FD4\u56DEio error
    -o ufserroronnospace        \u542F\u7528\u7A7A\u95F4\u4E0D\u8DB3\u65F6\u76F4\u63A5\u8FD4\u56DEio error
    -o ufsioretries=N           \u8BBE\u7F6EI/O\u9519\u8BEF\u8FD4\u56DE\u524D\u7684\u91CD\u8BD5\u6B21\u6570(default: 30)
    -o ufstimeout=N             \u8BBE\u7F6EI/O\u9519\u8BEF\u8FD4\u56DE\u524D\u7684\u6700\u5927\u8D85\u65F6\u79D2\u6570(default: 0 - which means no timeout)
    -o ufslogretry=N            \u5B9A\u4E49\u8D85\u8FC7\u591A\u5C11\u6B21I/O\u91CD\u8BD5\u64CD\u4F5C\u540E\u5BA2\u6237\u7AEF\u5F00\u59CB\u8BB0\u5F55\u65E5\u5FD7 (default: 5)
</code></pre><h4 id="_3-4-3-\u7CFB\u7EDF\u8C03\u4F18" tabindex="-1"><a class="header-anchor" href="#_3-4-3-\u7CFB\u7EDF\u8C03\u4F18" aria-hidden="true">#</a> 3.4.3 \u7CFB\u7EDF\u8C03\u4F18</h4><pre><code>    -o ufsrlimitnofile=N        \u8BBE\u7F6E\u5BA2\u6237\u7AEF\u8FDB\u7A0B\u5141\u8BB8\u4F7F\u7528\u7684fd\u53E5\u67C4\u4E0A\u9650(root\u8EAB\u4EFD\u8FD0\u884C)  (default: 100000)
    -o ufsnice=N                \u8FD0\u884C\u5B88\u62A4\u8FDB\u7A0B\u7684 nice \u7EA7\u522B (default: -19)
    -o ufsmemlock               \u5141\u8BB8\u9501\u5B9A\u5185\u5B58\u4EE5\u907F\u514D\u4F7F\u7528swap
    -o ufslimitarenas=N         \u5C06malloc arenas\u9650\u5236\u4E3A\u7ED9\u5B9A\u503C - \u9632\u6B62\u670D\u52A1\u5668\u4F7F\u7528\u5927\u91CF\u865A\u62DF\u5185\u5B58 (default: 4)
    -o ufsallowoomkiller        \u5141\u8BB8OOM Killer
</code></pre><h4 id="_3-4-4-\u901A\u7528\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_3-4-4-\u901A\u7528\u914D\u7F6E" aria-hidden="true">#</a> 3.4.4 \u901A\u7528\u914D\u7F6E</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    -o nonempty                 \u5141\u8BB8UFS\u6302\u8F7D\u975E\u7A7A\u76EE\u5F55
    -o ufscfgfile=CFGFILE       \u8BBE\u7F6E\u5BA2\u6237\u7AEF\u914D\u7F6E\u6587\u4EF6\u4EE5\u4FBF\u4ECE\u6587\u4EF6\u4E2D\u52A0\u8F7D\u914D\u7F6E\u53C2\u6570(default: /etc/ufs/ufsmount.cfg)
    -o ufsdebug                 \u8F93\u51FA\u8C03\u8BD5\u4FE1\u606F
    -o ufsmeta                  \u6302\u8F7Dmeta\u6587\u4EF6\u7CFB\u7EDF(\u5305\u542B\u56DE\u6536\u7AD9)
    -o ufsflattrash             \u8BBE\u7F6E\u56DE\u6536\u7AD9\u6302\u8F7D\u76EE\u5F55\u7684\u663E\u793A\u683C\u5F0F\u4E3Aflat\u6A21\u5F0F
    -o ufsdelayedinit           \u5141\u8BB8\u5BA2\u6237\u7AEF\u5F02\u6B65\u8FDE\u63A5UFS\u96C6\u7FA4(\u7279\u522B\u9002\u7528\u4E8E/etc/fstab\u5F00\u673A\u6302\u8F7D\u573A\u666F)
    -o ufsioretries=N           \u914D\u7F6E\u53D1\u751FIO\u5F02\u5E38\u65F6\u7684\u91CD\u8BD5\u7684\u6B21\u6570(default: 30)
    -o ufstimeout=N             \u914D\u7F6E\u53D1\u751FIO\u5F02\u5E38\u65F6\u7684\u6700\u5927\u8D85\u65F6\u65F6\u95F4 (default: 0 - \u8868\u793A\u4E0D\u9650\u5236\u8D85\u65F6)
    -o ufsmaster=HOST           \u6307\u5B9AUFS\u96C6\u7FA4IP(default: ufsmetaserver)
    -o ufsport=PORT             \u6307\u5B9AUFS\u96C6\u7FA4\u7F51\u7EDC\u7AEF\u53E3 (default: 9421)
    -o ufsbind=IP               \u6307\u5B9A\u5BA2\u6237\u7AEFbind\u7684\u7F51\u7EDC\u5730\u5740
    -o ufssubfolder=PATH        \u6307\u5B9A\u6302\u8F7D\u7684\u96C6\u7FA4\u76EE\u5F55 (default: /)
    -o ufspassword=PASSWORD     \u914D\u7F6E\u5BA2\u6237\u7AEF\u8BBF\u95EE\u5BC6\u7801
    -o ufspreflabels=LABELEXPR
    -o ufsnoxattrs              \u5173\u95EDxattr\u529F\u80FD
    -o ufsnoposixlocks          \u5173\u95EDposix locks (lockf + ioctl)\u529F\u80FD
    -o ufsnobsdlocks            \u5173\u95EDBSD locks (flock)\u529F\u80FD

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-5-\u5E94\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_3-5-\u5E94\u7528\u573A\u666F" aria-hidden="true">#</a> 3.5 \u5E94\u7528\u573A\u666F</h3><h4 id="_3-5-1-\u81EA\u52A8\u6302\u8F7D" tabindex="-1"><a class="header-anchor" href="#_3-5-1-\u81EA\u52A8\u6302\u8F7D" aria-hidden="true">#</a> 3.5.1 \u81EA\u52A8\u6302\u8F7D</h4><p>\u901A\u8FC7\u914D\u7F6E<code>/etc/fstab</code>\u53EF\u5B9E\u73B0 Unix/Linux \u5E73\u53F0\u4E0B\u5BA2\u6237\u7AEF\u81EA\u52A8\u6302\u8F7D\u3002</p><p>\u5728<code>/etc/fstab</code>\u4E2D\u589E\u52A0\u4EE5\u4E0B\u5185\u5BB9\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>#
# /etc/fstab
# Created by anaconda on Sun Apr  8 04:45:34 2018
#

ufsmount    /mnt/ufs   fuse ufssubfolder=/,ufsdelayedinit=1     0 0

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-5-2-\u67E5\u8BE2\u8FD0\u884C\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#_3-5-2-\u67E5\u8BE2\u8FD0\u884C\u53C2\u6570" aria-hidden="true">#</a> 3.5.2 \u67E5\u8BE2\u8FD0\u884C\u53C2\u6570</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>cat /mnt/ufs/.params
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u8F93\u51FA\u793A\u4F8B\u5982\u4E0B\uFF1A</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ufsmaster: ufsmetaserver
ufsport: 9421
ufsbind: (not defined)
ufsproxy: 127.0.0.1
ufssubfolder: /
ufspassword: (not defined)
ufspassfile: (not defined)
ufsmd5pass: (not defined)
ufspreflabels: (not defined)
ufsrlimitnofile: 100000
ufsnice: -19
ufssuid: (not defined)
ufsdev: (not defined)
ufsmemlock: (not defined)
ufslimitarenas: 4
ufsallowoomkiller: (not defined)
nonempty: (not defined)
ufswritecachesize: 256
ufsreadaheadsize: 256
ufsreadaheadleng: 1048576
ufsreadaheadtrigger: 10485760
ufserroronlostchunk: (not defined)
ufserroronnospace: (not defined)
ufsioretries: 3
ufstimeout: 1
ufslogretry: 5
ufsdebug: (not defined)
ufsmeta: (not defined)
ufsflattrash: (not defined)
ufsdelayedinit: (defined)
ufsdonotrememberpassword: (not defined)
ufscachefiles: (not defined)
ufsnoxattrs: (not defined)
ufsnoposixlocks: (not defined)
ufsnobsdlocks: (not defined)
ufscachemode: (not defined)
ufsmkdircopysgid: 1
ufssugidclearmode: (not defined)
ufsattrcacheto: 1.000
ufsxattrcacheto: 30.000
ufsentrycacheto: 0.000
ufsdirentrycacheto: 1.000
ufsnegentrycacheto: 0.000
ufsgroupscacheto: 300.000
ufsfsyncmintime: 0.000
ufsfsyncbeforeclose: (not defined)
working_keep_cache_mode: AUTO
working_sugid_clear_mode: EXT
no_std_mount_options: (not defined)
master_sesflags: 24
master_umaskval: 0000
master_maproot: 0:0
master_mapall: 0:0
master_goallimit: 1:9
master_trashlimit: 0:4294967295
master_disables: 0x0
ufs_master_version: 4.0.10
ufs_mount_version: 4.0.10-1
ufs_mount_build: 20210712
compiled_with_fuse: 3.2
fuse_library_version: 3.2
kernel_fuse_protocol: 7.22
kernel_capability_mask: 0xFFDB
kernel_defaults_mask: 0xFC0B
kernel_working_mask: 0xEC5B
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-5-3-\u67E5\u770B\u64CD\u4F5C\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#_3-5-3-\u67E5\u770B\u64CD\u4F5C\u65E5\u5FD7" aria-hidden="true">#</a> 3.5.3 \u67E5\u770B\u64CD\u4F5C\u65E5\u5FD7</h4><p>\u4EE5<code>/mnt/ufs</code>\u4E3A\u5BA2\u6237\u7AEF\u6302\u8F7D\u70B9\u4E3A\u793A\u4F8B\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>cat /mnt/ufs/.oplog
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u8F93\u51FA\u793A\u4F8B\u5982\u4E0B\uFF1A</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>08.18 17:48:30.986145: uid:0 gid:0 pid:27219 cmd:readdirplus (165735,4096,1414) [handle:00000007]: OK (3984)
08.18 17:48:30.986247: uid:0 gid:0 pid:27219 cmd:readdir (165735,4096,2493) [handle:00000007]: OK (880)
08.18 17:48:30.986307: uid:0 gid:0 pid:27219 cmd:readdir (165735,4096,2493) [handle:00000007]: OK (no data)
08.18 17:48:30.986682: uid:0 gid:0 pid:0 cmd:releasedir (165735) [handle:00000000]: OK
08.18 17:48:30.986687: uid:0 gid:0 pid:0 cmd:releasedir (165731) [handle:00000000]: OK
08.18 17:48:30.986733: uid:0 gid:0 pid:27219 cmd:getattr (136392) [no handle] (using open dir cache): OK (0.0,[drwxr-xr-x:0040755,3,0,0,1628796967,1628233002,1628233002,2000181])
08.18 17:48:30.987260: uid:0 gid:0 pid:27219 cmd:opendir (136392): OK [handle:00000002]
08.18 17:48:30.987344: uid:0 gid:0 pid:27219 cmd:getattr (136392) [no handle] (using open dir cache): OK (0.0,[drwxr-xr-x:0040755,3,0,0,1628796967,1628233002,1628233002,2000181])
08.18 17:48:30.987388: uid:0 gid:0 pid:27219 cmd:getattr (136392) [no handle] (using open dir cache): OK (0.0,[drwxr-xr-x:0040755,3,0,0,1628796967,1628233002,1628233002,2000181])
08.18 17:48:30.987940: uid:0 gid:0 pid:27219 cmd:readdirplus (136392,4096,137) [handle:00000002]: OK (488)
08.18 17:48:30.988008: uid:0 gid:0 pid:27219 cmd:readdir (136392,4096,137) [handle:00000002]: OK (no data)
...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,115);function c(o,v){return s(),r("div",null,[l,n(" more "),u])}const b=t(i,[["render",c],["__file","ufs\u6838\u5FC3\u7EC4\u4EF6.html.vue"]]);export{b as default};
