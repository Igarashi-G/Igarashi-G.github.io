import{_ as i}from"./plugin-vueexport-helper.2444895f.js";import{o as p,c,a as n,b as a,d as e,e as l,f as t,r as o}from"./app.4d4f0a46.js";const r={},u={href:"https://www.samba.org/ftp/rsync/rsync.html",target:"_blank",rel:"noopener noreferrer"},d=t(`<h2 id="_1-\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#_1-\u8BF4\u660E" aria-hidden="true">#</a> 1. \u8BF4\u660E</h2><h3 id="_1-1-\u7528\u5904" tabindex="-1"><a class="header-anchor" href="#_1-1-\u7528\u5904" aria-hidden="true">#</a> 1.1 \u7528\u5904</h3><p>\u5B9E\u73B0 <strong>\u672C\u5730\u4E3B\u673A</strong> \u548C <strong>\u8FDC\u7A0B\u4E3B\u673A</strong> \u4E0A\u7684 <strong>\u6587\u4EF6\u540C\u6B65\uFF08\u63A8\u62C9\uFF09</strong> \u3001<strong>\u672C\u5730\u4E0D\u540C\u8DEF\u5F84\u7684\u6587\u4EF6\u540C\u6B65</strong>\uFF0C\u6D89\u53CA\u4E86 \u6E90\u6587\u4EF6 \u548C \u76EE\u6807\u6587\u4EF6 \u7684\u6982\u5FF5\uFF0C\u8FD8\u6D89\u53CA\u4E86\u4EE5\u54EA\u8FB9\u6587\u4EF6\u4E3A\u540C\u6B65\u57FA\u51C6</p><ul><li><p><strong>\u5B9E\u73B0\u589E\u91CF\u5907\u4EFD\u7684\u5DE5\u5177\uFF1A</strong> \u914D\u5408\u4EFB\u52A1\u8BA1\u5212\uFF0C<strong>rsync</strong> \u80FD\u5B9E\u73B0\u5B9A\u65F6\u6216\u95F4\u9694\u540C\u6B65\uFF0C\u914D\u5408 <strong>inotify</strong> \u6216 <strong>sersync</strong>\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u89E6\u53D1\u5F0F\u7684 <strong>\u5B9E\u65F6\u540C\u6B65</strong></p></li><li><p><strong>\u5B9E\u73B0\u540C\u6B65 scp\u3001cp\u3001rm\u3001ls -l \u7B49\u529F\u80FD\uFF08<em>\u4E0D\u652F\u6301 \u8FDC\u7A0B \u5230 \u8FDC\u7A0B \u7684\u62F7\u8D1D\uFF0C\u4F46scp\u652F\u6301</em>\uFF09\uFF1A</strong> \u6700\u7EC8/\u539F\u59CB\u76EE\u7684\u662F <strong>\u5B9E\u73B0\u4E24\u7AEF\u4E3B\u673A\u7684\u6587\u4EF6</strong> \u540C\u6B65</p><blockquote><p>\u5B9E\u73B0 <strong>scp/cp/rm</strong> \u7B49\u529F\u80FD\u4EC5\u4EC5\u53EA\u662F\u540C\u6B65\u7684\u8F85\u52A9\u624B\u6BB5\uFF0C\u5B9E\u73B0\u57FA\u4E8E\u590D\u6742\u7B97\u6CD5\uFF0C\u5E73\u65F6\u4F7F\u7528\u5176\u5B9E\u73B0\u7B80\u5355\u7684\u5907\u4EFD\u3001\u540C\u6B65\u7B49\u529F\u80FD\u8DB3\u77E3\uFF0C\u53EF\u4F7F\u7528 <code>&quot;-vvvv&quot;</code> \u5206\u6790\u6267\u884C\u8FC7\u7A0B</p></blockquote></li></ul><h3 id="_1-2-\u7EC4\u6210\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_1-2-\u7EC4\u6210\u6A21\u5F0F" aria-hidden="true">#</a> 1.2 \u7EC4\u6210\u6A21\u5F0F</h3><p>\u5728\u540C\u6B65\u8FC7\u7A0B\u4E2D\u5FC5\u7136\u4F1A\u6D89\u53CA\u5230\u6E90\u548C\u76EE\u6807\u4E24\u6587\u4EF6\u4E4B\u95F4 <strong>\u7248\u672C\u63A7\u5236\u95EE\u9898\uFF1A</strong></p><ul><li>\u662F\u5426\u8981\u5220\u9664\u6E90\u4E3B\u673A\u4E0A\u6CA1\u6709\u4F46\u76EE\u6807\u4E0A\u591A\u51FA\u6765\u7684\u6587\u4EF6\uFF1F</li><li>\u6807\u6587\u4EF6\u6BD4\u6E90\u6587\u4EF6\u66F4\u65B0\uFF08<em>newer than source</em>\uFF09\u65F6\u662F\u5426\u4ECD\u8981\u4FDD\u6301\u540C\u6B65\uFF1F</li><li>\u9047\u5230\u8F6F\u94FE\u63A5\u65F6\u662F \u62F7\u8D1D\u8F6F\u94FE\u63A5\u672C\u8EAB \u8FD8\u662F\u62F7 \u8D1D\u8F6F\u94FE\u63A5\u6240\u6307\u5411\u7684\u6587\u4EF6\uFF1F</li><li>\u76EE\u6807\u6587\u4EF6\u5DF2\u5B58\u5728\u65F6\u662F\u5426\u8981\u5148\u5BF9\u5176\u505A\u4E2A\u5907\u4EFD\uFF1F</li></ul><p><strong>rsync\u540C\u6B65\u8FC7\u7A0B\u4E2D\u7531\u4E24\u90E8\u5206\u6A21\u5F0F\u7EC4\u6210\uFF1A\u4EE5\u53CA\u6587\u4EF6\u540C\u6B65\u65F6\u7684\u540C\u6B65\u6A21\u5F0F\u3002</strong></p><ol><li><p>\u51B3\u5B9A\u54EA\u4E9B\u6587\u4EF6\u9700\u8981\u540C\u6B65\u7684 <strong>\u68C0\u67E5\u6A21\u5F0F\uFF08<em>\u7279\u6B8A\u9700\u6C42\uFF0C\u5F71\u54CD\u6027\u80FD</em>\uFF09</strong></p><p>\u6309\u7167 <strong>\u6307\u5B9A\u89C4\u5219</strong> \u6765\u68C0\u67E5\u54EA\u4E9B\u6587\u4EF6\u9700\u8981\u88AB\u540C\u6B65\uFF0C\u4F8B\u5982\u54EA\u4E9B\u6587\u4EF6\u662F <strong>\u660E\u786E\u88AB\u6392\u9664\u4E0D\u4F20\u8F93\u7684</strong> \uFF0C<strong>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Crsync\u4F7F\u7528&quot;quick check&quot;\u7B97\u6CD5\u5FEB\u901F\u68C0\u67E5\u6E90\u6587\u4EF6\u548C\u76EE\u6807\u6587\u4EF6\u7684\u5927\u5C0F\u3001mtime\uFF08<em>\u4FEE\u6539\u65F6\u95F4</em>\uFF09\u662F\u5426\u4E00\u81F4\uFF0C\u5982\u679C\u4E0D\u4E00\u81F4\u5219\u9700\u8981\u4F20\u8F93</strong></p><blockquote><p>\u4E5F\u53EF\u4EE5\u901A\u8FC7\u6307\u5B9A\u9009\u9879\u6539\u53D8 <strong>quick check</strong> \u7684\u68C0\u67E5\u6A21\u5F0F\uFF0C\u5982 <code>&quot;--size-only&quot;</code> \u9009\u9879\u8868\u793A\u4EC5\u68C0\u67E5\u6587\u4EF6\u5927\u5C0F\u4E0D\u540C\u7684\u6587\u4EF6\u4F5C\u4E3A\u5F85\u4F20\u8F93\u6587\u4EF6\uFF0C\u68C0\u67E5\u6A21\u5F0F\u7684\u81EA\u5B9A\u4E49\u6027\u662F\u975E\u5E38\u6709\u5F39\u6027</p></blockquote></li><li><p>\u6587\u4EF6\u540C\u6B65\u65F6\u7684 <strong>\u540C\u6B65\u6A21\u5F0F\uFF08<em>\u5E38\u89C1</em>\uFF09</strong></p><p>\u5728\u6587\u4EF6\u786E\u5B9A\u8981\u88AB\u540C\u6B65\u540E\uFF0C\u5728\u540C\u6B65\u8FC7\u7A0B <strong>\u53D1\u751F\u4E4B\u524D\u8981\u505A\u54EA\u4E9B\u989D\u5916\u5DE5\u4F5C</strong>\uFF0C\u5982\u662F\u5426\u8981\u5148\u5220\u9664 \u6E90\u4E3B\u673A\u4E0A\u6CA1\u6709 \u4F46 \u76EE\u6807\u4E3B\u673A\u4E0A\u6709 \u7684\u6587\u4EF6\u3001\u662F\u5426\u8981\u5148\u5907\u4EFD \u5DF2\u5B58\u5728\u7684\u76EE\u6807\u6587\u4EF6\uFF0C\u662F\u5426\u8981\u8FFD\u8E2A\u94FE\u63A5\u6587\u4EF6\u7B49\u989D\u5916\u64CD\u4F5C</p></li></ol><h3 id="_1-3-\u5DE5\u4F5C\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_1-3-\u5DE5\u4F5C\u65B9\u5F0F" aria-hidden="true">#</a> 1.3 \u5DE5\u4F5C\u65B9\u5F0F</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u672C\u5730\u540C\u6B65\uFF08\u7BA1\u9053sh\u901A\u4FE1\uFF09</span>
Local:  <span class="token function">rsync</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">..</span>.<span class="token punctuation">]</span> SRC<span class="token punctuation">..</span>. <span class="token punctuation">[</span>DEST<span class="token punctuation">]</span>

<span class="token comment"># \u672C\u5730\u4F7F\u7528shell \u548C \u8FDC\u7A0B\u4E3B\u673A\u901A\u4FE1\uFF08\u7BA1\u9053sh\u901A\u4FE1\uFF09</span>
Access via remote shell:
  Pull: <span class="token function">rsync</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token environment constant">USER</span>@<span class="token punctuation">]</span>HOST:SRC<span class="token punctuation">..</span>. <span class="token punctuation">[</span>DEST<span class="token punctuation">]</span>
  Push: <span class="token function">rsync</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">..</span>.<span class="token punctuation">]</span> SRC<span class="token punctuation">..</span>. <span class="token punctuation">[</span><span class="token environment constant">USER</span>@<span class="token punctuation">]</span>HOST:DEST

<span class="token comment"># \u672C\u5730\u4E3B\u673A\u901A\u8FC7\u7F51\u7EDC\u5957\u63A5\u5B57 \u8FDE\u63A5 \u8FDC\u7A0B\u4E3B\u673A\u4E0A\u7684rsync daemon\uFF08\u8FDC\u7A0B\u9700 rsync \u8D77\u7AEF\u53E3\uFF09</span>
Access via <span class="token function">rsync</span> daemon:
  Pull: <span class="token function">rsync</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token environment constant">USER</span>@<span class="token punctuation">]</span>HOST::SRC<span class="token punctuation">..</span>. <span class="token punctuation">[</span>DEST<span class="token punctuation">]</span>
        <span class="token function">rsync</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">..</span>.<span class="token punctuation">]</span> rsync://<span class="token punctuation">[</span><span class="token environment constant">USER</span>@<span class="token punctuation">]</span>HOST<span class="token punctuation">[</span>:PORT<span class="token punctuation">]</span>/SRC<span class="token punctuation">..</span>. <span class="token punctuation">[</span>DEST<span class="token punctuation">]</span>
  Push: <span class="token function">rsync</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">..</span>.<span class="token punctuation">]</span> SRC<span class="token punctuation">..</span>. <span class="token punctuation">[</span><span class="token environment constant">USER</span>@<span class="token punctuation">]</span>HOST::DEST
        <span class="token function">rsync</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">..</span>.<span class="token punctuation">]</span> SRC<span class="token punctuation">..</span>. rsync://<span class="token punctuation">[</span><span class="token environment constant">USER</span>@<span class="token punctuation">]</span>HOST<span class="token punctuation">[</span>:PORT<span class="token punctuation">]</span>/DEST
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7B2C\u4E00\u4E2A\u8DEF\u5F84\u53C2\u6570 <strong>\u4E00\u5B9A\u662F\u6E90\u6587\u4EF6\u8DEF\u5F84</strong>\uFF0C\u5373\u4F5C\u4E3A\u540C\u6B65\u57FA\u51C6\u7684\u4E00\u65B9\uFF0C\u53EF <strong>\u6307\u5B9A\u591A\u4E2A</strong></p><p>\u6700\u540E\u4E00\u4E2A\u8DEF\u5F84\u53C2\u6570 <strong>\u662F\u76EE\u6807\u6587\u4EF6\u8DEF\u5F84</strong>\uFF0C\u4E5F\u5C31\u662F\u88AB\u540C\u6B65\u7684\uFF0C\u53EF\u672C\u5730\u3001\u8FDC\u7A0B</p><p>\u82E5\u53EA\u6709\u4E00\u4E2A\u8DEF\u5F84\uFF0C\u7B49\u6548\u4E8E <code>ls -l</code></p><h2 id="_2-\u57FA\u7840\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_2-\u57FA\u7840\u4F7F\u7528" aria-hidden="true">#</a> 2. \u57FA\u7840\u4F7F\u7528</h2><h3 id="_2-1-\u7B80\u5355\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#_2-1-\u7B80\u5355\u793A\u4F8B" aria-hidden="true">#</a> 2.1 \u7B80\u5355\u793A\u4F8B</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u5728\u672C\u5730\u540C\u6B65</span>
$ <span class="token function">rsync</span> <span class="token parameter variable">-r</span> /etc/fstab /tmp                

<span class="token comment"># \u5C06\u672C\u5730/etc \u76EE\u5F55 \u62F7\u8FDC\u7A0B /tmp \u4E0B\uFF0C\u4FDD\u8FDC\u7A0B /tmp \u548C\u672C\u5730 /etc \u540C\u6B65</span>
$ <span class="token function">rsync</span> <span class="token parameter variable">-r</span> /etc <span class="token number">172.16</span>.10.5:/tmp       

<span class="token comment"># \u5C06\u8FDC\u7A0B /etc \u76EE\u5F55 \u62F7\u672C\u5730 /tmp \u4E0B\uFF0C\u4FDD\u672C\u5730 /tmp \u548C\u8FDC\u7A0B /etc \u540C\u6B65</span>
$ <span class="token function">rsync</span> <span class="token parameter variable">-r</span> <span class="token number">172.16</span>.10.5:/etc /tmp       

<span class="token comment"># \u5217\u51FA \u672C\u5730 /etc/ \u76EE\u5F55\u4E0B\u7684\u6587\u4EF6\u5217\u8868</span>
$ <span class="token function">rsync</span> /etc/                          

<span class="token comment"># \u5217\u51FA \u8FDC\u7A0B\u4E3B\u673A\u4E0A /tmp/ \u76EE\u5F55\u4E0B\u7684\u6587\u4EF6\u5217\u8868</span>
$ <span class="token function">rsync</span> <span class="token number">172.16</span>.10.5:/tmp/              
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container info"><p class="custom-container-title">\u5173\u4E8E\u5C3E\u659C\u7EBF</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">rsync</span> <span class="token parameter variable">-a</span> /etc/ /tmp
$ <span class="token function">rsync</span> <span class="token parameter variable">-a</span> /etc /tmp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0D\u5E26\u5C3E\u659C\u7EBF\u662F\u5305\u542B\u6574\u4E2A\u76EE\u5F55\uFF0C\u5373 <strong>etc</strong> \u672C\u8EAB</p><p>\u5E26\u5C3E\u659C\u7EBF\u662F\u53EA\u52A8 <strong>/etc</strong> \u76EE\u5F55\u4E0B\u7684\u6587\u4EF6</p></div><h2 id="_2-2-\u9009\u9879\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#_2-2-\u9009\u9879\u8BF4\u660E" aria-hidden="true">#</a> 2.2 \u9009\u9879\u8BF4\u660E</h2>`,19),v={href:"https://www.cnblogs.com/f-ck-need-u/p/7221713.html",target:"_blank",rel:"noopener noreferrer"},m=t(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>-v\uFF1A\u663E\u793Arsync\u8FC7\u7A0B\u4E2D\u8BE6\u7EC6\u4FE1\u606F\u3002\u53EF\u4EE5\u4F7F\u7528<span class="token string">&quot;-vvvv&quot;</span>\u83B7\u53D6\u66F4\u8BE6\u7EC6\u4FE1\u606F\u3002
-P\uFF1A\u663E\u793A\u6587\u4EF6\u4F20\u8F93\u7684\u8FDB\u5EA6\u4FE1\u606F\u3002<span class="token punctuation">(</span>\u5B9E\u9645\u4E0A<span class="token string">&quot;-P&quot;</span><span class="token operator">=</span><span class="token string">&quot;--partial --progress&quot;</span>\uFF0C\u5176\u4E2D\u7684<span class="token string">&quot;--progress&quot;</span>\u624D\u662F\u663E\u793A\u8FDB\u5EA6\u4FE1\u606F\u7684<span class="token punctuation">)</span>\u3002
<span class="token parameter variable">-n</span> --dry-run  \uFF1A\u4EC5\u6D4B\u8BD5\u4F20\u8F93\uFF0C\u800C\u4E0D\u5B9E\u9645\u4F20\u8F93\u3002\u5E38\u548C<span class="token string">&quot;-vvvv&quot;</span>\u914D\u5408\u4F7F\u7528\u6765\u67E5\u770Brsync\u662F\u5982\u4F55\u5DE5\u4F5C\u7684\u3002
<span class="token parameter variable">-a</span> <span class="token parameter variable">--archive</span>  \uFF1A\u5F52\u6863\u6A21\u5F0F\uFF0C\u8868\u793A\u9012\u5F52\u4F20\u8F93\u5E76\u4FDD\u6301\u6587\u4EF6\u5C5E\u6027\u3002\u7B49\u540C\u4E8E<span class="token string">&quot;-rtopgDl&quot;</span>\u3002
<span class="token parameter variable">-r</span> --recursive\uFF1A\u9012\u5F52\u5230\u76EE\u5F55\u4E2D\u53BB\u3002
<span class="token parameter variable">-t</span> --times\uFF1A\u4FDD\u6301mtime\u5C5E\u6027\u3002
<span class="token parameter variable">-o</span> --owner\uFF1A\u4FDD\u6301owner\u5C5E\u6027<span class="token punctuation">(</span>\u5C5E\u4E3B<span class="token punctuation">)</span>\u3002
<span class="token parameter variable">-g</span> --group\uFF1A\u4FDD\u6301group\u5C5E\u6027<span class="token punctuation">(</span>\u5C5E\u7EC4<span class="token punctuation">)</span>\u3002
<span class="token parameter variable">-p</span> --perms\uFF1A\u4FDD\u6301perms\u5C5E\u6027<span class="token punctuation">(</span>\u6743\u9650\uFF0C\u4E0D\u5305\u62EC\u7279\u6B8A\u6743\u9650<span class="token punctuation">)</span>\u3002
<span class="token parameter variable">-D</span>        \uFF1A\u662F<span class="token string">&quot;--device --specials&quot;</span>\u9009\u9879\u7684\u7EC4\u5408\uFF0C\u5373\u4E5F\u62F7\u8D1D\u8BBE\u5907\u6587\u4EF6\u548C\u7279\u6B8A\u6587\u4EF6\u3002
<span class="token parameter variable">-l</span> --links\uFF1A\u5982\u679C\u6587\u4EF6\u662F\u8F6F\u94FE\u63A5\u6587\u4EF6\uFF0C\u5219\u62F7\u8D1D\u8F6F\u94FE\u63A5\u672C\u8EAB\u800C\u975E\u8F6F\u94FE\u63A5\u6240\u6307\u5411\u7684\u5BF9\u8C61\u3002
<span class="token parameter variable">-z</span>        \uFF1A\u4F20\u8F93\u65F6\u8FDB\u884C\u538B\u7F29\u63D0\u9AD8\u6548\u7387\u3002
<span class="token parameter variable">-R</span> --relative\uFF1A\u4F7F\u7528\u76F8\u5BF9\u8DEF\u5F84\u3002\u610F\u5473\u7740\u5C06\u547D\u4EE4\u884C\u4E2D\u6307\u5B9A\u7684\u5168\u8DEF\u5F84\u800C\u975E\u8DEF\u5F84\u6700\u5C3E\u90E8\u7684\u6587\u4EF6\u540D\u53D1\u9001\u7ED9\u670D\u52A1\u7AEF\uFF0C\u5305\u62EC\u5B83\u4EEC\u7684\u5C5E\u6027\u3002\u7528\u6CD5\u89C1\u4E0B\u6587\u793A\u4F8B\u3002
--size-only \uFF1A\u9ED8\u8BA4\u7B97\u6CD5\u662F\u68C0\u67E5\u6587\u4EF6\u5927\u5C0F\u548Cmtime\u4E0D\u540C\u7684\u6587\u4EF6\uFF0C\u4F7F\u7528\u6B64\u9009\u9879\u5C06\u53EA\u68C0\u67E5\u6587\u4EF6\u5927\u5C0F\u3002
<span class="token parameter variable">-u</span> <span class="token parameter variable">--update</span> \uFF1A\u4EC5\u5728\u6E90mtime\u6BD4\u76EE\u6807\u5DF2\u5B58\u5728\u6587\u4EF6\u7684mtime\u65B0\u65F6\u624D\u62F7\u8D1D\u3002\u6CE8\u610F\uFF0C\u8BE5\u9009\u9879\u662F\u63A5\u6536\u7AEF\u5224\u65AD\u7684\uFF0C\u4E0D\u4F1A\u5F71\u54CD\u5220\u9664\u884C\u4E3A\u3002
<span class="token parameter variable">-d</span> <span class="token parameter variable">--dirs</span>   \uFF1A\u4EE5\u4E0D\u9012\u5F52\u7684\u65B9\u5F0F\u62F7\u8D1D\u76EE\u5F55\u672C\u8EAB\u3002\u9ED8\u8BA4\u9012\u5F52\u65F6\uFF0C\u5982\u679C\u6E90\u4E3A<span class="token string">&quot;dir1/file1&quot;</span>\uFF0C\u5219\u4E0D\u4F1A\u62F7\u8D1Ddir1\u76EE\u5F55\uFF0C\u4F7F\u7528\u8BE5\u9009\u9879\u5C06\u62F7\u8D1Ddir1\u4F46\u4E0D\u62F7\u8D1Dfile1\u3002
--max-size  \uFF1A\u9650\u5236rsync\u4F20\u8F93\u7684\u6700\u5927\u6587\u4EF6\u5927\u5C0F\u3002\u53EF\u4EE5\u4F7F\u7528\u5355\u4F4D\u540E\u7F00\uFF0C\u8FD8\u53EF\u4EE5\u662F\u4E00\u4E2A\u5C0F\u6570\u503C<span class="token punctuation">(</span>\u4F8B\u5982\uFF1A<span class="token string">&quot;--max-size=1.5m&quot;</span><span class="token punctuation">)</span>
--min-size  \uFF1A\u9650\u5236rsync\u4F20\u8F93\u7684\u6700\u5C0F\u6587\u4EF6\u5927\u5C0F\u3002\u8FD9\u53EF\u4EE5\u7528\u4E8E\u7981\u6B62\u4F20\u8F93\u5C0F\u6587\u4EF6\u6216\u90A3\u4E9B\u5783\u573E\u6587\u4EF6\u3002
<span class="token parameter variable">--exclude</span>   \uFF1A\u6307\u5B9A\u6392\u9664\u89C4\u5219\u6765\u6392\u9664\u4E0D\u9700\u8981\u4F20\u8F93\u7684\u6587\u4EF6\u3002
<span class="token parameter variable">--delete</span>    \uFF1A\u4EE5SRC\u4E3A\u4E3B\uFF0C\u5BF9DEST\u8FDB\u884C\u540C\u6B65\u3002\u591A\u5219\u5220\u4E4B\uFF0C\u5C11\u5219\u8865\u4E4B\u3002\u6CE8\u610F<span class="token string">&quot;--delete&quot;</span>\u662F\u5728\u63A5\u6536\u7AEF\u6267\u884C\u7684\uFF0C\u6240\u4EE5\u5B83\u662F\u5728
            \uFF1Aexclude/include\u89C4\u5219\u751F\u6548\u4E4B\u540E\u624D\u6267\u884C\u7684\u3002
<span class="token parameter variable">-b</span> <span class="token parameter variable">--backup</span> \uFF1A\u5BF9\u76EE\u6807\u4E0A\u5DF2\u5B58\u5728\u7684\u6587\u4EF6\u505A\u4E00\u4E2A\u5907\u4EFD\uFF0C\u5907\u4EFD\u7684\u6587\u4EF6\u540D\u540E\u9ED8\u8BA4\u4F7F\u7528<span class="token string">&quot;~&quot;</span>\u505A\u540E\u7F00\u3002
--backup-dir\uFF1A\u6307\u5B9A\u5907\u4EFD\u6587\u4EF6\u7684\u4FDD\u5B58\u8DEF\u5F84\u3002\u4E0D\u6307\u5B9A\u65F6\u9ED8\u8BA4\u548C\u5F85\u5907\u4EFD\u6587\u4EF6\u4FDD\u5B58\u5728\u540C\u4E00\u76EE\u5F55\u4E0B\u3002
<span class="token parameter variable">-e</span>          \uFF1A\u6307\u5B9A\u6240\u8981\u4F7F\u7528\u7684\u8FDC\u7A0Bshell\u7A0B\u5E8F\uFF0C\u9ED8\u8BA4\u4E3Assh\u3002
<span class="token parameter variable">--port</span>      \uFF1A\u8FDE\u63A5daemon\u65F6\u4F7F\u7528\u7684\u7AEF\u53E3\u53F7\uFF0C\u9ED8\u8BA4\u4E3A873\u7AEF\u53E3\u3002
--password-file\uFF1Adaemon\u6A21\u5F0F\u65F6\u7684\u5BC6\u7801\u6587\u4EF6\uFF0C\u53EF\u4EE5\u4ECE\u4E2D\u8BFB\u53D6\u5BC6\u7801\u5B9E\u73B0\u975E\u4EA4\u4E92\u5F0F\u3002\u6CE8\u610F\uFF0C\u8FD9\u4E0D\u662F\u8FDC\u7A0Bshell\u8BA4\u8BC1\u7684\u5BC6\u7801\uFF0C\u800C\u662Frsync\u6A21\u5757\u8BA4\u8BC1\u7684\u5BC6\u7801\u3002
<span class="token parameter variable">-W</span> --whole-file\uFF1Arsync\u5C06\u4E0D\u518D\u4F7F\u7528\u589E\u91CF\u4F20\u8F93\uFF0C\u800C\u662F\u5168\u91CF\u4F20\u8F93\u3002\u5728\u7F51\u7EDC\u5E26\u5BBD\u9AD8\u4E8E\u78C1\u76D8\u5E26\u5BBD\u65F6\uFF0C\u8BE5\u9009\u9879\u6BD4\u589E\u91CF\u4F20\u8F93\u66F4\u9AD8\u6548\u3002
<span class="token parameter variable">--existing</span>  \uFF1A\u8981\u6C42\u53EA\u66F4\u65B0\u76EE\u6807\u7AEF\u5DF2\u5B58\u5728\u7684\u6587\u4EF6\uFF0C\u76EE\u6807\u7AEF\u8FD8\u4E0D\u5B58\u5728\u7684\u6587\u4EF6\u4E0D\u4F20\u8F93\u3002\u6CE8\u610F\uFF0C\u4F7F\u7528\u76F8\u5BF9\u8DEF\u5F84\u65F6\u5982\u679C\u4E0A\u5C42\u76EE\u5F55\u4E0D\u5B58\u5728\u4E5F\u4E0D\u4F1A\u4F20\u8F93\u3002
--ignore-existing\uFF1A\u8981\u6C42\u53EA\u66F4\u65B0\u76EE\u6807\u7AEF\u4E0D\u5B58\u5728\u7684\u6587\u4EF6\u3002\u548C<span class="token string">&quot;--existing&quot;</span>\u7ED3\u5408\u4F7F\u7528\u6709\u7279\u6B8A\u529F\u80FD\uFF0C\u89C1\u4E0B\u6587\u793A\u4F8B\u3002
--remove-source-files\uFF1A\u8981\u6C42\u5220\u9664\u6E90\u7AEF\u5DF2\u7ECF\u6210\u529F\u4F20\u8F93\u7684\u6587\u4EF6\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6700\u5E38\u7528\u7684\u9009\u9879\u7EC4\u5408\u662F <code>&quot;avz&quot;</code>\uFF0C\u5373\u538B\u7F29\u548C\u663E\u793A\u90E8\u5206\u4FE1\u606F\uFF0C\u5E76\u4EE5\u5F52\u6863\u6A21\u5F0F\u4F20\u8F93</p><div class="custom-container warning"><p class="custom-container-title">\u6CE8\u610F</p><p>\u5F3A\u70C8\u5EFA\u8BAE\u4EFB\u4F55\u65F6\u5019\u90FD\u52A0\u4E0A<code>&quot;-t&quot;</code>\uFF0C\u5426\u5219\u76EE\u6807\u6587\u4EF6 <strong>mtime</strong> \u4F1A\u8BBE\u7F6E\u4E3A\u7CFB\u7EDF\u65F6\u95F4\uFF0C\u5BFC\u81F4\u4E0B\u6B21\u66F4\u65B0\u68C0\u67E5\u51FA **mtime ** \u4E0D\u540C\u4ECE\u800C\u5BFC\u81F4\u589E\u91CF\u4F20\u8F93\u65E0\u6548</p></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">BASE_ISO_PATH</span><span class="token operator">=</span><span class="token string">&quot;/media/cdrom&quot;</span>
<span class="token assign-left variable">ISO_BUILD_PATH</span><span class="token operator">=</span><span class="token string">&quot;/tmp/iso-build&quot;</span>

<span class="token comment"># \u4EE5 /media/cdrom \u4E3A\u6E90\uFF0C\u589E\u91CF\uFF08\u66F4\u65B0\uFF09\u540C\u6B65\u5230 /tmp/iso-build \u4E0B\uFF0C\u7528\u5F52\u6863\u6A21\u5F0F\u4F20\u8F93</span>
$ <span class="token function">rsync</span> <span class="token parameter variable">-au</span> <span class="token parameter variable">--exclude</span><span class="token operator">=</span>repodata <span class="token parameter variable">--exclude</span><span class="token operator">=</span>Packages <span class="token string">&quot;<span class="token variable">\${BASE_ISO_PATH}</span>/&quot;</span> <span class="token string">&quot;<span class="token variable">\${ISO_BUILD_PATH}</span>&quot;</span>

<span class="token comment"># \u540C\u6B65 \u5E76 \u6E05\u7A7A\u65E0\u6548\u7684 release \u6587\u4EF6</span>
$ <span class="token function">rsync</span> <span class="token parameter variable">-au</span> <span class="token parameter variable">--delete</span> <span class="token string">&quot;release&quot;</span> <span class="token string">&quot;<span class="token variable">\${ISO_BUILD_PATH}</span>&quot;</span> 

<span class="token comment"># \u5C06 /var/log/anaconda \u4E0B\u7684\u6587\u4EF6\u4E3A\u6E90\uFF0C\u5907\u4EFD\u5230 /tmp \u76EE\u5F55\u4E0B</span>
$ <span class="token function">rsync</span> <span class="token parameter variable">-R</span> <span class="token parameter variable">-r</span> <span class="token parameter variable">--backup</span> /var/log/anaconda /tmp
\`\u82E5\u4E0D\u4F7F\u7528 <span class="token string">&quot;--suffix&quot;</span> \u6307\u5B9A\u540E\u7F00\uFF0C\u5907\u4EFD\u6587\u4EF6\u9ED8\u8BA4\u4F7F\u7528 <span class="token string">&quot;~&quot;</span> \u505A\u540E\u7F00

<span class="token comment"># \u53EF\u4EE5\u4F7F\u7528 &quot;--backup-dir&quot; \u6307\u5B9A\u5907\u4EFD\u6587\u4EF6\u4FDD\u5B58\u8DEF\u5F84\uFF0C\u4F46\u8981\u6C42\u4FDD\u5B58\u8DEF\u5F84\u5FC5\u987B\u5B58\u5728</span>
$ <span class="token function">mkdir</span> /tmp/log_back
$ <span class="token function">rsync</span> <span class="token parameter variable">-R</span> <span class="token parameter variable">-r</span> <span class="token parameter variable">--backup</span> --backup-dir<span class="token operator">=</span>/tmp/log_back /var/log/anaconda /tmp
$ tree /tmp/log_back/
    /tmp/log_back/
    \u2514\u2500\u2500 log
        \u2514\u2500\u2500 anaconda
            \u251C\u2500\u2500 anaconda.log
            \u251C\u2500\u2500 ifcfg.log
            \u251C\u2500\u2500 journal.log
            \u251C\u2500\u2500 ks-script-1uLekR.log
            \u251C\u2500\u2500 ks-script-iGpl4q.log
            \u251C\u2500\u2500 packaging.log
            \u251C\u2500\u2500 program.log
            \u251C\u2500\u2500 storage.log
            \u2514\u2500\u2500 syslog
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4);function k(b,g){const s=o("ExternalLinkIcon");return p(),c("div",null,[n("p",null,[n("a",u,[a("rsync \u5B98\u65B9\u7F51\u7AD9"),e(s)])]),l(" more "),d,n("p",null,[n("a",v,[a("\u7FFB\u8BD1\u624B\u518C"),e(s)])]),m])}const f=i(r,[["render",k],["__file","rsync.html.vue"]]);export{f as default};
