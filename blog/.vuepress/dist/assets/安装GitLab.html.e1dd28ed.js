import{_ as s}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as n,c as a,f as e}from"./app.7c1f55c5.js";const i={},l=e(`<h1 id="\u5B89\u88C5-gitlab" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5-gitlab" aria-hidden="true">#</a> \u5B89\u88C5 GitLab</h1><h3 id="_1-\u914D\u7F6E-yum-\u4ED3\u5E93" tabindex="-1"><a class="header-anchor" href="#_1-\u914D\u7F6E-yum-\u4ED3\u5E93" aria-hidden="true">#</a> 1. \u914D\u7F6E yum \u4ED3\u5E93</h3><ul><li><p>\u65B0\u5EFA <code>/etc/yum.repos.d/gitlab-ce.repo</code> \u5185\u5BB9\u5982\u4E0B</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>gitlab-ce<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>Gitlab CE Repository
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el<span class="token variable">$releasever</span>/
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u518D\u6267\u884C\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> yum makecache
<span class="token function">sudo</span> yum <span class="token function">install</span> gitlab-ce
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="_2-\u5B89\u88C5\u4F9D\u8D56\u5305" tabindex="-1"><a class="header-anchor" href="#_2-\u5B89\u88C5\u4F9D\u8D56\u5305" aria-hidden="true">#</a> 2. \u5B89\u88C5\u4F9D\u8D56\u5305</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">curl</span> policycoreutils-python openssh-server perl

<span class="token comment"># Enable OpenSSH server daemon if not enabled: sudo systemctl status sshd</span>
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> sshd
<span class="token function">sudo</span> systemctl start sshd

<span class="token comment"># Check if opening the firewall is needed with: sudo systemctl status firewalld</span>
<span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--permanent</span> --add-service<span class="token operator">=</span>http
<span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--permanent</span> --add-service<span class="token operator">=</span>https
<span class="token function">sudo</span> systemctl reload firewalld


<span class="token function">sudo</span> yum <span class="token function">install</span> postfix
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> postfix
<span class="token function">sudo</span> systemctl start postfix
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-\u5B89\u88C5-gitlab" tabindex="-1"><a class="header-anchor" href="#_3-\u5B89\u88C5-gitlab" aria-hidden="true">#</a> 3. \u5B89\u88C5 GitLab</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> gitlab-ce
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_4-\u521D\u59CB\u5316-gitlab" tabindex="-1"><a class="header-anchor" href="#_4-\u521D\u59CB\u5316-gitlab" aria-hidden="true">#</a> 4. \u521D\u59CB\u5316 GitLab</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">vim</span> /etc/gitlab/gitlab.rb

<span class="token comment"># \u4FEE\u6539 gitlab \u914D\u7F6E\u6587\u4EF6\uFF0C\u5C06 external_url=&#39;http://gitlab.example.com&#39; \u5730\u5740\u4FEE\u6539\u6210\u670D\u52A1\u5668\u7684IP\u6216\u8005\u57DF\u540D</span>
external_url <span class="token string">&quot;https://192.168.2.90&quot;</span>

<span class="token comment"># \u4FEE\u6539 gitlab \u914D\u7F6E\u6587\u4EF6\uFF0C\u914D\u7F6E\u521D\u59CB\u5BC6\u7801</span>
gitlab_rails<span class="token punctuation">[</span><span class="token string">&#39;initial_root_password&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;&lt;my_strong_password&gt;&#39;</span>

<span class="token comment"># \u914D\u7F6E\u76D1\u542C\u7F51\u7EDC\uFF1Atcp</span>
gitlab_workhorse<span class="token punctuation">[</span><span class="token string">&#39;listen_network&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;tcp&quot;</span>

<span class="token comment"># \u914D\u7F6E\u5730\u5740\u548C\u7AEF\u53E3</span>
gitlab_workhorse<span class="token punctuation">[</span><span class="token string">&#39;listen_addr&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;192.168.2.908888&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-\u4FEE\u6539\u7F51\u7EDC\u7AEF\u53E3" tabindex="-1"><a class="header-anchor" href="#_5-\u4FEE\u6539\u7F51\u7EDC\u7AEF\u53E3" aria-hidden="true">#</a> 5. \u4FEE\u6539\u7F51\u7EDC\u7AEF\u53E3</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u7981\u7528\u5185\u7F6ENG</span>
nginx<span class="token punctuation">[</span><span class="token string">&#39;enable&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token comment"># \u6307\u5B9ANG\u7684\u7528\u6237\u540D</span>
web_server<span class="token punctuation">[</span><span class="token string">&#39;external_users&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;nginx&#39;</span><span class="token punctuation">]</span>

<span class="token comment">#  \u6DFB\u52A0NG\u5730\u5740\u5230\u4FE1\u4EFB\u5217\u8868\uFF0C\u6211\u8FD9\u91CC\u5C31\u662F\u672C\u673A\u5730\u5740</span>
gitlab_rails<span class="token punctuation">[</span><span class="token string">&#39;trusted_proxies&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;127.0.0.1&#39;</span><span class="token punctuation">]</span>

<span class="token comment"># \u914D\u7F6E\u76D1\u542C\u7F51\u7EDC\uFF1Atcp</span>
gitlab_workhorse<span class="token punctuation">[</span><span class="token string">&#39;listen_network&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;tcp&quot;</span>

<span class="token comment"># \u914D\u7F6E\u5730\u5740\u548C\u7AEF\u53E3</span>
gitlab_workhorse<span class="token punctuation">[</span><span class="token string">&#39;listen_addr&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;192.168.11.20:8888&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-\u5E38\u7528\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_6-\u5E38\u7528\u547D\u4EE4" aria-hidden="true">#</a> 6. \u5E38\u7528\u547D\u4EE4</h3><ul><li><p>\u91CD\u65B0\u7F16\u8BD1\u914D\u7F6E\uFF0C\u5E76\u542F\u52A8 <code>GitLab</code> \u670D\u52A1</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> gitlab-ctl reconfigure
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u542F\u52A8\u6240\u6709 <code>GitLab</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> gitlab-ctl start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u91CD\u65B0\u542F\u52A8 <code>GitLab</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> gitlab-ctl restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u505C\u6B62\u6240\u6709 <code>GitLab</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> gitlab-ctl stop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u67E5\u770B\u670D\u52A1\u72B6\u6001</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> gitlab-ctl status
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u67E5\u770B <code>Gitlab</code> \u65E5\u5FD7</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> gitlab-ctl <span class="token function">tail</span>

<span class="token function">sudo</span> gitlab-ctl <span class="token function">tail</span> nginx/gitlab_access.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u4FEE\u6539\u9ED8\u8BA4\u7684\u914D\u7F6E\u6587\u4EF6</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">vim</span> /etc/gitlab/gitlab.rb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u68C0\u67E5 <code>Gitlab</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>gitlab-rake gitlab:check <span class="token assign-left variable">SANITIZE</span><span class="token operator">=</span>true <span class="token parameter variable">--trace</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul>`,13),t=[l];function c(o,d){return n(),a("div",null,t)}const u=s(i,[["render",c],["__file","\u5B89\u88C5GitLab.html.vue"]]);export{u as default};
